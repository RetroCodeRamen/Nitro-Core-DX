TABLE  of  CONTENTS 

□ 

Table  of  Contents 

BOOK  I 


SUBJECT  PAGE 

PREFACE 1 

SECTION  1 - APPROVAL  PROCESS  111 

NO  A Licensed  Software  Approval  Process 1-1-1 

Super  NES  Software  Submission  Requirements 1-2-1 

SECTION  2 - SUPER  NES  SOFTWARE  2-1-1 

Introduction 2-1-1 

Object  (OBJ) 2-2-1 

Background  (BG) 2-3-1 

Mosaic 2-4-1 

Rotation/Enlargement/Reduction 2-5-1 

Window  (Window  Mask) 2-6-1 

Main/Sub  Screen 2-7-1 

CG  Direct  Select 2-8-1 

H-Pseudo  512 2-9-1 

Complementary  Multiplication  (Signed  Multiplication) 2-10-1 

H/V  Counter  Latch 2-1 1-1 

Offset  Change 2-12-1 

Standard  Controller 2-13-1 

Programmable  I/O  Port 2-14-1 

Absolute  Multiplication/Division 2-15-1 

H/V  Count  Timer 2-16-1 

Direct  Memory  Access  (DMA) 2-17-1 

Interlace 2-18-1 

H-512  Mode  (BG  Mode  5 & 6) 2-19-1 

OBJ  33’s  Lines  Over  & Priority  Order 2-20-1 

CPU  Clock  and  Address  Map 2-21-1 

Super  NES  Functional  Operation 2-22-1 

System  Flowchart 2-23- 1 

Programming  Cautions 2-24- 1 

Documented  Problems 2-25-1 

Register  Clear  (Initial  Settings) 2-26-1 

PPU  Registers 2-27- 1 

CPU  Registers 2-28-1 


1 


TABLE  of  CONTENTS 


Table  of  Contents  (Continued) 

SUBJECT  PAGE 

SECTION  3 - SUPER  NES  SOUND  3-1-1 

SNES  Sound  Source  Outline 3-1-1 

BRR  (Bit  Rate  Reduction) 3-2-1 

I/O  Ports 3-3-1 

Control  Register 3-4-1 

Timers 3-5-1 

DSP  Interface  Register 3-6-1 

Register  Used 3-7- 1 

CPU  Organization 3-8-1 

Sound  Programming  Cautions 3-9-1 

SECTION  4 - SUPER  NES  CPU  DATA  4-1-1 

Outline 4-1-1 

Explanation  of  CPU  Terminal  Functions 4-2-1 

Explanation  of  Functions 4-3-1 

Addressing  Mode 4-4- 1 

Command  Set  (Alphabetical  Order) 4-5-1 

Command  Set  (Matrix  Display) 4-6- 1 

Cycles  and  Bytes  of  Addressing  Modes 4-7- 1 

Differences  Among  65C816,  65C02,  and  6502 4-8-1 

Restrictions  Upon  Use  & Application  Information 4-9-1 

Details  of  Command  Functions 4-10-1 

Description  of  Commands 4-11-1 

AC  Characteristics 4-12-1 

TABLES  OF  APPENDIX 

Appendix  A - PPU  Registers A-l 

Appendix  B - CPU  Registers B-l 

Appendix  C - SPC700  Commands C-l 

Appendix  D - Data  Transfer  Procedure D-l 


INDEX 


TABLE  of  CONTENTS 


Table  of  Contents  (Continued) 

BOOK  II 

SUBJECT  PAGE 

SECTION  1 - SUPER  ACCELERATOR  (SA-1) Ill 

Super  Accelerator  System  Functions 1-1-1 

Configuration  of  S A- 1 1-2-1 

Super  Accelerator  Memory  Map 1-3-1 

SA-1  Internal  Register  Configuration 1-4-1 

Multi-Processor  Processing 1-5-1 

Character  Conversion 1-6- 1 

Arithmetic  Function 1-7-1 

Variable-Length  Bit  Processing 1-8-1 

DMA 1-9-1 

SA-1  Timer 1-10-1 

SECTION  2 - SUPER  FX® 2-1-1 

Introduction  to  Super  FX 2-1-1 

GSU  Functional  Operation 2-2-1 

Memory  Mapping 2-3-1 

GSU  Internal  Register  Configuration 2-4-1 

GSU  Program  Execution 2-5-1 

Instruction  Execution 2-6-1 

Data  Access 2-7-1 

GSU  Special  Functions 2-8-1 

Description  of  Instructions 2-9-1 

SECTION  3 - DSP/DSP1 3-1-1 

Introduction  to  DSP1 3-1-1 

Command  Summary 3-2-1 

Parameter  Data  Type 3-3-1 

Use  of  DSP1 3-4-1 

Description  of  DSP  1 Commands 3-5- 1 

Math  Functions  and  Equations 3-6-1 


iii 


TABLE  of  CONTENTS 


Table  of  Contents  ( Continued) 

SUBJECT  PAGE 

SECTION  4 - ACCESSORIES 4-1-1 

The  Super  NES  Super  Scope®  System 4-1-1 

Principles  of  the  Super  NES  Super  Scope 4-2- 1 

Super  NES  Super  Scope  Functional  Operation 4-3- 1 

Super  NES  Super  Scope  Receiver  Functions 4-4-1 

Graphics 4-5-1 

Super  NES  Mouse  Specifications 4-6-1 

Using  the  Standard  BIOS 4-7-1 

Programming  Cautions 4-8- 1 

MultiPlayer  5 Specifications 4-9-1 

MultiPlayer  5 Supplied  BIOS 4-10-1 

SUPPLEMENTAL  INFORMATION 

Super  NES  Parts  List 1 

Game  Content  Guidelines 3 

Guidelines  Concerning  Commercialism  and  Promotion  of  Licensee 

Products  or  Services  in  Nintendo  Licensed  Games 5 

Super  NES  Video  Timing  Information 10 

INDEX 

BULLETINS 


IV 


LIST  of  FIGURES 


List  of  Figures 
BOOK  I 


TITLE 


FIGURE 

NUMBER  PAGE 


Software  Approval  Process 

Picture  Image 

Scanning  Pattern  for  Interlace 

Super  NES  Functional  Block  Diagram 

System  Block  Diagram 

Memory  Map 

Sound  Signal  Flow 

BRR  Data  String 

BRR  Range  Data 

Example  Data  When  Filter  = 0 

I/O  Diagram 

Port  Clear 

Clear  Timing 

Timer  Control 

Timer  Section 

4- Bit  Counter 

Timing 

Timer  Related  Registers 

Interface  Register 

Interface  Register  Flow 

Bent  Line  Mode 

CPU  Registers 

Boolean  Bit  Operation  Commands 

Memory  Access  Addressing  Effective  Address 

Wave-form  Overflow 

SNES  CPU  Block  Diagram 

SNES  CPU  Terminal  Interface  Diagram 

SNES  CPU  Timing  Chart 

5- PPU  Main/Sub  Screen  Window 


1-1-1 

1-1-1 

2-1-1 

2-1-1 

2-1-2 

2-1-2 

2-22-1 

2-22-1 

3-1-1 

3-1-2 

3-1-2 

3-1-3 

3-1-3 

3-1-4 

3-2-1 

3-2-1 

.3-2-2 

3-2-2 

,3-2-3 

3-2-3 

.3-3-1 

3-3-2 

.3-4-1 

3-4-1 

.3-4-2 

3-4-1 

.3-4-3 

3-4-2 

.3-5-1 

3-5-1 

.3-5-2 

3-5-2 

.3-5-3 

3-5-2 

.3-5-4 

3-5-3 

.3-6-1 

3-6-1 

.3-6-2 

3-6-1 

.3-7-1 

3-7-4 

.3-8-1 

3-8-3 

.3-8-2 

3-8-8 

.3-8-3 

3-8-9 

,3-9-1 

3-9-1 

.4-1-1 

4-1-2 

.4-1-2 

4-1-3 

,4-12-1 

4-12-2 

A-l 

A-23 

LIST  of  FIGURES 


List  of  Figures  (Continued) 


BOOK  II 


TITLE 


FIGURE 

NUMBER  PAGE 


Super  Accelerator  System  Configuration 

SAS  Bus  Image 

SA-1  Block  Diagram 

Bitmap  Register  Files  0~7 

Bitmap  Register  Files  8~F 

Accelerator  Mode 

Parallel  Processing  Mode 

Mixed  Processing  Mode 

Character  Conversion  1 

Character  Conversion  2 

Compressed  Bitmap  Data 

Bitmap  Image  Projection 

Bitmap  Data  Expansion 

Memory  Addresses  for  the  Bitmap  Area 

Character  Conversion  Buffers 

Fixed  Mode  Process  Flow  Diagram 

Auto-increment  Mode  Process  Flow  Diagram  ... 

Barrel  Shift  Process 

Normal  DMA 

Character  Conversion  DMA 

Super  FX  System  Configuration 

Game  Pak  ROM/RAM  Bus  Diagram 

GSU  Functional  Block  Diagram 

Super  NES  CPU  Memory  Map 

Super  FX  Memory  Map 

Example  of  General  Register 

128  Dot  High  BG  Character  Array 

160  Dot  High  BG  Character  Array 

192  Dot  High  BG  Character  Array 

OBJ  Character  Array 

Plot  Operations  Assigned  by  CMODE 

System  Block  Diagram  (DSP1) 

Super  NES  CPU  and  DSP1  Communications  .... 

DSP1  Command  Execution 

Mode  20/DSP  Memory  Map 

Mode  21 /DSP  Memory  Map 

Super  NES/DSP1  Memory  Mapping  (Mode  21) 
DSP1  Status  Register  Configuration 


1-1-1 

1-1-3 

1-1-2 

1-1-4 

1-2-1 

1-2-1 

1-4-1 

1-4-24 

1-4-2 

1-4-25 

1-5-1 

1-5-6 

1-5-2 

1-5-7 

1-5-3 

1-5-8 

1-6-1 

1-6-1 

1-6-2 

1-6-2 

1-6-3 

1-6-3 

1-6-4 

1-6-3 

1-6-5 

1-6-5 

1-6-6 

1-6-6 

1-6-7 

1-6-7 

1-8-1 

1-8-2 

1-8-2 

1-8-3 

1-8-3 

1-8-5 

1-9-1 

1-9-1 

1-9-2 

1-9-1 

2-1-1 

2-1-3 

2-1-2 

2-1-4 

2-2-1 

2-2-1 

2-3-1 

2-3-2 

2-3-2 

2-3-4 

2-4-1 

2-4-2 

2-8-1 

2-8-2 

2-8-2 

2-8-2 

2-8-3 

2-8-2 

2-8-4 

2-8-3 

2-8-5 

2-8-13 

3-1-1 

3-1-2 

3-1-2 

3-1-3 

3-1-3 

3-1-3 

3-1-4 

3-1-4 

3-1-5 

3-1-5 

3-4-1 

3-4-1 

3-4-2 

3-4-2 

VI 


LIST  of  FIGURES 


List  of  Figures  (Continued) 


TITLE 

DSP1  Operations  Flow  Diagram 

Super  NES  CPU/DSP1  Operational  Timing 

Trigonometric  Calculation 

Vector  Calculation 

Vector  Size  Comparison 

Vector  Absolute  Value  Calculation 

Two-Dimensional  Coordinate  Rotation 

Examples  of  Three-Dimensional  Rotation 

Assignment  of  Projection  Parameter 

Relationship  of  Sight  and  Projected  Plane 

Calculation  of  Raster  Data 

BG  Screen  and  Displayed  Area 

Calculation  of  Projected  Position  of  Object 

Projection  Image  of  Object 

Calculation  of  Coordinates  for  the  Indicated  Point  on  the  Screen 

Attack  Point  and  Position  Indicated  on  Screen  (Side  View) 

Attitude  Computation 

Object  Coordinate  Rotated  on  Y Axis 

Object  Coordinate  Rotated  on  X Axis 

Object  Coordinate  Rotated  on  Z Axis 

Conversion  of  Global  to  Objective  Coordinates 

Conversion  of  Object  to  Global  Coordinates 

Calculation  of  Inner  Product  with  Forward  Attitude 

Position  of  Aircraft  and  Vector  Code 

Calculation  of  Rotation  Angle  After  Attitude  Change 

Signal  Flow 

Optical  Alignment 

Virtual  Screen  Alignment 

Address  and  Bit  Assignments 

Picture  Tube 

Scanning 

Area  Seen  by  Super  NES  Super  Scope 

Vertical  Positioning 

Horizontal  Positioning 

Horizontal/Vertical  Counter 

Super  NES  Super  Scope  Block  Diagram 

Super  NES  Super  Scope  Flow  Diagram 

Raster  Signal 

Definition  of  One  Bit 

Output  Signal  Code 

Definitions  of  Codes 


FIGURE 


NUMBER 

PAGE 

3-4-3 

3-4-3 

3-4-4 

3-4-4 

3-5-1 

3-5-3 

3-5-2 

3-5-4 

3-5-3 

3-5-6 

3-5-4 

3-5-7 

3-5-5 

3-5-8 

3-5-6 

3-5-11 

3-5-7 

3-5-13 

3-5-8 

3-5-13 

3-5-9 

3-5-16 

3-5-10 

3-5-16 

3-5-11 

3-5-18 

3-5-12 

3-5-19 

3-5-13 

3-5-20 

3-5-14 

3-5-21 

3-5-15 

3-5-23 

3-5-16 

3-5-23 

3-5-17 

3-5-23 

3-5-18 

3-5-23 

3-5-19 

3-5-26 

3-5-20 

3-5-28 

3-5-21 

3-5-29 

3-5-22 

3-5-30 

3-5-23 

3-5-32 

4-1-1 

4-1-1 

4-1-2 

4-1-2 

4-1-3 

4-1-2 

4-1-4 

4-1-5 

4-2-1 

4-2-1 

4-2-2 

4-2-2 

4-2-3 

4-2-3 

4-2-4 

4-2-4 

4-2-5 

4-2-5 

4-2-6 

4-2-6 

4-3-1 

4-3-2 

4-3-2 

4-3-3 

4-3-3 

4-3-4 

4-3-4 

4-3-5 

4-3-5 

4-3-5 

4-3-6 

4-3-6 

vii 


LIST  of  FIGURES 


L 


List  of  Figures  (Continued) 


TITLE 


FIGURE 

NUMBER  PAGE 


Raster  Signal  Transmission  Timing 

Receiver  Block  Diagram 

Operation  Flow  Diagram 

Receiver/Transmitter  Interface  Schematic 

One  Bit  Code  Detection 

Cursor  Mode  Raster  Detection  Cycle 

Trigger  Mode,  Single  Shot 

Trigger  Mode,  Multiple  Shots 

Noise  Flag 

Null  Bit 

Pause  Bit 

Trigger,  Single  Shot 

Trigger,  Multiple  Shots 

Optical  Color  Sensitivity  Chart 

Valid  Hyper  Mouse  Data  String 

Serial  Data  Read  Timing 

Explanation  of  Data  Strings  2 Bits  or  Longer 

Super  NES  Hyper  Mouse  Dimensions 

Standard  BIOS,  Output  Register 

Examples  of  Speed  Switching  Program  Subroutine  Call 

MultiPlayer  5 Device  Hardware  Connections 

MultiPlayer  5 Read  Timing  Chart,  5P  Mode 

Data  Read  Timing  for  Dissimilar  Devices 

Valid  Controller  Data  String 

Sample  Program  Display  Format 


.4-3-7 

4-3-7 

.4-4-1 

4-4-1 

.4-4-2 

4-4-2 

.4-4-3 

4-4-3 

.4-4-4 

4-4-4 

.4-4-5 

4-4-6 

.4-4-6 

4-4-7 

.4-4-7 

4-4-8 

.4-4-8 

4-4-9 

.4-4-9 

4-4-9 

.4-4-10 

4-4-10 

.4-4-11 

4-4-11 

.4-4-12 

4-4-12 

.4-5-1 

4-5-2 

.4-6-1 

4-6-2 

.4-6-2 

4-6-3 

.4-6-3 

4-6-6 

.4-6-4 

4-6-7 

.4-7-1 

4-7-3 

.4-7-2 

4-7-4 

.4-9-1 

4-9-2 

.4-9-2 

4-9-5 

.4-9-3 

4-9-8 

.4-9-4 

4-9-12 

.4-10-1 

4-10-2 

viii 


LIST  of  TABLES 


List  of  Tables 
BOOK  I 


TITLE 

B-Bus  Address  Changes 

A-Bus  Addressing 

BRR  Filter  Values 

Peripherals 

PortO  - Port3  Registers 

Timer  Function 

DSP  Register  Map 

ADSR  Parameters 

Gain  Parameters 

Noise  Generator  Clock 

Source  Directory 

Source  Data  Block  Format 

Opcode  Matrix 

Address  Modes 

Table  of  Operations 

AC  Characteristics 

Command  Operand  Symbols  and  Meaning 
Symbols  and  Meaning  for  Operational 

Description 

Explanation  of  Symbols  in  the  Status 

Flag  Column 

Data  Transmission  Commands,  Group  1 .... 
Data  Transmission  Commands,  Group  2 .... 
Data  Transmission  Commands,  Group  3 .... 

Arithmetic  Operation  Commands 

8-Bit  Logic  Operation  Commands 

Addition  and  Subtraction  Commands 

Shift  Rotation  Commands 

16-Bit  Data  Transmission  Commands 

16-Bit  Operation  Commands 

Multiplication  and  Division  Commands 

Decimal  Compensation  Commands 

Branching  Commands 

Subroutine  Call,  Return  Commands 

Stack  Operation  Commands 

Bit  Operation  Commands  

Program  Status  Flag  Operation  Commands 
Other  Commands  


TABLE 


NUMBER 

PAGE 

2-17-1 

2-17-2 

2-17-2 

2-17-4 

3-2-1 

3-2-2 

3-3-1 

3-3-1 

3-3-2 

3-3-2 

3-5-1 

3-5-1 

3-7-1 

3-7-1 

3-7-2 

3-7-3 

3-7-3 

3-7-5 

3-7-4 

3-7-8 

3-7-5 

3-7-11 

3-7-6 

3-7-12 

4-6-1 

4-6-2 

4-7-1 

4-7-1 

4-7-2 

4-7-2 

4-12-1 

4-12-1 

C-l 

C-l 

C-2 

C-2 

C-3 

C-2 

C-4 

C-3 

C-5 

C-3 

C-6 

C-4 

C-l 

C-5 

C-8 

C-6 

C-9 

C-l 

C-10 

C-l 

C-l  1 

C-8 

C-12 

C-8 

C-13 

C-8 

C-14 

C-8 

C-15 

C-9 

C-16 

C-9 

C-17 

C-9 

C-18 

C-10 

C-19 

C-10 

C-20 

C-10 

IX 


LIST  of  TABLES 


List  of  Tables  (Continued) 


BOOK  u 


TITLE 

Types  of  Interrupts 

Interrupt  Identification  and  Clear 

Interrupt  Mask 

Sending  and  Receiving  a Message 

Situation  Dependant  Vectors 

Operating  Modes  and  Processing  Speeds 

Horizontal  Size  of  VRAM  (CDMA  Register) 

Number  of  Zero  Bits  in  BW-RAM 

Character  Conversion  and  Data  Format 

Arithmetic  Operations  Settings  and  Cycles .... 

Amount  of  Barrel  Shift 

Source  Device  Settings 

Destination  Device  Settings 

DMA  Transmission  Speed 

Timer  Modes  and  Their  Ranges 

Timer  Interrupts 

Registers  Listed  by  Functional  Group 

Instruction  Set 

GSU  General  Registers 

GSU  Status  Register  Flags 

Screen  Height 

Color  Gradient 

Dummy  Interrupt  Vector  Addresses 

Dummy  Data 

Functions  of  CMODE 

DSP1  Command  Summary 

Parameter  Data  Type 

Signal  Bit  Definitions 

MultiPlayer  5 Switch  Function 

MultiPlayer  5 Data  Format 


TABLE 

NUMBER 

PAGE 

1-5-1 

1-5-2 

1-5-2 

1-5-2 

1-5-3 

1-5-3 

1-5-4 

1-5-3 

1-5-5 

1-5-4 

1-5-6 

1-5-9 

1-6-1 

1-6-6 

1-6-2 

1-6-8 

1-6-3 

1-6-10 

1-7-1 

1-7-1 

1-8-1 

1-8-4 

1-9-1 

1-9-3 

1-9-2 

1-9-3 

1-9-3 

1-9-4 

1-10-1 

1-10-1 

1-10-2 

1-10-2 

2-2-1 

2-2-3 

2-2-2 

2-2-6 

2-4-1 

2-4-1 

2-4-2 

2-4-4 

2-4-3 

2-4-8 

2-4-4 

2-4-8 

2-5-1 

2-5-4 

2-5-2 

2-5-5 

2-8-1 

2-8-9 

3-2-1 

3-2-1 

3-3-1 

3-3-1 

4-1-1 

4-1-6 

4-9-1 

4-9-3 

4-9-2 

4-9-6 

SNES  DEVELOPMENT  MANUAL 


I 


[Nintendo  Licensee  Letterhead! 

[Insert  Date] 

Re:  Confidentiality  Agreement 

Dear : 

(the  “Company”)  is  a licensee  of  certain  confidential,  pro- 
prietary, and  trade  secret  information  belonging  to  Nintendo  of  America  Inc.  (“Nintendo”).  Such 
information  of  Nintendo  may  be  provided  to  you  by  the  company  or  directly  by  Nintendo  in  reli- 
ance on  your  relationship  to  the  Company  and  your  agreement  expressed  herein.  All  references  in 
this  letter  to  confidential,  proprietary,  and  trade  secret  information  will  be  deemed  to  refer  solely 
to  confidential,  proprietary,  and  trade  secret  information  of  Nintendo  and  its  affiliated  corpora- 
tions. 

Your  obligations  in  connection  with  confidential,  proprietary,  and  trade  secret  information 
of  the  Company  which  are  reflected  in  other  agreements  between  you  and  the  Company,  remain 
unchanged,  and  are  in  full  force  and  effect. 

In  consideration  of  the  disclosure  of  confidential,  proprietary,  and  trade  secret  information 
to  you,  you  agree  that,  except  as  required  by  your  services  to  the  Company,  you  will  not,  at  any 
time  during  the  term  of  your  association  with  the  Company,  or  at  any  time  thereafter,  directly  or 
indirectly  use,  communicate,  disclose,  disseminate,  discuss,  lecture  upon,  or  publish  articles  con- 
cerning such  confidential,  proprietary,  and  trade  secret  information  without  the  prior  written  con- 
sent of  the  Company. 

“Confidential,  proprietary,  and  trade  secret  information”  as  used  herein  means  any  and  all 
information  concerning:  (i)  copyrights,  patents,  and/or  patent  applications  owned  by  Nintendo 
which  are  applicable  to  the  Nintendo  Entertainment  System  (“NES”),  Game  Boy  hand  held  video 
system  (“Game  Boy”),  Super  Nintendo  Entertainment  System  (Super  NES),  or  other  hardware, 
accessory,  or  software  products  of  Nintendo,  (ii)  the  design,  and  operation  of  the  NES,  Game 
Boy,  Super  NES,  or  other  Nintendo  products,  including  without  limitation  the  security  system  of 
such  products,  and  (iii)  new  products,  marketing  plans,  know-how,  techniques,  and  methods  relat- 
ing to  the  development  of  software  for  the  NES,  Game  Boy,  Super  NES,  or  other  Nintendo  hard- 
ware, accessory,  or  software  products  disclosed  to  you  as  a consequence  of,  or  during  your 
association  with  the  Company.  Such  confidential,  proprietary,  and  trade  secret  information  will 
not  include  information  which  is:  (i)  a part  of  the  public  domain;  or  (ii)  obtained  by  you  from 
someone  otherwise  authorized  to  disclose  such  information. 

All  documents,  tapes,  computer  records,  notebooks,  work  papers,  notes  and  memoranda 
containing  confidential,  proprietary,  and  trade  secret  information,  made  or  compiled  by  you  at  any 
time,  or  made  available  to  you  during  the  term  of  your  association  with  the  Company,  including 
all  copies  thereof,  will  be  the  property  of  the  Company,  and  will  be  held  by  you  in  trust  and  solely 
for  the  benefit  of  the  Company,  and  will  be  promptly  delivered  to  the  Company  upon  termination 
of  your  association  with  the  Company  or  at  any  time  upon  request  by  the  Company. 

In  the  event  of  any  material  breach  by  you  of  your  obligations  under  this  agreement,  then 
the  Company  will  be  entitled  to  such  relief,  including  injunctive  relief  and  damages,  including  at- 
torney’s fees,  as  may  be  awarded  by  a court  of  competent  jurisdiction,  in  addition  to  all  other  re- 
lief available  to  the  Company.  In  the  event  the  Company  fails  to  take  action  against  you  for  such  a 
breach,  Nintendo  will  have  a direct  right  of  action  against  you,  without  the  necessity  of  naming 
the  Company. 


2 


PREFACE 


I y 

! 

Preface 

TECHNICAL  QUESTIONS 

If  you  need  technical  assistance  with  your  Nintendo  Licensee  product,  our 

Licensee  Support  Group  Engineers  are  available  between  9:00  a.m.  and  6:00  p.m. 

Pacific  Standard  Time. 

Telephone:  1-206-861-2715 

Fax:  1-206-882-3585 

Written  Inquiries:  Nintendo  of  America  Inc. 

Engineering  Department 
Licensee  Support  Group 
4820  150th  Ave.  N.E. 

Redmond,  Wa.  98052 

CONFIDENTIALITY 

Pursuant  to  the  terms  of  each  Nintendo  product  license  and/or  confidentiality 
agreement,  Nintendo  licensees  and  developers  are  required  to  secure  the  confidential  treat- 
ment of  information  received  or  derived  from  Nintendo  from  all  employees,  agents,  or 
contractors. 

In  response  to  the  request  of  several  licensees,  we  have  prepared  a supplemental 
confidentiality  agreement  which  is  intended  to  cover  only  Nintendo  derived  information 
that  may  be  used  in  your  business  in  addition  to  confidentiality  agreements  which  you  will 
sign  with  your  employees,  agents,  and  contractors  for  your  own  benefit.  A sample  agree- 
ment is  included  at  the  end  of  the  Preface  for  your  information. 

This  supplemental  agreement  is  a suggested  format  only  and  is  not  a required 
form,  as  laws  in  your  state  or  jurisdiction  may  vary.  You  may  wish  to  consult  with  your 
own  legal  counsel  regarding  recommended  formats  for  your  state/country.  In  many  cases, 
your  existing  confidentiality  agreements  will  protect  both  Nintendo  and  you  fully.  Howev- 
er, we  urge  each  of  you  to  review  agreements  that  you  have  in  place  and  consider  this  sup- 
plemental agreement,  or  other  supplements,  as  may  be  appropriate  or  necessary  to  protect 
the  rights  of  Nintendo. 

If  you  do  not  presently  have  a confidentiality  agreement  in  place  for  your  own  em- 
ployees, agents,  or  contractors,  including  those  who  have  access  to  confidential  informa- 
tion of  Nintendo,  we  suggest  you  contact  your  legal  counsel  for  advice  on  proper 
agreements  to  protect  your  valuable  confidential  information  and  to  insure  that  you  are 
fully  in  compliance  with  your  Nintendo  license/confidentiality  agreement. 

Please  contact  our  Legal  or  Licensing  Departments  at  1-206-882-2040  between 
9:00  a.m.  and  6:00  p.m.  Pacific  Standard  Time,  with  any  questions  you  may  have  concern- 
ing this  matter. 


1 


PREFACE 


The  obligations  set  forth  in  this  letter  regarding  treatment  of  confidential,  proprietary,  and 
trade  secret  information  are  continuing  obligations  which  will  continue  regardless  of  your  con- 
tinuing association  with  the  company. 

Please  acknowledge  your  understanding  and  acceptance  of  the  foregoing  by  signing  and 
returning  two  (2)  copies  of  this  letter  to  the  Company  for  the  benefit  of  the  Company  and  Ninten- 
do. 

Yours  sincerely, 

[Insert  Nintendo  Licensee/Developer  Name] 

By: 

ACKNOWLEDGED  AND  ACCEPTED 
[Insert  Contractor  or  Employee  Name] 

By: 

Date:_ 


3 


NOA  LICENSED  SOFTWARE  APPROVAL  PROCESS 


Chapter  1.  NOA  Licensed  Software  Approval  Process 

This  chapter  describes  the  process  adopted  by  Nintendo  of  America  Inc.  (NOA)  which  af- 
fords interested  parties  to  become  Nintendo  Authorized  Software  Developers  and/or  Nin- 
tendo Authorized  Software  Licensees.  The  normal  process  is  summarized  below. 


Developer  Inquiry 

i 

Developer  Application 

♦ 

NOA  Assessment 

t 

Confidentiality 

Agreement 

^ Nintendo  Authorized  Software  Developer 

Technical  Support 

T 

Licensee  Inquiry 
Licensee  Application 

i 

NOA  Assessment 

_t_ 

Product  Submission 

i_ 

Product  Evaluation/Approval 

T 

License  Agreement 

I Nintendo  Authorized  Software  Licensee 

Produce  Product 


Figure  1-1-1  Software  Approval  Process 

General  requirements  for  the  steps  listed  above  are  covered  in  the  following  paragraphs. 
Specific  questions  not  answered  within  this  manual  should  be  addressed  to  NOA's  Li- 
censing Department. 


1-1-1 


SNES  DEVELOPMENT  MANUAL 


1.2  AUTHORIZED  SOFTWARE  DEVELOPER  REQUIREMENTS 

Parties  interested  in  becoming  a Nintendo  Authorized  Software  Developer  may 
contact  the  NOA  Licensing  Department  via  telephone,  FAX,  or  in  writing. 

Written  Inquiries:  Nintendo  of  America  Inc. 

Licensing  Department 
4820-1 50th  Avenue  N.E. 

Redmond,  WA  98052  USA 

Telephone:  (206)  882-2040 

FAX:  (206)  882-3585 

In  response,  the  NOA  Licensing  Department  will  send  a letter  which  describes 
specific  requirements  for  becoming  a licensed  developer.  These  requirements  are 
described,  in  general,  below. 

1 .2.1  LETTER  OF  APPLICATION 

A prospective  developer’s  letter  of  application  should  include  the  follow- 
ing items. 

1)  A detailed  description  of  the  submitting  individual  or  company,  in- 
cluding a summary  of  software  development  or  related  experience, 
financial  stability,  and  market  leadership.  This  information  should  be 
in  the  form  of  a prospectus,  business  plan,  or  summary  statement. 

2)  A detailed  introduction  to  key  personnel  and  developers  setting  forth 
any  technical,  managerial,  or  development  experience  which  may 
be  relevant  and  identifying  any  particular  software  for  any  system  for 
which  they  have  contributed. 

3)  A description  of  any  relationships  or  work  undertaken  for  Nintendo 
third  party  licensees. 

4)  A description  of  business  facilities  and  equipment. 

5)  A copy  of  any  confidentiality/non-disclosure  agreement  which  the 
company’s  employees/agents  are  required  to  sign. 

6)  A complete  listing  and  at  least  three  samples  of  software  previously 
developed,  especially  those  which  incorporate  elements  important 
to  successful  NOA  software  or  similar  entertainment  software. 


1-1-2 


NOA  LICENSED  SOFTWARE  APPROVAL  PROCESS 


1.2.2  NOA  ASSESSMENT 

NOA  will  review  the  material  submitted  and  make  a preliminary  determi- 
nation of  whether  the  prospective  developer’s  qualifications  will  support 
designation  as  an  authorized  software  developer  for  Nintendo.  Because 
authorized  developers  are  provided  with  highly  proprietary  information 
belonging  to  Nintendo,  and  because  many  of  Nintendo’s  licensees  rely 
on  recommendations  and  referrals  to  authorized  developers,  Nintendo 
exercises  a very  high  level  of  care  in  approving  only  a select  number  of 
authorized  developers.  The  Licensing  Department  will  contact  the  pro- 
spective developer  with  the  results  of  NOA’s  assessment. 

1.2.3  CONFIDENTIALITY  AGREEMENT 

If  the  prospective  developer’s  qualifications  support  designation  as  a li- 
censed developer  for  Nintendo,  NOA  will  prepare  a formal  confidentiality 
agreement  for  review  by  the  prospective  developer.  Once  this  agreement 
has  been  formalized  and  processed  by  NOA’s  Licensing  Department,  the 
party  described  within  the  agreement  becomes  a Nintendo  Authorized 
Software  Developer  for  the  specified  product  line(s). 

1.2.4  TECHNICAL  SUPPORT 

All  technical  documentation  which  is  available  for  the  licensed  product 
line(s)  will  be  forwarded  to  the  licensed  developer  upon  formalization  of 
the  confidentiality  agreement.  In  addition,  access  is  afforded  to  NOA’s 
Engineering  Department  Licensee  Support  Group  and  NOA’s  Product 
Development  and  Analysis  Department.  These  two  support  groups  will 
assist  the  licensed  developer  with  any  situational  requirements  or  specifi- 
cations which  are  subject  to  special  product  development. 

1 .3  AUTHORIZED  Software  LICENSEE  REQUIREMENTS 

To  license  a software  product  once  it  has  been  developed,  the  interested  party 
must  market  the  product  through  an  existing  Nintendo  Authorized  Software  Lic- 
ensee or  become  a Nintendo  Authorized  Software  Licensee.  NOA  would  prefer 
that  interested  parties  contact  Nintendo  early  in  the  development  phase  of  a prod- 
uct. Therefore,  the  interested  party  will  already  be  a licensed  developer  when  they 
apply  to  become  an  software  licensee.  Exceptions  will  be  made,  however,  for 
those  parties  which  have  already  developed  a software  product  and  wish  to  li- 
cense it  with  Nintendo.  In  such  cases,  the  interested  party  will  be  processed  and 
approved  as  a Nintendo  Authorized  Software  Developer  first,  then  processed  as  a 
Nintendo  Authorized  Software  Licensee.  In  either  case,  the  requirements  in  the 
following  paragraphs  will  apply. 


1-1-3 


SNES  DEVELOPMENT  MANUAL 


Parties  interested  in  becoming  a Nintendo  Authorized  Software  Licensee  should 
contact  the  NOA  Licensing  Department  via  telephone,  FAX,  or  in  writing.  In  re- 
sponse, the  NOA  Licensing  Department  will  send  a letter  which  describes  specific 
requirements  for  becoming  an  software  licensee.  These  requirements  are  de- 
scribed, in  general,  beginning  on  the  following  page. 

1 .3.1  LETTER  OF  APPLICATION 

A prospective  licensee’s  letter  of  application  should  include  the  following 
items. 

1 ) A detailed  description  of  the  company,  including  a summary  of  rele- 
vant industry  experience,  financial  resources  and  stability,  and  in- 
dustry leadership  or  market  share.  This  information  should  be  in  the 
form  of  a prospectus,  business  plan,  or  summary  statement. 

2)  A detailed  introduction  to  key  personnel  and  developers  setting  forth 
any  technical,  managerial,  or  development  experience  which  may 
be  relevant. 

3)  A marketing  plan  for  the  proposed  product(s),  including  wholesale/ 
retail  price  points,  targeted  distribution  channels,  advertising  com- 
mitments, consumer  service  systems,  and  merchandising. 

4)  Any  market  study  information  on  consumer  demand  for  the  pro- 
posed product(s)  which  the  company  may  be  relying  upon. 

5)  A written  description  (in  general  terms)  of  the  proposed  product. 

6)  A complete  listing  and  at  least  three  samples  of  software  previously 
developed,  especially  those  which  incorporate  elements  important 
to  successful  NOA  software  or  similar  entertainment  software. 

1.3.2  NOA  ASSESSMENT 

NOA  will  make  a preliminary  determination  if  the: 

a)  Product  would  compliment  our  current  line  of  video  game  prod- 
ucts. 

b)  Company  is  capable  of  the  distribution  and  customer  service 
necessary  to  support  a successful  product. 

c)  Product  has  any  special  technical  requirements. 

NOA’s  Licensing  Department  will  inform  the  company  of  the  decision 
made. 


1-1-4 


NOA  LICENSED  SOFTWARE  APPROVAL  PROCESS 


1.3.3  TECHNICAL  SUPPORT 

If  NOA  decides  to  proceed,  the  prospective  licensee  will  be  provided  with 
any  technical  considerations,  suggestions,  and  any  specific  technical  in- 
formation required.  Technical  support  will  be  provided  throughout  the  de- 
velopment of  the  product,  as  needed.  With  respect  to  those  parties 
previously  licensed  as  developers,  this  will  mean  continued  support; 
while  those  parties  contacting  Nintendo  for  the  first  time  will  receive  a set 
of  technical  documentation  which  is  related  to  the  proposed  product.  A 
formal  confidentiality  agreement  must  be  formalized  prior  to  the  release 
of  support  materials,  if  one  is  not  already  on  file. 

1 .3.4  PRODUCT  SUBMISSION  AND  TESTING 

Once  the  proposed  product  has  been  developed  and  tested  by  the  pro- 
spective licensee,  it  should  be  submitted  in  accordance  with  the  applica- 
ble software  submission  requirements,  “Super  NES  Software  Submission 
Requirements”  are  presented  in  the  following  chapter.  The  samples  pro- 
vided will  be  tested  and  results  forwarded  to  the  prospective  licensee.  In 
cases  where  failure  conditions  are  detected  during  testing,  NOA  will  re- 
quire that  the  area(s)  be  corrected  and  the  product  be  resubmitted  for 
testing. 

1 .3.5  FORMAL  LICENSE  AGREEMENT 

Once  the  proposed  product  is  approved,  NOA  will  prepare  a formal  li- 
cense agreement  for  the  prospective  licensee’s  review  and  signature. 
When  formalized,  this  agreement  authorizes  the  licensee  to  go  into  pro- 
duction with  the  specified  licensed  product. 


1-1-5 


SNES  DEVELOPMENT  MANUAL 


Chapter  2.  Super  NES  Software  Submission  Requirements 

All  software  submissions  to  Nintendo  of  America  Inc.  must  be  forwarded  to  the  attention 
of  NOA  Product  Testing  Supervisor.  Otherwise,  the  submission’s  placement  into  the  test- 
ing queue  may  be  delayed.  To  help  reduce  a submission’s  turn-around  time,  it  is  sug- 
gested that  licensees  assign  a primary  contact  person  for  each  software  submission.  All 
communications  with  NOA  concerning  a submission’s  testing  status  should  be  forwarded 
through  this  individual.  The  contact  person  should  also  be  responsible  for  notifying  any 
other  interested  parties. 

When  a submission  is  not  approved,  NOA  may  send  a videotaped  copy  of  the  program- 
ming problem(s)  which  prevent(s)  the  submission  from  being  approved.  This  is  intended 
to  assist  the  licensee  in  analyzing  the  cause  of  the  software  problem.  It  is  the  licensee’s 
responsibility  to  send  a copy  of  this  tape  to  any  developer(s)  of  the  software.  NOA 
strongly  encourages  that  copies  be  sent  to  developer(s)  of  the  software  as  quickly  as 
possible. 

2.1  SPECIFICATION  SHEET  AND  CHECK  LIST 

The  appropriate  Software  Specification  sheet  and  the  Software  Submission 
checklist  must  be  filled  out  completely  and  must  be  correct  for  the  particular  pro- 
gram version. 

2.2  PROGRAM  ROMs 

One  (1)  set  of  the  game  ROM(s)  must  be  submitted  for  approval.  ROM  data  sub- 
mitted must  be  written  on  the  same  size  ROM(s)  which  are  intended  to  be  used  in 
production.  If  a submission  ROM  is  not  available  in  the  size  to  be  used,  the  next 
size  smaller  should  be  used  (i.e.,  a 3M  program  should  be  submitted  on  two  2M 
ROMs).  All  ROMs  submitted  must  be  of  the  same  manufacturer,  size,  and  part 
number.  A label  should  be  attached  to  each  master  ROM  which  lists  game  code, 
ROM  version,  and  ROM  number.  A copy  of  the  game  ROMs  submitted  should  be 
retained  by  the  licensee  for  reference,  as  NOA  cannot  return  originals  or  copies  of 
submitted  ROMs. 


1-2-1 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


2.3  EP-ROMs 

Submit  only  the  following  EP-ROM  types  for  approval. 

4M:  TOSHIBA  TC574000D,  SGS  THOMPSON  M27C4001 , 

HITACHI  HN27C4001,  MITSUBISHI  M5M27C401K, 

NEC  D27C4001 , Texas  Instruments  TMS27C040-JL, 
TMS27C040-JL4,  TMS27C040-JE,  TMS27C040-JE4, 

ATMEL  AT27C040-12C,  MACRONIX  MX27C4000DC-12 
8M:  ATMEL  AT27C080-10DC,  AT27C080-12DC,  NEC  D27C8001 

SGS  THOMPSON  M27C801-120F1 

Note:  All  ROMs  must  be  200ns  or  faster  for  Normal  Speed. 

All  ROMs  must  be  120ns  or  faster  for  High  Speed. 

2.4  ROM  DATA 

In  addition  to  the  EP-ROMs,  a copy  of  the  ROM  data  must  be  submitted  in  binary 
format  on  MS-DOS®  3.5  inch  disk(s).  The  size  of  the  file  must  be  equal  to  the  size 
of  the  EP-ROM  (i.e.,  one  4 Meg  EP-ROM  = one  4 Meg  file). 

2.5  GAME  PLAY  VIDEO  TAPE/RATING  CERTIFICATE 

A video  tape  containing  complete  game  play  is  required  unless  the  product  has 
been  rated  by  the  Entertainment  Software  Ratings  Board  (ESRB).  If  the  product 
has  been  rated  by  the  ESRB,  then  a copy  of  the  rating  certificate  must  accompany 
the  submission  and  no  video  tape  is  needed. 

2.6  SCREEN  TEXT 

A printed  copy  of  the  complete  screen  text  must  be  submitted. 

2.7  INSTRUCTION  MANUAL 

Complete  game  play  instructions  must  be  submitted. 

NOTE:  If  any  of  these  items  are  not  satisfied,  the  program  will  be  rejected 

and  will  not  be  submitted  into  the  approval  process  until  all  criteria 
are  met. 


1-2-2 


SNES  DEVELOPMENT  MANUAL 

I 


2.8  SOFTWARE  VERIFICATION 

The  following  verification  process  will  significantly  improve  the  probability  of  ap- 
proval of  your  software. 

1 . The  licensing  screen  on  all  submissions  should  state  “LICENSED  BY  NIN- 
TENDO”. 

2.  Confirm  the  Licensing  Screen  information  is  correct. 

3.  Check  the  spelling  on  the  Licensing  Screen  and  Title  Screen,  as  well  as  the 
spelling  and  grammar  in  the  screen  text. 

4.  Confirm  the  use  of  a ™,  circle  R (®),  or  circle  C (©)  where  applicable. 

5.  Run  a “Bypass”  Test  to  assure  that,  when  the  game  is  powered  up,  the 
Licensing  Screen  is  visible  for  at  least  one  second,  even  if  any  combination 
of  controller  buttons  are  pressed  repeatedly.  Also  “Power-up”  the  software 
repeatedly  to  assure  it  does  so  without  programming  failures. 

6.  Game  characters  should  be  moved  in  all  possible  directions  or  positions, 
regardless  of  whether  it  is  required  to  play  the  game  properly.  For  instance, 
if  the  game  does  not  require  going  to  a particular  area  to  complete  the 
game,  go  there  anyway  to  assure  there  are  no  programming  problems  in 
going  to  that  location. 

7.  The  software  should  be  paused  many  times  during  the  test,  as  this  often 
causes  programming  problems  to  surface. 

8.  All  testing  should  be  recorded  onto  a videotape,  making  it  easier  to  review 
programming  problems. 

9.  The  entire  attract  mode  (demo)  should  be  viewed  to  assure  there  are  no 
programming  problems. 

1 0.  Routines  designed  to  assist  the  programmer  or  developer  in  “debugging” 
the  software  should  be  removed  from  the  game  prior  to  submission.  This 
includes  routines  to  determine  hardware  type. 

11.  All  references  to  the  Super  Famicom,  Super  Famicom  logos,  or  Super 
Famicom  controllers  (with  multi-colored  buttons)  should  be  removed  or  re- 
vised to  represent  the  Super  NES. 

12.  All  games  for  use  with  the  Super  NES  Super  Scope  are  required  to  include 
a calibration  mode. 

1 3.  All  games  are  required  to  have  a pause  function  activated  by  the  “Start” 
key. 


1-2-3 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


[ 


2.8.1  LICENSEE  GAME  PLAY  VIDEO  TAPE  PASS/FAIL  GUIDELINES 

1 . The  licensee  game  play  video  tape  must  be  recorded  on  a VHS 
tape,  Standard  Play  speed  (SP)  for  clarity. 

2.  No  editing  of  the  tape  is  allowed. 

3.  If  more  than  one  tape  is  needed  to  show  the  entire  piece  of  soft- 
ware, then  when  a second  tape  begins  it  must  show  that  the  player 
is  in  the  exact  same  place  as  when  the  first  tape  left  off. 

4.  No  codes  or  “built-up”  characters  are  allowed. 

5.  All  levels  or  areas  must  be  completed,  in  succession. 

6.  Screen  text  must  have  correct  grammar  and  spelling. 

7.  No  deviations  from  NOA  Software  Standards  Policy  may  be  present. 

8.  The  entire  ending  credits  (if  any)  must  be  shown. 

2.8.2  LICENSING  SCREEN  INFORMATION  PASS/FAIL  GUIDELINES 

The  following  Licensing  information  should  be  included  for  all  software. 
This  can  be  displayed  on  one  (1)  or  two  (2)  screens. 

1 . Licensee’s  software  title. 

2.  Licensee’s  trademark  and  copyright  notice 

(©  1 9 Licensee’s  name  or  copyright  owner) 

3.  LICENSED  BY  NINTENDO 
I EXAMPLE: 

Tom’s  Golf™or® 

© 1992  ABC  Corporation 
LICENSED  BY  NINTENDO 

If  a blank  screen  appears  for  more  than  two  seconds  when  powered  up, 
Nintendo  suggests  placing  a message  or  graphic  on  the  screen  so  that 
consumers  do  not  think  their  game  is  inoperable  (e.g.,  --“Please  Wait”--).  If 
a blank  screen  appears  for  more  than  five  seconds  during  game  play,  a 
message  or  graphic  should  also  be  placed  on  the  screen. 

2.8.3  COMMON  PROBLEMS 

Some  possible  problems  that  may  prevent  approval  of  a piece  of  software 
include,  but  are  not  limited  to  the  following: 

1 . Lock  up  of  the  software. 

2.  Scrambled  blocks  or  characters  appear  on  the  screen. 

3.  The  software  won’t  pause. 

4.  Your  character  can  get  stuck  somewhere  with  no  possible  way  to 
get  out. 

5.  Scrambled  graphics  at  the  edges  of  the  screen  when  the  screen 
scrolls  in  any  direction. 

6.  Vowels  in  the  passwords  or  password  entry-system. 

7.  Colored  lines  at  the  top  or  bottom  of  the  screen. 

8.  Shifting  of  the  screen  in  any  direction  (other  than  normal  scrolling). 

9.  Inconsistent  scoring  methods. 


1-2-4 


SNES  DEVELOPMENT  MANUAL 


10.  Flashes  on  screen. 

1 1 . Small  flickering  lines  on  the  screen. 

12.  Hit  or  be  hit  by  an  enemy  but  no  damage  is  incurred. 

1 3.  Three  (3)  or  four  (4)  player  game  can  be  started  without  using  a four 
player  adapter. 

14.  Incorrect  Licensing  Screen;  “Licensed  by  Nintendo”  should  appear 
for  all  formats. 

15.  Violation  of  any  Programming  Cautions  in  the  product  Development 
Manual. 

16.  Use  of  the  Nintendo  logo  or  representations  of  Nintendo  products  in 
software  without  license  agreement. 

17.  The  use  of  the  term  Super  Nintendo  or  Nintendo  when  the  Super 
Nintendo  Entertainment  System  or  Nintendo  Entertainment  System 
is  the  intended  reference,  respectively. 

1 8.  Character  actions  are  inconsistent  (for  instance,  a character  that 
cannot  fly,  being  able  to  walk  off  the  edge  of  a platform  and  stand  in 
midair). 

19.  Referring  to  the  Nintendo  control  pad  by  an  unacceptable  term, 
such  as;  “joypad”,  “directional  control”,  etc. 

20.  Referring  to  the  Nintendo  Controller  by  an  unacceptable  term,  such 
as;  “joystick”,  etc. 

21 . Referring  to  the  Nintendo  game  pak  by  an  unacceptable  term,  such 
as;  “Game  Cassette”,  etc. 

22.  Note:  If  Licensor  approval  is  required,  please  assure  that  this  has 
been  finalized  before  the  software  submission  has  been  made. 

23.  Display  of  Super  Famicom  symbols  or  controllers  in  Super  NES 
games. 

2.8.4  A NOTE  ON  OBJECTIONABLE  MATERIAL 

A copy  of  the  Nintendo  “Game  Content  Guidelines”  is  included  in  book  2 of 
this  manual.  If  you  are  unsure  of  whether  an  item  of  text  or  element  of  a 
game  is  within  Nintendo  Software  Standards,  you  may  contact  our  Product 
Analysis  Department  early  in  the  development  process  and  they  will  go 
over  questionable  items  over  the  phone.  In  cases  concerning  an  extensive 
amount  of  text,  please  send  it  to  the  attention  of  NOA  Product  Testing  Su- 
pervisor, using  the  address  listed  in  the  Preface  of  this  manual,  with  the 
questionable  items  highlighted.  The  material  will  be  evaluated  and  you  will 
be  contacted  within  a week  to  ten  days. 


1-2-5 


SOFTWARE  SUBMISSION 
CHECK  LIST 


MACHINE  TYPE  EH  SNS  EH  VUE 


GAME  NAME 


COMPANY 


_ VUE DMG 


Evaluation 

Approval  Ver.  

Specification  Sheet 

1 Set  of  ROMs 

(These  must  be  specific  EP-ROM  type. 

See  Submission  Requirements.) 

MS-DOSa  3 1/2  Disk(s)  (Files  must  be  in  binary 
format.  See  Submission  Requirements  for 
specific  information.) 

1 copy  of  Custom  DSP  1C  if  applicable 
(Super  NES  Submissions  Only) 

1 Copy  of  VHS  Tapes  or  ESRB  Rating 
Certificate 

Screen  Text 

Instruction  Manual  or  Game  Play  Instructions 


NOTE:  This  check  list  must  be  included  with  the  software  submis- 

sion. If  any  of  these  items  are  not  satisfied,  the  program  will 
be  promptly  returned  and  will  not  be  submitted  into  the  ap- 
proval process  until  all  criteria  are  met. 


GAME  CODE  SNS 

VERSION  Q 

□ 

□ 

□ 

□ 

□ 

□ 

□ 

□ 

REMARKS 


1-2-6 


SNES  DEVELOPMENT  MANUAL 


THIS  PAGE  INTENTIONALLY 
LEFT  BLANK 


1-2-7 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


Super  NES  Software  Specification 


Game  Title 

Product  Code 

SNS  - 

Accessories 

|““|n  ! Cl  Super  Scope  QSuper  NES  Mouse 

|_|None  , QMu|tjp|ayer5  □other  ( ) 

Overseas 

Version 

□ NnlQYPs  Game  Title: 

i Country:  Release  Date: 

Company 

Department 

Contact  Name 

Address 

Tel:  Fax  No.: 

Submission 

Date 

/ / \ Method  of  Submission: 

M D Y ! HZlMail  □ByHand 

ROM  Registration  Data 


Data  Name 

Address 

Data 

Data  Name 

Address 

Data 

Maker  Code 

FFBOH 

H(‘-  ’) 

Came  Title 
Registration 

Ffcoh- 

FFD4H 

■ . . § 

FFB1H 

-H  (‘ 

Map  Mode 

FFD5H 

H 

FFB2H 

H (‘ 

Cartridge  Type 

FFD6H 

H 

Game  Code 

FFB3H 

H (‘ 

ROM  Size 

FFD7H 

H 

FFB4H 

H (‘  ’) 

RAM  Size 

FFD8H 

H 

FFB5H 

— H (' 

Destination 

Code 

FFD9H 

H 

1 mBxm  I Miff  1 

nOvata  l 

FFPAH^ 

Expansion 
RAM  Size 

FFBDH 

H 

Mask  ROM  Ver. 

FFDBH 

H 

Complement 

Check 

L 

FFDCH 

H 

Special  Version 

FFBEH 

H 

H 

FFDDH 

H 

Cartridge  1 ype 
(Sub-number) 

FFBFH 

H 

— 

Check  Sum 

L 

FFDEH 

H 

H 

FFDFH 

H 

* Write  equivalent  letter  in  parenthesis  “( )”. 


Game  Title  Registration 

01  23456789ABCDEF 


Game  Name 

FFCO 

Code  (ASCII) 

j 

\ 

i 

Mill 

FFDO 

Game  Name 
Code  (ASCII) 

T 

— 

— j— 

— 

* Use  code  20  (H)  to  fill  space  and  unused  area. 


(Continued  on  reverse  side) 


Addendum  1 


1-2-8 


SNES  DEVELOPMENT  MANUAL 


ROM  Version 


Mask  ROM 

□ o Di  D2  □ 3 □. 

EP-ROM 

□ o □ 1 Q2  Q3  []4  Q5  □_  Q E (Interim) 

Memory  Configuration 


ROM 

Size:  MBit 

High  Speed  Required?  □ Yes  □ No 

RAM 

□ No 

□ Yes 

Size:  Bit 

Battery  Back  Up?  □ No  □ Yes 

External 

Co- 

processor 

□ None  □ DSP  (DSP ) 

□ Super  FX  (Expansion  RAM  Bit) 

Data  back-up:  □ Yes  □ No 

□ Super  FX2  (Expansion  RAM  Bit) 

Data  back-up:  □ Yes  □ No 

□ SA-1  Internal  RAM  Data  Back-up: 

□ Yes  ONo 

□ Other: 

Check  Sums 


EP-ROM 

MBits  x Pcs  x 1 Set 

Configuration 

Manufacturer: 

— — — — 

T Model  No.: 

ROMO 

H 

ROM  4 

H 

ROM  1 

H 

ROM  5 

H 

ROM  2 

H 

ROM  6 

H 

ROM  3 

H 

ROM  7 

H 

Total 



H 

Affix  a label  to  master  ROM  which  contains  product  Game  Code,  ROM  Version, 
and  ROM  Number.  Total  check  sum  must  be  written  even  though  disk  media  is  used. 

File  Names 


Floppy  Disk 
Configuration 

3.5”  □DSHD  □ HD  Pcs  x 1 Set 

File  Name 

HEX  Code 

File  Name 

HEX  Code 

FILEO 

H 

FILE  1 

H 

FILE  2 

H 

FILE  3 

H 

FILE  4 

H 

FILE  5 

H 

FILE  6 

H 

FILE  7 

H 

Special  Programming 


Special  Programming? 


□ Yes  ( 


No 


Remarks: 


1-2-9 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


Instructions  for  Super  NES  Software  Specification 

1 . Game  Title,  Product  Code,  Scheduled  Release  Date,  Accessories,  Overseas 

Version,  Company,  Contact,  Address,  Telephone  No.,  Fax  No.,  submission 

date  and  method. 

• Product  Code  (4  digits)  will  be  determined  by  Nintendo. 

• Scheduled  release  date  should  be  entered. 

• Game  Title  includes  sub-title  if  any. 

• Indicate  accessories  other  than  standard  controller  which  can  be  used. 

• If  the  product  has  been  sold,  or  is  to  be  sold  in  another  country;  write  the  game 
title,  country,  and  the  scheduled  release  date  in  that  country. 

• Company,  Contact,  Address,  Telephone  No.,  Fax  No.  must  be  completed. 

• Submission  date  and  method  of  submission  should  be  entered. 

2.  ROM  Registration  Data 

• Write  the  contents  registered  in  the  indicated  addresses  of  the  master  ROM. 
Refer  to  “Description  of  ROM  Registration  Data  Specification”  for  details.  En- 
ter ASCII  characters  in  areas  marked  with  parenthesis  “( )”. 

3.  Game  Title  Registration 

• Enter  the  game  title  registered  in  the  master  ROM  using  ASCII  characters  and 
their  ASCII  codes.  Refer  to  “Character  Code  List  for  Game  Title  Registration”. 


1-2-10 


SNES  DEVELOPMENT  MANUAL 


4.  ROM  Version 

• Mask  ROM  Version 

The  Mask  ROM  Version  number  starts  from  0 and  increases  for  each  revised 
version  sent  for  changes  after  starting  production. 

• EP-ROM  Version 

The  EP-ROM  Version  number  starts  from  0 and  increases  for  each  revised 
version  sent  for  approval. 

• Example 


First 

Second 

Third 

=> 

Change  after 
first  production 

Fourth 

Fifth 

Mask  ROM 
Version 

0 

0 

0 

1 

1 

EPROM 

Version 

0 

1 

2 

0 

1 

Version  on  Title 
Label  of  ROM 

0.0 

0.1 

0.2 

1.0 

1.1 

tr 

First  Production 


=> 

Change  after 
second  production 

Sixth 

Seventh 

■ 

■ 

2 

2 

0 

1 

■ 

2.0 

2.1 

It  It 


Second  Production  Third  Production 

5.  Memory  Configuration 

• Enter  the  memory  configuration  of  the  product. 

• Enter  ROM  size  and  whether  or  not  High  Speed  Mode  (3.58MHz  operation)  is 
required. 

• RAM 

If  RAM  is  used,  enter  memory  size  and  indicate  whether  or  not  Battery  Back- 
up is  used. 

• External  Co-processor 

If  an  external  co-processor  is  used  (i.e.,  DSP1 , Super  FX),  select  the  configu- 
ration used. 


1-2-11 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


[ 


6.  Check  Sums 

• Enter  the  check  sum  of  each  ROM  submitted.  To  calculate  the  check  sum,  add 
each  byte  in  the  ROM  data.  The  lower  2 bytes  of  the  resulting  value  is  the 
check  sum.  Enter  the  check  sum  for  each  ROM  submitted  for  the  master  pro- 
gram and  the  total  of  their  individual  check  sums.  The  total  is  calculated  by 
simply  adding  the  individual  check  sums.  This  method  of  calculation  is  differ- 
ent from  the  check  sum  on  the  ROM  Registration  Specification. 

7.  File  Names 

• Write  the  file  name  of  each  disk  using  the  following  conventions. 

XXXX  XX-X.SFC 

"I- Disk  Number 

1 ROM  Version 

' Game  Code  (4  digits  of  Product  Code) 


For  example, 

If  the  Game  Code  is  AAAE,  ROM  version  is  0.1 , and  ROM  size  is  8M;  the  first 
disk  (Disk  1 of  1)  should  be  named:  “AAAE01-0.SFC”  (8M  file). 

If,  on  the  other  hand,  the  Game  Code  is  MW,  ROM  version  is  1 .0,  and  ROM 
size  is  20M; 

1st  Disk  (1  of  3)  = “MW_E10-0.SFC”  (8M  file) 

2nd  Disk  (2  of  3)  = “MW_E10-1  .SFC”  (8M  file) 

3rd  Disk  (3  of  3)  = “MW_E10-2.SFC”  (4M  file) 

Note  that  when  the  Game  Code  only  uses  2 digits,  a bar  is  inserted  in  the 
3rd  digit’s  place  and  the  destination  code  is  inserted  in  the  4th  digit’s  place. 

8.  Special  Programming 

• If  special  programming  is  implemented,  such  as  for  the  purposes  of  copyright 
protection,  it  should  be  indicated.  Also,  the  contents  of  the  special  program- 
ming must  be  explained  in  writing. 

Note:  When  more  than  one  ROM  is  required  for  the  game  program,  all  ROMs 
submitted  as  a set  should  be  the  same  part  number. 

9.  Remarks 

• If  a special  configuration  of  game  pak  is  used,  please  note  the  special  configu- 
ration here.  Write  the  name  of  the  evaluation  board  which  was  used  for  debug- 
ging the  game.  Please  write  the  full  name  as  printed  on  the  board.  For 
example, 

SHVC-4PV5B-10 

• If  several  boards  were  used  for  debugging  the  game,  all  boards  must  be  listed. 


1-2-12 


Character  Code  List  for  Game  Title  Registration 


Note  1 : Do  not  use  characters  in  shaded  areas. 

Note  2:  “SP”  means  space. 


Exanple:  If  ASCII  character  is  A,  ASCII  code  is  41 . 


1-2-13 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


ROM  Registration  Data  Specification 

1 . Insert  the  game  title  and  Super  NES  game  specification  at  the  specified  address- 
es in  the  ROM. 

2.  The  ROM  Registration  Data  area  is  48  bytes  from  address  00:FFB0H  ~ 00:FFDFH 
in  Super  NES  Memory. 

3.  The  address  in  ROM  for  registration  data,  using  Map  Mode  20,  is  007FB0H  ~ 
007FDFH. 

4.  The  address  in  ROM  for  registration  data,  using  Map  Mode  21 , is  00FFB0H  ~ 
00FFDFH. 

5.  The  address  in  ROM  for  registration  data,  using  Map  Mode  23  (SA-1 ),  is  007FB0H 
~ 007FDFH. 

6.  The  address  in  ROM  for  registration  data,  using  Map  Mode  25,  is  40FFB0H  - 
40FFDFH. 

7.  ROM  registration  data  should  be  stored  using  the  format  below. 


Bank  00 

FFBOH 

FFCOH 

FFDOH 


Cartridge  Sub-number  (Normally  00H) 
Special  Version  (Normally  00H)  — ] 
Expansion  RAM  Size  — 


Maker  Code 

— Game  Code 
4 5 6 7 8 


1 2 3 


9 A B C D E F 


— ? 

1 f 1 

00 

00 

00 

00 

00 

00 

°°l 

□ 

1 

i "i  1 i i 

( 

Bar 

ne ' 

ritle 

1 \ 1 1 
Game  Title 

L 

c 

□ 

□ 

33 

□ 

□ 

li 

□ 

Map  Mode — I 
Cartridge  Type  • 

ROM  Size 

RAM  Size  ■ 


Destination  Code  — 
Mask  ROM  Version - 


1 — 1 — Check  Sum 
-Complement  Check 


8.  The  following  data  will  be  stored  in  Super  NES  Memory  for  every  Super  NES 
game. 

00:FFB6H  ~ 00:FFBCH  = 00H 
00:FFDAH  = 33H 


Addendum  1 


1-2-14 


SNES  DEVELOPMENT  MANUAL 


Description  of  ROM  Registration  Data  Specification 

1 . Maker  Code  (FFBOH,  FFB1 H) 

Enter  the  2-digit  ASCII  code  assigned  by  Nintendo.  Refer  to  the  Nintendo/ 
Licensee  contract,  if  in  doubt.  All  letters  must  be  in  upper  case. 

For  example; 

If  Maker  Code  is  01 , the  ASCII  code  for  0 (30H)  is  stored  at  FFBOH  and  the 
ASCII  code  for  1 (31 H)  is  stored  at  FFB1 H. 

If  Maker  Code  is  FF,  the  ASCII  code  for  F (46H)  is  stored  at  FFBOH  and 
FFB1H. 

2.  Game  Code  (FFB2H  ~ FFB5H) 

Enter  the  4-digit  Game  Code  assigned  by  Nintendo  in  ASCII.  All  letters  must  be  in 
upper  case. 

For  Example; 

If  Game  Code  is  “SMWJ”,  the  following  ASCII  codes  will  be  entered  at  the  indi- 
cated addresses. 

53H  (S)  =>  FFB2H 
4DH  (M)  =>  FFB3H 
57H  (W)  =>  FFB4H 
4AH  (J)  =>  FFB5H 

If  a game  program  which  was  previously  assigned  a 2-digit  Game  Code  is  to  be 
manufactured  again,  the  original  2-digit  code  will  be  entered  followed  by  2 
“Space"  codes.  The  ROM  submission  sheet  should  be  completed  in  the  same 
manner. 

For  example; 

If  Game  Code  is  “MW”,  the  following  ASCII  codes  will  be  entered  at  the  indi- 
cated addresses. 

4DH  (M)  =>  FFB2H 
57H  (W)  =>  FFB3H 
20H  (space)  =>  FFB4H 
20H  (space)  =>  FFB5H 

3.  Fixed  Value  (FFB6H  ~ FFBCH) 

Store  fixed  value  00H  at  addresses  FFB6H  ~ FFBCH. 


1-2-15 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


4.  Expansion  RAM  Size  (FFBDH) 

Enter  the  size  of  the  expansion  RAM  installed  in  the  game  pak  using  the  table  be- 
low. If  the  size  used  is  not  listed  below,  choose  the  next  larger  size  which  is  listed. 

For  example,  enter  the  size  of  the  RAM  used  for  Super  FX  co-processor.  If  no  ex- 
pansion RAM  is  installed,  enter  00H  at  address  FFBDH. 

For  game  paks  which  use  the  SA-1 , enter  00H  at  address  FFBDH.  Enter  the  size 
of  the  RAM  used  as  BW-RAM  at  address  FFD8H. 


FFBDH 

Size  of  Expansion  RAM 

00H 

None 

01 H 

16  KBit 

03H 

64  KBit 

05H 

256  KBit 

06H 

512  KBit 

07H 

1 MBit 

5.  Special  Version  (FFBEH) 

This  is  only  used  under  special  circumstances,  such  as  for  a promotional  event. 
The  code  00H  should  be  entered  under  normal  circumstances. 

6.  Cartridge  Type  Sub-Number  (FFBFH) 

This  is  only  assigned  when  it  is  necessary  to  distinguish  between  games  which 
use  the  same  cartridge  type.  The  code  00H  is  normally  assigned. 

7.  Game  Title  (FFCOH  - FFD4H) 

Enter  the  game  title  using  ASCII  code  (JIS  8 bit).  Refer  to  “Character  Code  List  for 
Game  Title  Registration”  for  characters  which  may  be  used.  The  code  “20H” 
should  be  used  for  a space  and  for  all  unused  areas.  The  game  title  registered 
should  be  close  to  the  title  under  which  the  game  will  be  marketed,  not  a tempo- 
rary name  used  for  development  purposes. 


1-2-16 


SNES  DEVELOPMENT  MANUAL 


8.  Map  Mode  (FFD5H) 

This  location  is  used  to  store  the  map  mode  and  the  speed  of  operation  for  the 
Super  NES  CPU.  Select  the  appropriate  code  from  the  table  below. 


FFD5H 

Map  Mode 

Super  NES  CPU  Clock 

20H 

Mode  20 

2.68  MHz  (normal  speed) 

21H 

Mode  21 

2.68  MHz  (normal  speed) 

22H 

Reserved-Future  Use 

23H 

Mode  23  (SA-1) 

2.68  MHz  (normal  speed) 

25H 

Mode  25 

2.68  MHz  (normal  speed) 

30H 

Mode  20 

3.58  MHz  (high  speed) 

31 H 

Mode  21 

3.58  MHz  (high  speed) 

35  H 

Mode  25 

3.58  MHz  (high  speed) 

1-2-17 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


9.  Cartridge  Type  (FFD6H) 

Indicate  the  game  pak  (cartridge)  configuration.  Use  one  of  the  tables  below,  de- 
pending upon  whether  or  not  a co-processor  is  used. 

Without  Co-processor 


FFD6H 

Game  Pak  (Cartridge)  Configuration 

00H 

ROM  Only 

01 H 

ROM  + RAM 

02H 

ROM  + RAM  + Battery 

With  Co-processor 


FFD6H 

Game  Pak  (Cartridge)  Configuration 

Upper 

Lower 

0*H 

- 

Co-processor  = DSP 

1*H 

- 

Co-processor  = Super  FX 

2*H 

- 

Co-processor  = OBC1 

3*H 

- 

Co-processor  = SA-1 

E*H 

Co-processor  = Other 

F*H 

- 

Co-processor  = Custom  Chip 

- 

*3H 

ROM  + Co-processor 

- 

*4H 

ROM  + Co-processor  + RAM 

- 

*5H 

ROM  + Co-processor  + RAM  + Battery 

- 

*6H 

ROM  + Co-processor  + Battery 

For  example; 

If  a game  pak  uses  the  Super  FX  as  its  co-processor  and  contains  a 256K  Ex- 
pansion RAM  as  game  pak  RAM  for  battery  backup,  store  15H  at  address 
FFD6H.  In  this  case  05H  would  be  stored  at  address  FFBDH  and  00H  would 
be  stored  at  address  FFD8H. 

If  a game  pak  uses  a DSP  as  its  co-processor  and  no  RAM,  store  03H  at  ad- 
dress FFD6H.  In  this  case  00H  would  be  stored  at  addresses  FFBDH  and 
FFD8H. 


1-2-18 


SNES  DEVELOPMENT  MANUAL 


If  a game  pak  uses  the  SA-1  as  its  co-processor  with  64K  SRAM  and  battery, 
store  35H  at  address  FFD6H.  In  this  case,  00H  would  be  stored  at  address 
FFBDH  and  03H  at  address  FFD8H. 


10.  ROM  Size  (FFD7H) 

The  program  ROM  size  is  stored  at  this  address.  Select  the  appropriate  code  from 
the  table  below. 


FFD7H 

ROM  Size 

09H 

3 ~ 4M  Bit 

OAH 

5 ~ 8M  Bit 

OBH 

9 ~ 16  MBit 

OCH 

17  ~ 32M  Bit 

ODH 

33  ~ 64 M Bit 

11.  RAM  Size  (FFD8H) 

The  CPU  RAM  size  is  stored  at  this  address.  Select  the  appropriate  code  from  the 
table  below.  If  CPU  RAM  is  not  installed  in  a game  pak,  store  00H  at  address 
FFD8H.  If  only  expansion  RAM  (game  pak  RAM)  is  installed,  such  as  the  one 
used  with  the  Super  FX  co-processor,  00H  is  also  stored  at  address  FFD8H.  The 
BW-RAM  size  for  an  SA-1  game  pak  should  be  stored  at  this  address. 


FFD8H 

RAM  Size 

00H 

No  RAM 

01 H 

16K  Bit 

03H 

64K  Bit 

05H 

256K  Bit 

06H 

51 2K  Bit 

07H 

1MBit 

For  example; 

If  a game  pak  does  not  contain  a co-processor  and  uses  a 64K  RAM  for  bat- 
tery backup,  store  03H  at  address  FFD8H.  In  this  case  00H  is  stored  at  ad- 
dress FFBDH  and  02H  is  stored  at  address  FFD6H. 


1-2-19 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


If  a game  pak  uses  the  Super  FX  as  its  co-processor  and  contains  a 256K  Ex- 
pansion RAM  as  game  pak  RAM  for  battery  backup,  store  00H  at  address 
FFD8H.  In  this  case  05H  is  stored  at  address  FFBDH  and  15H  is  stored  at  ad- 
dress FFD6H. 

12.  Destination  Code  (FFD9H) 

Store  the  code,  from  the  table  below,  which  best  describes  where  the  product  will 
be  sold. 


FFD9H 

Destination 

(Language) 

ROM  Recognition  Code 
(Fourth  digit  of  Game  Code) 

00H 

Japan 

J 

01H 

North  America 
(USA  and  Canada) 

E 

02H 

All  of  Europe 

P 

03H 

Scandinavia 

W 

06H 

Europe  (French  only) 

F 

07H 

Dutch 

H 

08H 

Spanish 

S 

09H 

German 

D 

OAH 

Italian 

1 

OBH 

Chinese 

C 

ODH 

Korean 

K 

OEH 

Common 

A 

OFH 

Canada 

N 

10H 

Brazil 

B 

Nintendo 

Gateway 

System 

G 

11 H 

Australia 

U 

12H 

Other  Variation 

X 

13H 

Other  Variation 

Y 

14H 

Other  Variation 

Z 

1-2-20 


SNES  DEVELOPMENT  MANUAL 


[ 


13.  Fixed  Value  (FFDAH) 

Store  fixed  value  33H  at  address  FFDAH. 

14.  Mask  ROM  Version  (FFDBH) 

Store  the  version  number  of  the  mask  ROM  released  to  the  market  as  a product. 
The  number  begins  with  0 at  production  and  increases  with  each  revised  version. 

15.  Complement  Check  (FFDCH,  FFDDH) 

Store  the  1 ’s  complement  of  the  lower  2 bytes  of  the  program  check  sum  in  the  or- 
der of;  FFDCH,  lower  and  FFDDH,  upper.  Refer  to  “Check  Sum”,  below,  for  calcu- 
lation of  the  check  sum. 

(FFDEH.  FFDFH)  + (FFDCH.  FFDDH)  = FFFFH 
Check  Sum  Complement  Check 

16.  Check  Sum  (FFDEH,  FFDFH) 

First,  store  OFFH  into  the  complement  check  area  (FFDCH,  FFDDH)  and  00H  into 
the  check  sum  area  (FFDEH,  FFDFH).  Then  add  each  byte  in  the  ROM  data.  If 
ROM  size  cannot  be  expressed  evenly  in  2nM  bit,  such  as  10M  or  20M  bit,  add 
the  remainder  until  a total  of  2nM  bit  is  reached. 

For  example,  If  the  program  contains  12M  bit,  perform  the  calculation  as  if  it  were 
1 6M  bit  as  shown  below. 


Remainder 

First  8M  bit  (23M  bit) 

Last  4Mbit  7 ' 

1 T reat  as  2-4M  bit  1 

12Mbit  [ 

16M  bit  (24M  bit) 


(Total  of  first  8M  bit)  + [(Total  of  last  4M  bit)  x2]  = Check  Sum 

For  10M  bit,  perfrom  the  calculation  as  if  it  were  16M  bit. 

(Total  of  first  8M  bit)  + [(Total  of  last  2M  bit)  x4]  = Check  Sum 

For  20M  bit,  perform  the  calculation  as  if  it  were  32M  bit. 

(Total  of  first  16M  bit)  + [(Total  of  last  4M  bit)  x4]  = Check  Sum 

For  24M  bit,  perform  the  calculation  as  if  it  were  32M  bit. 

(Total  of  first  16M  bit)  + [(Total  of  last  8M  bit)  x2]  = Check  Sum 

Next,  store  the  lower  2 bytes  of  the  check  sum  value  into  the  check  sum  area  (FF- 
DEH, FFDFH).  FFDEH  will  contain  the  lower  byte  and  FFDFH  will  contain  the  up- 
per byte. 

Then,  store  the  lower  2 bytes  of  the  complement  check  in  registers  FFDCH  and 
FFDDH. 


1-2-21 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


Data  Storage  on  Floppy  Disk 

1 . Use  3.5”  DSHD  or  HD  diskettes  in  MS-DOS  IBM  format. 

2.  File  data  must  be  in  ROM  image  binary  format  and  not  compressed.  The  maxi- 
mum data  size  on  a disk  is  8M  bit.  If  the  program  being  submitted  is  larger  than 
8M  bit,  the  program  should  be  divided  and  recorded  on  multiple  disks.  The  last 
disk  must  be  written  to  use  the  full  8M  bit. 

3.  The  file  name  for  the  disk  is  determined  as  follows; 


XXXX  XX-X.SFC 

Disk  Number 

1 ROM  Version 

' Game  Code  (4  digits  of  Product  Code) 


for  example,  “AAAJ01-0.SFC”. 

4.  A seal  must  be  affixed  to  each  disk  to  specify  company  name,  game  title,  game 
code,  ROM  version,  date,  and  disk  number. 

5.  For  SA-1  games,  don’t  split  data  by  even  and  odd  addresses. 


1-2-22 


SNES  DEVELOPMENT  MANUAL 


Super  NES  Cartridge  PCB  List 


Production  PCB  List*1 


V,  ■ 

22536 

SHVC-1A0N 

1 M/2M/4M/8M 

None 

22537 

SHVC-1A1B 

1 M/2M/4M/8M 

16K 

Batt. 

22538 

SHVC-1A3B 

1M/2M/4M/8M 

64K 

Batt. 

22539 

SHVC-1A5B 

1 M/2M/4M/8M 

256K 

Batt. 

22540 

SHVC-1B0N 

1 M/2M/4M/8M 

None 

DSP1 

24468 

SHVC-1B5B 

1 M/2M/4M/8M 

256K 

Evaluation  PCB  List*2 


* rSif Jl 

, fV  < : 

sis bSiiii 

RAM 

22427 

SHVC-2P3B 

1 M/2M/4M/8M 

None/64K 

Battery  & 
64K  SRAM 

21945 

SHVC-1P0N 

1 M/2M/4M 

None 

24470 

SHVC-2Q5B 

1M/2M/4M/8M 

None/64K/256K 

Battery*45 

25474 

SHVC-4PV5B 

4M/8M/12M/16M 

None/1 6K/64K/ 
256K 

Battery*5 

33366 

SHVC-4PV7B 

4M/8M/1 2M/1 6M/24M*7 

None/51 2K/1M 

Battery  & 
1M  SRAM 

28626 

SHVC-8PV5B 

4M  ~ 32M  or 
4M  - 64M 

None/1 6K/64K/ 
256K 

Battery*5 

26011 

SHVC-2QW5B 

4M/8M/1 2 M/1 6M 

None/64K/256K 

Battery*45 

28625 

SHVC-1 RA3B6S 

4M  or8M 

64K  or  51 2K*6 

Battery  & 
GSU1 

28760 

SHVC-4QW5B 

1 M - 32M 

None/64K/256K 

Battery*45 

2241 0*3 

SHVC-Multi  Checker 

1 M/2M/4M/8M/1 6M 

None/256K/1M 

Battery  & 
256K  SRAM 

32321 

SHVC-8X7B 

4M  - 32M 

None/51 2K/1M 

Battery  & 
1M  SRAM 

Notes: 

1)  Mask-ROM  should  be  used  on  a Production  PCB.  Production  PCBs  listed 
above  are  bare  boards. 

2)  EP-ROM  should  be  used  on  an  Evaluation  PCB.  Evaluation  PCBs  listed 
above  are  assemblies. 

3)  SHVC  Multi  Checker  must  only  be  used  with  SHVC  (Japanese  Super  NES)  in 
order  to  evaluate  SNS  software. 

4)  DSP1  must  be  purchased  separately. 

5)  Static  RAM(S-RAM)  must  be  purchased  separately. 

6)  The  51 2K  SRAM  used  with  GSU  may  be  configured  for  battery  back-up  RAM 

7)  24M  requires  change  of  PLD. 


1-2-23 


21.3  GAME  PAK  PCB  MEMORY  MAPPING 

The  following  memory  maps  are  provided  for  reference.  Only  the  most  commonly  used  memory  maps  have  been  in- 
cluded. For  information  regarding  memory  maps  which  are  not  shown  here,  contact  NOA’s  Licensee  Support  Group 
at  (206)  861-2715. 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


1-2-24 


Figure  2-21-2  SHVC-4PV5B  PCB  MEMORY  MAP  Mode  20  (4M  x 4 pcs),  Mode  21  (4M  x 4 pcs) 

PCB  Configuration  Mapping  Usable  EPROMs  ROM  Size  Usable  RAM 

20  or  21  4M/8M*1  4/8/1 2/1  6M(8/16/24Mm)  None/1 6K/64K/256K 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


1-2-26 


The  shaded  area  indicates  RAM 
area.  Dotted  area  is  RAM  image. 


1-2-27 


1 ■ 1 I I ■ i . i . I . I | | I | wwi  | l , , , , nenr>  6000H 

The  ROM  image  in  address  8000H  - FFFFH  of  bank  COH  - FFH  is  generated  in  bank  00H  ~ 3FH  and  80H  - BFH.  (256K) 

This  memory  map  is  used  with  eight  4 Mbit  EPROMs.  The  shaded  area  indicates  RAM 

area.  Dotted  area  is  RAM  image. 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


1-2-28 


Figure  2-21-5  SHVC-2Q5B  PCB  MEMORY  MAP  Mode  20  (4M  x 1 pcs) 

PCB  Configuration  Mapping  Usable  EPROMs  ROM  Size  Usable  RAM  Auxiliary  Device 

20  1 M/2M/4M  1/2/4/5/6/8M  None/64K/256K  DSP 


SNES  DEVELOPMENT  MANUAL 


* 

z 

< 

CO 

CQQXLucncn 

LL  o O 

LL  O O 

LL  O O 

LL  00  O 

o 

o 

LL 

O 

O 

LL 

j 

"o" 

eg 

LL 

eg 

o 

CO 

LL 

CO 

111 

o 

LL 

o 

in 

LL 

in 

o 

CD 

LL 

CD 

S 

LL 

h- 

SjSEj 

O 

CO 

LL 

<30 

R 

0 
M 

1 

Image 

O 

03 

LL 

03 

R 

O 

M 

2 

Image 

O 

< 

LL 

<_ 

O 

m 

LL 

m 

D 

S 

P 

Image 

o 

O 

LL 

o 

o 

a 

LL 

Q 

o 

LL 

LL 

IL 

Iff  fo 

R 

A 

M 

Image 

<13  03 
•OTP 

EE 

■OT3 

, Q3  03 

- 03  03 

- CL  CL 
> 0 0 
--C  -C 

- 03  03 

5 ^ 

i 03  03 


CO  CO 
CO  CO 

03  <13 
<0  <0 
3 O 


3-0 


-^LLLL 

Scpiir 

-°oo 

o 

^ C C 
CO  C$5 

tr-o 

<0g.E 

C 

>,«  « 
^0  0 
Cl£- 
— QlQ- 

CO  to  (0 
0 0 0 
0 03^3 


i Q.5 

)CD< 


0 

CL 

c n 

Q 


0 
C -O 
0r 

■O  o 

0 0 

£o 

H-x 

tit 

x^ 

0 1 

o° 

R o 

O o 
<oO 


0 


LL  w 
«« 
-*  0 
£-o 
0 _ 
f € 
os 

£ o 

LL  X 

CD  n 
* LL 
Iffi 

si 


0 


0 
-o  2 
■o-o 

0 X3 
C CO 

'©.E 

^T3 

C B 

b 0 


0 — 
-C  LL 
I-  CO 


°°o 
0 o 
8® 
-o  W 
-O  0 

c -O 

• ; 

03.E 

g*0 

C 0 

0 2 

Is 

^ 03 

K « 


0 

0 

1 
o 
o 
o 
S° 

X 

o 

o 

o 

O 

0 

0 

D 

0 

o 


°c 

■gsE 

alt 

i-  05  LL 
O C i . 
0 X LL 
03^  ObL 

0 B O t 

C 0 O O 
- 0 00  LL 
0 CKT3 
■C  0 C C 
f—  030  0 


X 

o 

o 

o 

o 


i — i 
* 

* 

tj- 

1 1 

* 

* 

CD 

in 

eg 

CO 

CD 

in 

c\j 

CO 

< 

X 

-O 

0 

03 

0 

c 


1-2-29 


8000H  read  from  and  write  to  DSP. 


Figure  2-21-6  SHVC-2QW5B  PCB  MEMORY  MAP  Mode  20  (4M  x 2 pcs) 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


Auxiliary  Device 

DSP 

CO 

in 

cvj 

< 

DC 

CD 

0 

X) 

CO 

S 

CD 

0) 

zr 

Z> 

0 

c 

o 

2 

0 

N 

s 

CO 

CD 

00 

o 

DC 

if) 

o 

DC 

0. 

00 

LU 

0 

-Q 

0 

if) 

Z> 

O) 

c 

cm 

■q. 

X— 

CL 

o 

0 

o 

CM 

c 

o 

0 

X- 

3 

O) 

*♦— ■ 
c 

o 

O 

CO 

o 

CL 

z 

< 

CD 

<QQCDiJ(/3C0 

Tl  o o 

LL  o o 

LL  o o 

LL  00  O 

O 

O 

LL 

O 

o 

Li- 

"o 

C\J 

LL 

C\J 

O 

00 

LL 

CO 

O 

TI- 

LL 

Tf 

o 

ID 

LL 

IT) 

O 

CD 

LL 

CO 

ccce- 

> 

O 

h- 

LL 

h- 

7D 

■ 

O 

CD 

Li- 

00 

R 

0 

M 

1 

Image 

O 

CD 

LL 

CD 

R 

0 

M 

2 

Image 

O 

< 

LL 

< 

— i 
D 
S 
P 

Image 

O 

CD 

Li- 

CQ 

m 

■HI 

O 

O 

Li_ 

o 

DF  DO 

0 

CD 

OCOCL  0__ 

EF  EO 

Iff  fo 

0 

X<^  0 

■o 

o 

CD 


o 


P <D  J 

C ^ H 

TJ  O 
CD  C 
CD  C . 
CL-O 
cd  <d 
jz  © 


C CD 

m 2 ' 
© C; 
© CO  I 

_cd  a), 
i co 

(D  CD. 

oS 

c Z3 

ft. 

5 ° 

-Q  T> 

O' D 
LU  -Q 
■on: 

m *-L 

C0  , 

fee. 

c§i 

CO  © 

JO  ■© 

c c 

CO  ©I 

© 2l 

a. 

CL  Q- 

co  © 


I.i 

cl: 

co< 

QC 


1 
o 
o 
o 
O 

CD 

CD  LL 

2?  CD 

32  c 
© CO 
c-Q 

■®.E 

©’■o 

© ® 

--  2 

CD  CD 

2 c 

ss 


: u_ 
- co 


o 

X 

LL 

Li_ 


X 

o 


■O  CD 
0-* 


© r- 

o>.£ 
P ■© 

--  3 
© 2 
co  © 
T3  c 
CD 

© O) 

i=  « 


■tr 

o 

CL 

CO 

©CL 

-pOO 

82 

oo  cd 

X‘1 
o $ 

§ c 
O § 

© p 

© 5 

D £ 

© "O 
o © 
© 


15 

x£ 

O c 

•self 

P CD  *0 
^ CD-,- 

% sE 
sSit 

X.  03  LL 
OP  { . 

Is  8^ 

c cooo 

•-  ©00UL 
CD  COU 
JO  0 c c 
I-  0)0  0 


1-2-30 


Enlarged  RAM  Area  Enlarged  DSP  Area 


Figure  2-21-7  SHVC-2QW5B  PCB  MEMORY  MAP  Mode  20  (8M  x 2 pcs) 

PCB  Configuration  Mapping  Usable  EPROMs  ROM  Size  Usable  RAM  Auxiliary  Device 

20  or  21  4M/8M  4/8/1 6M  None/1 6K/64K/256K  DSP 


SNES  DEVELOPMENT  MANUAL 


1-2-31 


1 — 1 ■ 0000H  | I 1 0000H  read  from  and  write  to 

Enlarged  RAM  Area  ' Enlarged  DSP  Area 


Figure  2-21-8  SHVC-2QW5B  PCB  MEMORY  MAP  Mode  21  (4M  x 2 pcs) 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


1-2-32 


Figure  2-21-9  SHVC-4QW5B  PCB  MEMORY  MAP  Mode  20  (4M  x 2 pcs)  ROM  Size  is  8M  or  Less 

PCB  Configuration  Mapping  Usable  EPROMs  ROM  Size  Usable  RAM  Auxiliary  Device 

20  or  21  1 M/2M/4M/8M  1/2/4/6/8/12/  None/1 6K/64K/256K  DSP 

1 6/24/32M 


SNES  DEVELOPMENT  MANUAL 


1-2-33 


Enlarged  RAM  Area  ' Enlarged  DSP  Area 


Figure  2-21-10  SHVC-4QW5B  PCB  MEMORY  MAP  Mode  20  (4M  x 4 pcs)  ROM  Size  is  1 2M  or  Greater 

PCB  Configuration  Mapping  Usable  EPROMs  ROM  Size  Usable  RAM  Auxiliary  Device 

20  or  21  1 M/2M/4M/8M  1/2/4/6/8/12/  None/1 6K/64K/256K  DSP 

1 6/24/32M 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


1-2-34 


i 0000H  Note:  Use  4000H/OOOOH  for  a port  to 

Enlarged  RAM  Area  [ 1 1 1 0000H  read  from  and  write  to  DSP. 


Figure  2-21-1 1 SHVC-4QW5B  PCB  MEMORY  MAP  Mode  21  (4M  x 4 pcs) 

PCB  Configuration  Mapping  Usable  EPROMs  ROM  Size  Usable  RAM  Auxiliary  Device 

20  or  21  1 M/2M/4M/8M  1/2/4/6/8/12/  None/1 6K/64K/256K  DSP 

1 6/24/32M 


SNES  DEVELOPMENT  MANUAL 


1-2-35 


Super  NES  EPROM  Selection  Tables 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


COMMENT 

FIELD 

w/back-up 

2 

CM 

CO 

i 

Xt 

23/S  A- 1 

© 

1M-32M 

20/21/DSP 

1 

1 

© 

4/8/1 6M 

0- 

co 

Q 

5 

o 

CM 

© 

1M-8M 

CL 

CO 

D 

o 

CM 

© 

8M-64M 

20/21/25 

B 

CM 

CO 

X 

xt 

20/21 

© 

CM 

CO 

x 

20/21 

© 

1 

CO 

X 

Xt 

20/21 

1 

© 

CO 

X 

xt 

20/21 

© 

1M-8M 

20 

© 

1 

1 

I ROM  SIZE 

[MODE(S) 

None/64K 

None/16/ 
64/256 K 

None/ 

512K/1M 

STATIC 

RAM 

SIZE 

( t > 
X 
t£ 
< 
S 

Lli 

GC 


■D 

0 


< 

tr 

co 

* 

xt 

CO 


0 

CL 

0 
*— » 

c 

Z> 

ID 

CM 


0 

CL 

0 

C 

Z> 

in 

CM 


gj 
0)0 
£ GO 

Is 

(V5 

O T_ 
*— » 

CL 

3 


TU 

0 


CO 

c 

< 

cc 

CO 

CO 

in 

CM 


*o 

0 

75 

■4— ' 
0 
c 


< 

cc 

CO 


D 

LU 

(/> 

3 

S 

o 

cc 

CL 

UJ 


o 

o 

xf 

o 

Is- 

CM 

O 

O 

CM 

O 

Is- 

CM 

O 

O 

o 

Is- 

CM 


0 

> 

o 

_Q 

<n 

0 

0 

E 

0 

CO 


0 

> 

o 

jD 

0 

(O 

0 

0 

E 

0 

CO 


o 

o 

CO 

O 

r- 

CM 
1 — 
o 
o 

xi* 

O 

N 

CM 


O 

O 

CO 

O 

h- 

CM 

O 

O 

xf 

o 

Is- 

CM 


O 

O 

xt 

O 

r- 

o 

o 

CM 

o 

Is- 

CM 

O 

O 

o 

h- 

CM 


O 

O 

CO 

o 

Is- 

CM 

T— 

o 

o 

xt 

O 

h- 

CM 


O 

O 

00 

o 

Is- 

CM 

O 

O 

xt 

O 

Is- 

CM 

O 

O 

CM 

O 

Is- 

CM 

O 

O 

o 

Is- 

cm 


o 

co 

O 

Is- 

CM 

O 

O 

xf 

O 

Is- 

OvJ 

o 

o 

CM 

o 

Is- 

CM 

T— 

o 

o 

O 

Is- 

CM 


O 

O 

xf 

O 

r- 

CM 


o 

o 

CO 

o 

Is- 

CM 


>• 

(/) 

(/> 

< 

CD 

O 

CL 


>- 

CO 

CO 

< 

GO 

CO 

Ol 

CM 

6 

> 

I 

CO 


c 

o 


2 m 
lu  £ 

8>* 
-O  O 

<si 


>- 
CO 

£ s 

t Is 


in  > 

> W> 


« * 

% Rx 

? 05  A 

0 

1 

- oS 


CO 


© 


0 


>" 

CO 

CO 

< 

GO 

Is- 

> 

CL 

xt 

i 

0 

> 

1 
CO 


0 


> 

CO 

CO 

< 

CO 

in 

> 

CL 

00 

6 

> 

X 

CO 


© 


CO 

CO 

< 

GO 

in 

O 

CM 

I 

o 

> 

X 

CO 


© 


CO 

CO 

< 

GO 

in 

5 

0 

CM 

1 

o 

> 

X 

CO 


© 


© 


CM 

O 

CM 

0 

o 

0 

-C 

O 


3 

o 

> 

X 

CO 


© 


>- 

CO 

CO 

< 

Icq 

Is- 

x 
00 
1 I 

O 

> 

X 

CO 


xf 

CD 

CO 

CO 

< 

CO 

in 

> 

CL 

CO 

I 

O 

> 

X 

CO 


© 


1-2-36 


Note:  Use  EPROM  listed  above  or  one  with  the  same  pin  locations. 


SHVC  Cartridge  List  (20  Map,  Production  Type) 


SNES  DEVELOPMENT  MANUAL 


c 

.0 

“0 

.0 

*0 

0 

OL 

0 

1 

1 

1 

1 

1 

specification 

CM 

CO 

O 

O 

< 

B 

B 

CM 

CO 

<1 

< 

<J 

< 

24M 

O 

O 

B 

< 

< 

24M 

< 

< 

< 

< 

20M 

O 

I 

O 

< 

< 

< 

O 

CM 

< 

<3 

<1 

< 

16M 

O 

O 

O 

0 

0 

O 

CO 

< 

< 

O 

< 

12M 

O 

O 

O 

0 

B 

B 

12M 

< 

<1 

O 

< 

10M 

O 

O 

O 

O 

< 

B 

10M 

< 

<1 

O 

< 

2 

00 

O 

O 

O 

0 

O 

0 

2 

<x> 

O 

<1 

O 

0 

■m- 

O 

O 

O 

0 

O 

0 

■M" 

O 

< 

O 

0 

CM 

O 

O 

O 

O 

O 

O 

CM 

O 

< 

° 

0 

0 

N 

'0 

No  SRAM 

16K 

64K 

256K 

51 2K 

2 

in 

CM 

O 

h- 

0 

N 

*0 

No  SRAM 

16K 

64K 

256K 

O 

DC 

SRAM 

size 

CL 
C 0 
O 

i— 

O 

H—  m 

tel 

0 

DC 

SRAM 

size 

CO 

LU 


CD 

C 

0 

c 

0 

O 


0 

CL 

D 

CO 


co 

0 


_ 0 

cr^ 
0 S> 
o 

3 0) 

O £ 

8? 


0 

CL 

D 

CO 


0 

0 

3 

cr 

0 

CC 

0 

*4— * 

o 

13 

o 

0 

o 


CL  £ 


E £ 


0 

0 


0 

0 


E.g 

■§* 
0 0 

0 £ 
0 c 
0 O 

£ E 
^0 

0< 
CD  O 
0 ^ 
0m- 

C o 
..  ■+— ' 
— c 
■ 0 

8e 

t -c 
■*-  0 
0 CL 

0 


0 CD 
C 


0 C 
w . E 0 

0 < 0.0 
Q.OOJ 
■ 2!  cl)  cd 
• rf  II  >ii 

®oo»- 

.Q  C ^ O 

M Q-S  oT 

co  O c1*-  ® 
> 0 B £ 
co  > 1=  « 

5-g  o-Q-t 

O Z.  CD  O CO 

Z£QZ0 


00  <] 


1-2-37 


Note:  Back-up  RAM  sizes  of  51 2K  bit  and  1M  bit  are  under  development.  If  required,  contact  NOA  Licensing 
Department. 


SHVC  Cartridge  List  (21  Map,  Production  Type) 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


] 


c 

o 

0 

o 

o 

CD 

Q_ 

0 

1 

1 

1 

1 

1 

1 

32M 

O 

0 

0 

<1 

B 

<J 

24M 

O 

0 

o 

<J 

B 

< 

20M 

o 

a 

o 

< 

B 

B 

16M 

o 

o 

o 

o 

B 

B 

12M 

o 

o 

o 

o 

B 

B 

10M 

o 

< 

o 

o 

B 

B 

CD 

o 

o 

< 

B 

o 

o 

o 

o 

B 

B 

CM 

o 

o 

o 

o 

<1 

< 

ROM  size 

No  SRAM 

16K 

64K 

CD 

ID 

CM 

512K 

5 

SRAM 

size 

specification 

32M 

O 

<J 

< 

<3 

24M 

O 

< 

< 

<1 

20M 

<J 

< 

< 

<J 

16M 

O 

O 

o 

<1 

12M 

<1 

O 

o 

<1 

10M 

<1 

o 

o 

<1 

2 

CD 

o 

o 

<1 

<1 

■'t 

o 

o 

< 

< 

CM 

o 

o 

<1 

< 

ROM  size 

No  SRAM 

CD 

CD 

256K 

SRAM 

Size 

CJ) 

LU 


U) 

c 

'0 

c 

Q) 

O 


0 

Q_ 

3 

CD 


0 

0 . 
O' -2 

a;  73 
0 


£ 

0 


CO 

LU 


0 

Q. 

3 

CO 


0 

0 

3 

cr 

0 

CC 

0 

O 

3 

o 

0 

O 

‘k_ 

CL 


E 
n 

3 

0 

0 

0 

0 ^ 
0 < 

0.Q 


0 

0 E c 

= CL  0 

«o  E 

I'D  0 

Z cQ 


'£•2 

■§* 
w w 

CD  £ 
W C 
CO  O 

^ E 

^<D 

m< 

«o 

o 

O'*- 

c o 

— c 
• 0 

| £ 

.E  t: 

0 

0 Q_ 

Z ® 

0 D) 
— C 

0 C 
. E cd 
cl.2 
o -J 
0 0 
&£ 
"o  o 

i_  ■*- 
£ 0) 

Q-c 

O CO 

zo 


OO  < 


1-2-38 


Note:  Back-up  RAM  sizes  of  51 2K  bit  and  1M  bit  are  under  development.  If  required,  contact  NOA  Licensing 
Department. 


SNES  DEVELOPMENT  MANUAL 

I 


THIS  PAGE  INTENTIONALLY 
LEFT  BLANK 


1-2-39 


SUPER  NES  SOFTWARE  SUBMISSION  REQUIREMENTS 


Price  Quote  Request  for  Super  NES  Cartridge 


Please  send  this  form  to  Nintendo  of  America  Inc.  Attn.:  Juana  Tingdale,  Licensing  Department  by  Fax  at 
(206)861-2173. 


Date(M/D/Y) 


Licensee 


Release  Date(M/D/Y) 


Game  Title 


Quantity 


Contact 


Specification 


Telephone  No. 


<Map  Mode> 

20  map  / 21  map  / to  be  determined  (please  circle) 

<ROM  size> 

M Bit 

<RAM  Specification> 

Bit  / without  RAM 

<Backup> 

Yes  / No 

<Co-processor> 

DSP1  / pPD77C25  (original  program)  / other  DSP  ( 

OBC1 

Super  FX 

(please  circle) 

) 

Others:  Please  specify  if  you  are  inquiring  other  than  standard  specification. 

□ i£  * $ te  a $ 

FOR  NCL  USE  ONLY 

nnm 

mu 

|| 

© 

<«  % m> 

<z2j/y\~> 

© f mmm  ¥& 

£ 

n b te 

i 

iSi+iO 

ft 

ep 

ft  ED 

SB  I 

* EPR0Ml£©Mf5?  ■ • 

1-2-40 


INTRODUCTION 


Chapter  1.  Introduction 

The  following  is  a brief  discussion  of  basic  concepts  used  to  display  game  characters  on 
the  home  television  set.  Even  if  you  have  developed  software  for  the  Nintendo  Entertain- 
ment System  (NES),  please  review  this  information. 


1 .1  PICTURE  IMAGE  GENERATION 

The  picture  on  a color  television  set  consists  of  525  horizontal  lines  with  each  line 
having  color  information.  The  broadcasting  station  breaks  the  picture  into  lines  as 
shown  in  the  figure  below. 

The  odd  numbered  lines  are  converted  to  electronic  signals  from  the  top  to  the 
bottom  of  the  screen.  The  remaining  even  numbered  lines  are  converted  from  the 
top  to  the  bottom  in  the  same  way. 

This  method,  in  which  a trace  is  generated  and  displayed  for  every  other  line,  is 
called  the  ’INTERLACE”  method.  The  electronic  signal  which  has  been  transmit- 
ted is  converted  to  a light  signal  and  will  create  traces  on  the  television  screen  in 
the  same  order  generated. 


The  act  of  tracing  light  on  the  screen  is  called  “scanning”.  The  period  while  scan- 
ning the  odd  numbered  lines  is  called  the  “1  st  field”.  The  period  while  scanning  the 
even  numbered  lines  is  called  the  “2nd  field.”  A scan  period  on  the  screen  is 
called  “one  frame”.  During  the  period  of  one  frame,  the  first  and  second  fields  are 
displayed  in  sequence.  Because  1/60  of  a second  is  required  to  produce  one  field, 
1/30  of  a second  is  required  to  produce  one  frame.  Therefore,  a certain  point  on 
the  screen  is  radiated  only  every  1/30th  of  a second.  Due  to  the  afterimage  seen 
by  the  human  eye  and  the  luminescence  of  the  CRT,  the  picture  does  not  normal- 
ly appear  to  flicker. 


(NCL  PG  2) 


2-1-1 


SNES  DEVELOPMENT  MANUAL 


1.2  SUPER  NES  DISPLAY 

The  picture  display  on  the  Super  Nintendo  Entertainment  System  (Super  NES) 
has  two  modes.  One  is  an  interlace  mode,  based  on  the  television  system.  The 
other  is  a non-interlace  mode,  in  which  one  frame  takes  1 /60th  of  a second.  In  the 
non-interlace  mode  the  same  position  is  scanned  every  field.  Each  frame  consists 
of  only  262  lines,  half  that  of  the  interlace  mode.  There  appears  to  be  no  flickering 
compared  to  the  interlace  mode,  since  each  point  on  the  screen  is  radiated  every 
1 /60th  of  a second. 

1.3  BLANKING 

The  screen  is  scanned  from  left  to  the  right  and  from  top  to  bottom  (see  Figure  1- 
1-2).  After  scanning  the  screen  from  left  to  right,  horizontal  blanking  occurs  to  pre- 
vent the  electron  beam  from  being  seen  as  it  returns  to  the  left  side  of  the  screen. 
When  the  beam  reaches  the  bottom  right  hand  side  of  the  screen,  vertical  blank- 
ing occurs  to  allow  the  beam  to  reposition  at  the  top  left  of  the  screen  without  be- 
ing seen.  The  NES  and  the  Super  NES  use  this  blanking  efficiently  to  display  the 
various  movements  of  characters. 


d 


Figure  2-1-2  - Scanning  Pattern  for  Interlace 

(NCL  PG3) 


2-1-2 


OBJECT 


Chapter  2.  Object  ( OBJ) 

2.1  OUTLINE 

This  function  can  display  an  object  in  a certain  position  on  the  screen.  The  charac- 
ters, such  as  the  UFO  or  the  missile  of  a space  game,  look  like  they  are  moving.  If 
the  character's  picture  is  replaced  at  the  same  time  the  point  is  moved,  animation 
effects  can  occur  (such  as  “Mario”  character  looking  like  he  is  walking). 

2.2  FUNCTION 

The  maximum  number  of  OBJ’s  that  can  be  displayed  on  the  screen  is  128  and 
there  are  four  sizes.  Two  sizes  can  be  selected  in  one  frame  and  one  size  can  be 
selected  for  each  OBJ.  There  are  8 color  pallets  for  OBJ’s  and  one  pallet  can  be 
selected  for  each  OBJ.  One  color  pallet  has  16  color  codes  out  of  32,768  colors. 
Therefore,  each  OBJ  in  the  picture  is  drawn  by  1 6 colors.  Each  of  the  1 28  objects 
that  may  be  displayed  on  the  screen  at  one  time  has  its  own  priority  order,  which 
will  decide  the  display  priority  if  2 or  more  OBJ’s  are  overlapped.  In  addition,  there 
is  the  Flip  function  of  “up-down,”  and  “left-right,”  “BG  Priority  Order”  and  the  “Prior- 
ity Order”  shifting  function. 


(NCL  PG  4) 


SNES  DEVELOPMENT  MANUAL 


2.3  SETTING  EXAMPLE 


CAUTION:  It  is  prohibited  to  write  “1 00H”  to  the  “OAM  H-posTtion  (9-bit) 
(Refer  to  page  A-4) 


(NCL  PC  5) 


2-2-2 


BACKGROUND 


Chapter  3.  Background  (BG) 

3.1  OUTLINE 

The  background  for  OBJ,  such  as  Mario,  can  be  displayed  on  the  screen  and 
scrolled  up,  down,  left  or  right.  This  helps  the  game  effect. 

3.2  FUNCTION 

There  are  8 kinds  of  BG  mode.  In  BG  mode  0 thru  6,  there  is  a difference  depend- 
ing on  the  combination  of  numbers  of  screens,  the  numbers  of  the  cell  color,  the 
resolution  and  the  offset  function.  There  are  4 screens  provided  and  the  number 
of  the  cell  colors  are  4 to  256.  There  are  3 kinds  of  the  resolution  selected  from 
256-dot  x 224-dot,  512-dot  x 224-dot,  or  512-dot  x 448-dot.  The  character  size 
can  be  set  "8-dot  x 8-dot”  or  “16-dot  x 16-dot”  on  each  screen. 

The  offset  value  (scroll  coordinate)  can  be  set  on  each  BG  screen  and  the  offset 
value  can  be  changed  every  horizontal  character  unit,  depending  on  the  mode,  so 
that  the  vertical  partial  scroll  can  be  made.  Eight  pallets  can  be  used  per  charac- 
ter, and  H-Flip  or  V-Flip  is  available  per  character.  Also,  the  priority  order  of  BG 
and  OBJ  can  be  changed  per  character.  (Refer  to  page  A-1 9) 

Mode-7  is  a screen,  which  can  rotate,  enlarge  or  reduce.  There  are  other  func- 
tions for  BG,  such  as  mosaic,  window,  fixed  color  addition/subtraction,  screen  ad- 
dition/subtraction, and  H-Pseudo  512. 


(NCL  PC  6) 


2-3-1 


SNES  DEVELOPMENT  MANUAL 


3 


3.3  SETTING  EXAMPLE 


INITIAL  SETTINGS 


* In  case  of  BG  MODE  5 or  6,  ‘Through  Sub  BG”  of  register  <212DH> 
should  also  be  set 


(NCL  PG  7) 


2-3-2 


MOSAIC 


Chapter  4.  Mosaic 

4.1  OUTLINE 

The  purpose  of  this  function  is  to  change  BG  screen  to  mosaic  design  and  shade 
off  a picture  (refer  to  page  A-7). 

4.2  FUNCTION 

A picture  element  of  mosaic  design  can  be  changed  to  1 5 sizes  and  a mosaic  de- 
sign can  be  selected  for  BG  screen. 

4.3  SETTING  EXAMPLE 


INITIAL  SETTINGS 


(NCL  PG  8) 


2-4-1 


SNES  DEVELOPMENT  MANUAL 


Chapter  5.  Rotation/Enlargement/Reduction 

5.1  OUTLINE 

In  the  BG  Mode-7  function,  more  animation  effects,  are  available  to  the  screen 
through  rotation,  enlargement  or  reduction,  and  a scroll  function. 

5.2  FUNCTION 

5.2.1  TYPE  I 

There  are  256  character  numbers  (8-dot  x 8-dot  size).  Each  dot  can  be  one 
of  the  256  colors,  from  a selection  of  32,768  colors.  In  EXTBG  mode,  each 
dot  can  be  one  of  1 28  colors  from  a selection  of  32,768  colors  and  each  dot 
can  have  priority  order.  In  this  function,  it  is  possible  to  scroll  up,  down,  to 
the  left  or  right.  The  center  coordinate  of  rotation,  enlargement  and  reduc- 
tion can  be  set  at  a point  either  outside  or  inside  of  the  display  area.  The  ro- 
tation angle  and  vertical  or  horizontal  magnification  values  are  changeable. 
Also,  horizontal  flip  and  vertical  flip  on  the  display  area  are  possible.  In 
case  the  display  area  goes  beyond  the  screen  area,  one  of  three  choices 
can  be  selected  in  order  to  display  the  excess  portion: 

1 ) the  back  drop  color 

2)  a single  character  (CHR#  0) 

3)  repetition  (wrap)  of  the  screen  area 

5.2.2  EXTBG  MODEfTYPE  II) 

EXTBG  mode  is  originally  provided  as  a function  for  the  purpose  of  the  LSI 
BG  expand.  For  the  Super  NES,  this  function  is  used  for  rotation,  enlarge- 
ment and  reduction  in  128  colors  with  priority  order.. 


(NCL  PC  9) 


2-5-1 


ROTA  TION/ENLARGEMENT/REDUCTION 


SETTING  EXAMPLE 

INITIAL  SETTINGS 


• Clear  each  register 

• Set  register  <21 05H>1 

BG  Mode  - 7 Settings 

• Set  register  <21 2CH>2 

Through  main  BG  settings 

• Set  register  <21 1 AH> 

Screen  Flip  H 
Screen  Over 


2-5-2 


SNES  DEVELOPMENT  MANUAL 


Chapter  6.  Window  (Window  Mask) 

6.1  OUTLINE 

This  function  limits  the  display  area  on  the  TV  screen  for  BG  and  OBJ.  This  win- 
dow can  be  set  on  the  TV  screen.  BG  and  OBJ  can  be  displayed  inside  or  outside 
of  this  area. 

6.2  FUNCTION 

There  are  2 windows.  Each  window  can  affect  either  the  BG  screen  or  OBJ  and 
can  be  either  internal  or  external  masked.  Four  types  of  window  mask  logic  (OR, 
AND,  XOR  and  NXOR)  can  be  selected  for  each  BG  and  OBJ,  using  2 kinds  of 
windows  simultaneously  (refer  to  “Mask  Logic  Settings  for  Window  1 & 2”  under 
“PPU  Registers”).  If  this  function  is  combined  with  the  function  of  H-DMA,  various 
shapes  of  the  window  will  be  formed,  such  as;  a round  shape,  heart  shape,  or  star 
shape.  It  is  also  possible  to  use  this  function  combined  with  the  screen  addition/ 
subtraction  and  fixed  color  addition  functions. 

6.3  SETTING  EXAMPLE 


INITIAL  SETTINGS 


(NCL  PC  11) 


2-6-1 


MAIN/SUB  SCREEN 


Chapter  7.  Main/Sub  Screen 

When  displaying  several  BG  and  OBJ  screens,  the  picture  to  be  displayed  in  the  over- 
lapped portion  is  decided  by  two  paths.  One  of  them  is  called  the  main  screen  and  the 
other  is  called  the  sub  screen.  The  screen  to  be  used  for  the  main  and  sub  screens  can 
be  selected  by  registers  <21 2CH>  and  <21 2DH>.  Furthermore,  the  data  for  the  main  and 
sub  screens  to  be  displayed  is  made  according  to  the  priority  order.  Unless  the  addition/ 
subtraction  screen  is  done  as  follows,  the  “Main  SW”  of  the  “Color  Window”  in  register 
<21 30H>  is  normally  on,  and  the  “Sub  SW”  is  normally  off  so  that  only  the  main  screen  is 
displayed  (see  page  A-23). 


<212CH> 


BG  SCREEN 
OBJ  SCREEN 
DATA 


I 


t 


<212DH> 


k MAIN 
t>  SCREEN 
DATA 


0> 


SUB 

SCREEN 

DATA 


(NCL  PG  12) 


2-7-1 


SNES  DEVELOPMENT  MANUAL 


7.1  SCREEN  ADDITION/SUBTRACTION 

7.1.1  OUTLINE 

This  function  is  the  addition  (Overlapping  Light)  or  the  subtraction  (Lens 
Filter)  for  the  main  screen  and  the  sub  screen  in  order  to  have  the  effect  of 
transparency. 

7.1.2  FUNCTION 

This  function  displays  the  result  after  the  addition  or  subtraction  of  RGB 
data  on  the  main  screen  and  sub  screen.  This  function  can  also  select  BG 
screen  or  OBJ  data  on  the  main  screen  to  be  added  to  or  subtracted  from 
the  sub  screen,  similar  to  the  figure  below.  However,  when  there  is  no 
screen  data  on  the  sub  screen  (screen  is  clear),  the  color  constant  ex- 
plained on  page  1-7-4  will  be  added  or  subtracted. 

When  the  result  of  addition  or  subtraction  exceeds  31 , the  value  becomes 
31 . When  the  result  of  addition  or  subtraction  is  less  than  0,  the  value  be- 
comes 0. 

Please  do  not  use  this  function  on  BG  mode  5 or  6. 


MAIN  SCREEN 
DATA 


ADDITION/SUBTRACTION 

SELECT 


SUB  SCREEN 
DATA 


*> 


► 


ADDER-SUBTRACTER 


DISPLAY 


(NCL  PG  13) 


MAIN/SUB  SCREEN 


7.1.3 


SETTING  EXAMPLE 


INITIAL  SETTINGS 


Clear  each  register 

Enable  BG  to  display  (see  BG  instruction) 
Enable  OBJ  to  display  (see  OBJ  instruction) 
Set  D1  of  register  <2130H> 

“CC  ADD  Enable”  Settings 
Set  register  <21 31  H> 

ADD  or  SUB  Enable 
1/2  Enable 
ADD/SUB 

Set  register  <212CH> 

“Through  Main”  Settings 
Set  register  <212DH> 

“Through  Sub”  Settings 


] 


SETTINGS 


DISPLAY 


NOTE:  When  the  main  screen  data  is  the  OBJ,  it  will  be  added  to  or 
subtracted  from  the  sub  screen  data  only  for  the  OBJ  of  the  pallet 
code  (4  to  7). 

NOTE:  When  “1/2  Enable”  of  register  <2131H>  is  enabled,  the  addition/ 
subtraction  result  of  each  RGB  becomes  1/2. 


(NCL  PC  U) 


2-7-3 


SNES  DEVELOPMENT  MANUAL 


7.2  COLOR  CONSTANT  ADDITION/SUBTRACTION 

7.2.1  OUTLINE 

This  function  can  perform  addition  (overlapped  light)  or  subtraction  (lens  fil- 
ter) with  RGB  value  (color  constant)  set  by  the  main  screen  and  register 
<21 32H>.  This  will  change  the  color  on  the  display  area. 

7.2.2  FUNCTION 

This  function  can  perform  addition/subtraction  by  using  the  RGB  value  (col- 
or constant)  which  is  set  by  register  <2132H>  instead  of  the  sub  screen  of 
the  addition/subtraction  screen  described  previously. 

7.2.3  SETTING  EXAMPLE 


INITIAL  SETTINGS 


• Clear  each  register 

• Enable  BG  to  display  (see  BG  Manual). 

• Clear  D1  of  register  <21 30H> 

“CC  ADD  Enable”  Settings 

• Set  register  <2131  H> 

ADD  or  SUB  Enable  — i SETTINGS 
1/2  Enable 

ADD/SUB  J 

• Set  register  <2 132H> 

“Color  Constant  Data”  Settings 


(NCL  PC  15) 


2-7-4 


MAIN/SUB  SCREEN 


7.3  COLOR  WINDOW  (Combination  of  Window  & Addition/ 
Subtraction) 

7.3.1  OUTLINE 

The  Screen  Addition/Subtraction  or  the  Color  Constant  Addition/Subtrac- 
tion can  be  performed  inside  or  outside  the  window  (only  one  or  the  other). 

7.3.2  FUNCTION 

This  function  can  select  what  portion  of  the  window  should  be  displayed 
and  added  or  subtracted  on  each  main  screen  and  sub  screen.  The  follow- 
ing is  the  function  of  window,  the  screen  addition/subtraction  and  the  color 
constant  addition/subtraction. 

7.3.3  SETTING  EXAMPLE 


INITIAL  SETTINGS 


• Clear  each  register 

• Enable  BG  to  display  (See  BG  Manual) 

• Enable  OBJ  to  display  (See  OBJ  Manual) 

• Set  register  <21 2EH>,  <21 2FH> 

Through  Main  (Window)  “I 
Through  Sub  (Window)  _J  SETTINGS 

• Set  register  <21 25H> 

Set  Color  Window 

• Set  register  <2126H>  - <2129H> 

Set  Window  Position 


• Set  register  <212AH>,  <212BH> 

Set  Window  Logic 

• Set  register  <21 30H> 

Color  Window  ON/OFF  settings 


• Set  register  <2131  H> 
ADD  or  SUB  Enable 
1/2  Enable 
ADD/SUB 


SETTINGS 


• Set  register  <21 32H> 

Color  Constant  Data  settings 


V-BLANK 


Set  H-DMA  etc. 


DISPLAY 


(NCL  PC  16) 


2-7-5 


SNES  DEVELOPMENT  MANUAL 


Chapter  8.  CG  Direct  Select 

8.1  OUTLINE 

On  BG-1  in  Mode  3,  4 and  7,  the  character  data  can  be  used  as  the  color  data 
without  using  CG-RAM  color  data.  BG-1  can  be  displayed  using  2048  colors  on 
Mode  3 and  4,  and  256  fixed  colors  on  Mode  7.  BG-2  and  OBJ  can  use  the  CG- 
RAM  color  data  without  being  limited  to  the  color  data  on  BG-1 , 

8.2  FUNCTION 

When  BG-1  on  Mode  3,  4 and  7 is  displayed  on  the  TV  screen,  this  function  will 
display  8-bit  color  data  per  character  dot  without  using  the  CG-RAM.  The  CG- 
RAM  data  is  used  for  the  objects  and  other  background  screens. 

8.3  SETTING  EXAMPLE 


• Enable  BG  to  display  (See  BG  Instruction) 

• Set  “DO”  of  register  <21 30H> 

“Direct  Select”  Settings 


NOTE:  See  page  A-1 7 for  color  data. 


(NCLPG  17) 


2-8-1 


H-PSEUD0  512 


Chapter  9.  H-Pseudo  512 

9.1  OUTLINE 

In  modes  other  than  5 and  6,  this  function  provides  gradation  between  2 dots 
which  are  next  to  each  other  horizontally,  which  changes  the  color  smoothly. 

9.2  FUNCTION 

This  function  utilizes  screen  addition/subtraction.  The  color  constant  addition/sub- 
traction can  not  be  done  at  the  same  time  that  this  function  is  performed. 

9.3  SETTING  EXAMPLE 


• Enable  BG  to  display  (see  BG  instruction) 

• Set  “D3”  of  register  <2133H> 

“Pseudo  512”  settings 

• Set  register  <21 2CH>,  <21 2DH> 

Through  Main  — i 

Through  Sub  J SETTINGS 

• Set  D1  of  register  <21 30H> 

“CC  ADD  Enable”  settings 

• Set  register  <2131  H> 

ADD  or  SUB  Enable 
1/2  Enable  ~| 

ADD/SUB  J SETTINGS 


(NCL  PG  18) 


SNES  DEVELOPMENT  MANUAL 


Chapter  10.  Complementary  Multiplication  ( Signed 

Multiplication) 

10.1  OUTLINE 

The  2’s  complement  multiplication  will  be  performed  with  high  speed.  For  exam- 
ple, to  calculate  the  rotation  parameter  in  mode  7,  it  will  lighten  the  burden  of  the 
CPU  processing. 

10.2  FUNCTION 

The  high  speed  multiplication  of  16-bit  (2’s  complement)  and  8-bit  (2’s  comple- 
ment) will  be  performed  with  “no-wait,"  and  the  result  becomes  24-bit  (2’s  comple- 
ment). 

10.3  SETTING  EXAMPLE 


• Set  BG  other  than  MODE-7  (or  V-Blank/Forced  Blank) 

(Except  during  V-Blank  or  Forced  Blank  period) 

• Write  lower  8-Bit  (Multiplicand)  to  register  <21 1 BH>: 

(Input) 

• Write  higher  8-Bit  (Multiplicand)  to  register  <21 1 BH>: 

(Input) 

• Write  register  8-Bit  (Multiplier)  to  register  <21 1CH>: 

(Input) 

• Read  register  <21 34H>  ~ <21 36H>: 

(Result) 

(NCL  PG  19) 


H/V  COUNTER  LATCH 


Chapter  11.  HIV  Counter  Latch 

11.1  OUTLINE 

This  function  is  used  for  synchronization  of  process  timing  by  tracking  the  scan- 
ning beam  on  the  screen. 

11.2  FUNCTION 

This  function  sets  the  vertical  and  horizontal  counter  value  (when  register 
<2137H>  is  read)  and  tracks  the  raster  beam  on  the  screen  by  reading  the  regis- 
ter value.  (The  scanning  is  synchronized  with  an  internal  vertical  and  horizontal 
counter.) 

11.3  SETTING  EXAMPLE 


• Read  register  <2137H>:  (counter  latch) 

• Read  register  <213FH> 

(Initialize  register  <213CH>,  <213DH>  in  the  order  of  Low  and  High) 

• Read  register  <21 3CH>,  <213DH> 


(NCL  PG  20) 


2-11-1 


SNES  DEVELOPMENT  MANUAL 


Chapter  12.  Offset  Change 

12.1  OUTLINE 

The  horizontal  and  vertical  scroll  (offset)  value  can  be  performed  every  horizontal 
8-dot  (character  unit)  in  mode  2,  4,  and  6.  The  other  part  of  the  screen  can  be 
brought  into  the  middle  of  the  frame  in  order  to  have  the  effect  of  a window.  A par- 
tial vertical  scroll  can  also  be  made. 

12.2  FUNCTION 

This  function  can  be  used  in  any  of  the  three  ways,  listed  below. 

• Affect  BG-1  only 

• Affect  BG-2  only 

• Affect  both  BG-1  and  BG-2 

The  offset  for  both  H and  V can  be  changed  at  every  character  unit  on  mode  2 
and  6,  but  the  offset  for  either  H or  V (only  one  or  the  other)  can  be  changed  on 
mode  4.  The  same  offset  will  be  performed  on  each  line  once  the  offset  data  for  a 
horizontal  line  (32  characters)  is  set.  To  change  the  setting  of  the  other  offset  val- 
ue, depending  on  the  scanning  line,  change  “BG-3  SC  Offset  Address”  or  “BG-3 
SC  Base  Address"  during  the  H-DMA  period. 

12.3  SETTING  EXAMPLE 


INITIAL  SETTINGS 


(NCL  PC  21) 


STANDARD  CONTROLLER 


Chapter  13.  Standard  Controller 

13.1  OUTLINE 

The  switch  status  of  the  standard  controller  can  be  read  automatically  in  serial  or- 
der and  will  be  converted  to  parallel  data. 

13.2  FUNCTION 

Two  standard  controllers  can  be  connected  to  the  Super  NES.  Four  standard  con- 
trollers may  be  connected  by  using  an  expanded  connector,  such  as  Multi  Player  5 
(refer  to  “Accessories”).  Single  bit  data  is  assigned  to  each  switch.  Up  to  16  bits 
can  be  read  automatically  for  one  standard  controller.  The  expanded  bit  data  can 
be  read  1 bit  at  a time  by  the  software,  as  for  the  NES.  The  hardware  reads  the 
data  for  about  21 5 ps  after  the  V Blank  flag  is  set  or  NMI  is  applied.  During  this 
data  read  period,  the  standard  controller  register  cannot  be  read  properly. 

• 215  (214.55)  ps  is  equivalent  to  3.4  (3.38)  scanning  lines;  a period  of  580 
(576)  bytes  to  be  transferred  by  DMA.  (If  the  CPU  clock  is  2.68  MHz,  it  is 
equivalent  to  580  machine  cycles.)  As  soon  as  V-Blank  starts,  normal  flow 
is  to  perform  general  purpose  DMA.  Therefore,  it  is  convenient  if  the  total 
number  of  bytes  to  be  transferred  by  general  purpose  DMA  is  used  for  read 
timing.  (Please  refer  to  the  System  Flowchart.) 

• The  standard  controller  data  (register)  should  be  read  after  confirming  that 
“JOY-C  Enable”  of  register  <421 2H>  is  not  set  during  the  V-Blank  period, 
so  that  valid  data  can  be  read. 

• After  the  1 8 ps  (48  machine  cycles  with  2.68  MHz)  from  the  beginning  of  V- 
Blank,  the  hardware  will  start  to  read.  “Standard  CNTRL  Enable”  of  register 
<421 2H>  cannot  be  set  during  this  period. 


(NCI  PG  22) 


2-13-1 


SNES  DEVELOPMENT  MANUAL 


13.3  SETTING  EXAMPLE 


INITIAL  SETTINGS 


(NCL  PG  23) 


2-13-2 


PROGRAMMABLE  I/O  PORT 


Chapter  14.  Programmable  I/O  Port 

14.1  OUTLINE 

An  8 bit  programmable  I/O  port  is  provided  for  interface  to  peripheral  devices, 
such  as;  a keyboard,  the  3D  glass,  etc. 

14.2  HOW  TO  USE 

A “1  ” should  be  written  to  register  <4201  H>  for  the  bit  to  be  used  as  the  in-port. 
The  selected  bit  will  become  the  in-port,  which  can  be  read  by  register  <421 3H>. 
Output  data  should  be  written  to  the  bit  of  register  <4201  H>  to  be  used  as  the 
Out-port.  This  data  can  be  output  directly. 

★Only  2 of  the  8 bits  can  be  used  at  the  connector  for  the  controller  (Refer  to 
page  1-28-1). 


(NCI  PC  24) 


SNES  DEVELOPMENT  MANUAL 


Chapter  15.  Absolute  Multiplication! Division 

15.1  OUTLINE 

Absolute  multiplication  (8  bit  by  8 bit)  and  absolute  division  (16  bit  by  8 bit)  can  be 
done  using  this  function.  It  is  also  convenient  for  processing  arrays  of  tables  and 
can  improve  the  processing  speed  for  multiplication  and  division. 

15.2  FUNCTION 

The  multiplication  calculation  between  the  multiplicand  of  an  8 bit  absolute  value 
(0  ~ 255)  and  the  multiplier  of  an  8 bit  absolute  value  (0  ~ 255)  can  be  performed 
and  can  provide  the  result  of  a16  bit  product  (0  ~ 65025).  The  division  calculation 
between  the  dividend  of  a 1 6 bit  absolute  value  (0  ~ 65535)  and  the  divisor  of  an  8 
bit  absolute  value  (0  ~ 255)  can  be  performed  and  can  provide  the  result  of  a 16 
bit  quotient  (0  ~ 65535)  and  a 16  bit  remainder. 

If  the  divisor  is  “0”  in  the  division  calculation,  the  quotient  value  becomes  65535 
(0FFFFH)  and  the  remainder  becomes  the  dividend  value.  Therefore,  caution  is 
required. 

It  takes  about  8 machine  cycles  for  the  multiplication  calculation  and  about  16  ma- 
chine cycles  for  the  division  calculation.  The  register  value  for  multiplicand  and 
dividend  will  not  be  destroyed  even  after  the  operation. 

15.3  SETTING  EXAMPLE 


• In  case  of  Multiplication 

o Set  register  <4202H> 
“Multiplicand-A”  Settings 
o Set  register  <4203H> 
“Multiplier-B”  Settings 
o Wait  for  8 Machine  Cycles 
o Read  register  <421 6H>,  <421 7H> 
Read  Product-C 

• In  case  of  Division 

o Set  register  <4204H>,  <4205H> 
“Dividend-C”  Settings 
o Set  register  <4206H> 

“Divisor-B"  Settings 
o Wait  for  1 6 Machine  Cycles 
o Re^d  register  <4214H>,  <4215H> 
Read  Quoiient-A 

o Read  register  <421 6H>,  <421 7H> 
Read  Remainder 


(NCL  PC  25) 


H/V  COUNT  TIMER 


Chapter  16.  HIV  Count  Timer 

16.1  OUTLINE 

The  Super  NES  has  a timer  synchronizing  with  the  display  on  the  TV  screen, 
which  is  used  for  adjusting  the  synchronization  of  the  scanning  process  on  the 
screen  and  software  execution. 

16.2  FUNCTION 

This  function  can  generate  the  interrupt  at  either  a V or  H position  of  the  scanning 
lines.  It  can  also  generate  the  interrupt  at  any  position  of  the  scanning  line. 

16.3  SETTING  EXAMPLE 


INITIAL  SETTINGS 


(NCL  PG  26) 


SNES  DEVELOPMENT  MANUAL 


Chapter  1 7.  Direct  Memory  A ccess  ( DMA ) 

The  DMA  is  the  method  to  transfer  the  data  in  the  same  manner  as  the  data  transfer 
which  is  done  by  the  CPU.  However,  the  DMA  can  transfer  the  data  at  high  speeds  by 
using  the  hardware  instead  of  the  CPU.  The  SNES  has  the  exclusive  DMA,  since  the  pic- 
ture data  has  to  be  transferred  rapidly. 

The  DMA  for  the  SNES  is  to  transfer  the  data  between  “A-Bus  Address”  in  the  CPU 
(0000000  ~ 0FFFFFF)  and  “B-Bus  Address”  in  the  S-PPU  (0002100  ~ 00021 FF),  which 
has  8 channels  total.  There  are  two  kinds  of  DMA:  general  purpose  DMA  and  H-DMA.  Ei- 
ther can  be  set  at  each  channel.  The  data  can  be  transferred  between  the  same  DMA’s 
in  the  order  of  lower  channel  numbers  (0  ~ 7).  The  H-DMA  can  interrupt  even  during  the 
transfer  by  the  general  purpose  DMA,  which  means  that  the  H-DMA  has  higher  priority 
than  the  general  purpose  DMA.  Furthermore,  the  CPU  process  stops  automatically  dur- 
ing the  DMA  period,  and  will  start  again  after  the  DMA  is  completed.  It  is  not  necessary  to 
observe  the  DMA  completion  by  the  CPU. 

17.1  GENERAL  PURPOSE  DMA 

17.1.1  OUTLINE 

This  function  can  transfer  the  data  rapidly  between  2 types  of  memory 
devices:  memory  which  can  be  accessed  directly  by  the  CPU,  such  as 
a ROM  on  the  game  cartridge,  and  memory  which  has  to  be  accessed 
through  the  S-PPU,  such  as  the  V-RAM. 

17.1.2  FUNCTION 

The  maximum  area  of  the  A-Bus  address  which  can  be  used  in  one  chan- 
nel is  limited  in  one  bank  (65,536  Byte).  Therefore,  in  case  of  spreading 
over  more  than  2 banks,  it  is  necessary  to  use  more  than  2 channels  or 
transfer  twice.  One  A-Bus  address  basically  is  increased  every  time  1 
byte  of  data  is  transferred.  However,  it  can  be  decreased  or  fixed  de- 
pending on  the  settings  (“d3”  and  “d4”  of  register  <43X0H>). 


(NCL  PG  27) 


2-17-1 


DIRECT  MEMORY  ACCESS 


The  following  table  shows  four  types  of  B-Bus  address  changes: 


Table  2-17-1  B-Bus  Address  Changes 


Transfer  Word  Select 
<43X0H> 

# of  Transfer 
(#  of  Byte) 

D2~  DO 

000  or 
010 

D2  ~ DO 
001 

D2~  DO 
011 

D2~  DO 
100 

0 

B 

B 

B 

B 

1 

B 

B + 1 

B 

B + 1 

2 

B 

B 

B + 1 

B + 2 

3 

B 

B + 1 

B + 1 

B + 3 

4 

B 

B 

B 

B 

5 

B 

B + 1 

B 

B + 1 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• In  case  of  224  lines,  general  purpose  DMA  can  transfer  6K  byte  data  maximum 


during  V-Blank  period. 

NOTE:  B means  the  data  of  register  <43X1  H> 


(NCL  PG  28) 


2-17-2 


SNES  DEVELOPMENT  MANUAL 


i 


17.1.3  SETTING  EXAMPLE 


FORCED  BLANK 


(NCL  PG  29) 


2-17-3 


DIRECT  MEMORY  ACCESS 


17.2  H-DMA 

17.2.1  OUTLINE 

This  is  a special  DMA  which  can  transfer  data  automatically,  synchroniz- 
ing with  the  H-Blank.  The  S-PPU  settings  can  be  varied  by  each  horizon- 
tal scan  line  and  special  effects  can  be  added  to  the  picture. 

17.2.2  FUNCTION 

This  function  transfers  the  data  from  the  A-Bus  memory  (CPU  memory) 
to  the  S-PPU  register.  There  are  two  kinds  of  addressing  modes  on  the 
A-Bus  side;  absolute  and  indirect  addressing.  Either  type  of  addressing 
can  be  set  by  each  channel.  There  are  two  kinds  of  data  transfer.  One  is 
to  transfer  a set  of  data  during  each  horizontal  blanking  period.  The  other 
is  to  transfer  a set  of  data  every  certain  number  of  horizontal  blanks. 


Table  2-17-2  B-Bus  Address  Change 


Transfer  Word  Select 

D2  ~ DO 

D2~  DO 

D2~  DO 

D2  ~ DO 

D2~  DO 

N.  <43X0H> 

000 

001 

010 

011 

100 

# of  Line  n. 

to  be  transferred 

B 

B 

B 

B 

1 

B 

B 

B + 1 

B + 1 

B 

B + 1 

B + 2 

B + 1 

B + 3 

B 

B 

O 

B 

B 

B 

B 

B + 1 

C. 

B + 1 

B + 2 

B + 1 

B 

B + 1 

B + 3 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• 

• 

NOTE:  B means  the  data  of  register  <43X1  H>. 


(NCL  PG  30) 


2-17-4 


SNES  DEVELOPMENT  MANUAL 


17.3  SETTING  EXAMPLE 


FORCED  BLANK 


(NCL  PG  31) 


INTERLACE 


I 


Chapter  18.  Interlace 

18.1  BG  MODE  0 ~ 4 & 7 

When  “1”  is  written  to  DO  of  register  <2133H>,  the  picture  signal  output  from  the 
Super  NES  will  be  the  interlace  signal.  In  the  case  of  BG  modes  0 through  4 and 
7,  the  same  picture  will  be  displayed  unless  the  picture  data  is  changed  between 
the  1 st  field  and  the  2nd  field.  (Refer  to  BG  Screen  in  Appendix  A.) 

18.2  BG  MODE  5 & 6 

When  using  interlace  on  BG  mode  5 and  6,  the  vertical  resolution  will  be  doubled 
in  appearance.  The  picture  is  displayed  using  a one  frame  combination  of  the  1st 
field  and  2nd  field.  (Refer  to  BG  Screen  in  Appendix  A.) 

18.3  OBJ 

When  “1”  is  written  to  “D1”  of  register  <2133H>,  the  vertical  resolution  will  be  dou- 
bled as  in  the  case  of  BG  Mode  5 and  6,  because  a picture  is  generated  using  one 
frame.  The  range  of  the  V-position  for  OBJ  is  0 through  255  and  this  range  will  not 
be  doubled. 


< NCLPG  32) 


2-18-1 


SNES  DEVELOPMENT  MANUAL 


Chapter  19.  H-512  Mode  (BG  Mode  5 & 6) 

19.1  MAIN  SCREEN  & SUB  SCREEN  SETTINGS 

The  screen  addition/subtraction  function  should  not  be  used,  because  a part  of 
both  main  screen  and  sub  screen  functions  are  used  in  this  mode.  With  the  excep- 
tion of  color  constant  addition/subtraction,  “1”  should  be  written  to  D4  and  D5  of 
register  <21 30H>  and  the  sub-switch  should  be  off.  The  same  data  should  be  writ- 
ten to  registers  <212CH>,  <212DH>,  <212EH>,  and  <212FH>.  “Through”  should 
be  the  same  for  both  the  main  and  sub-screens. 

19.2  FIXED  COLOR  ADDITION/SUBTRACTION 

DO  ~ D5  of  register  <21 31  H>  is  a flag  which  can  select  the  main  screen  for  addi- 
tion/subtraction. Because  a part  of  both  main  screen  and  sub  screen  functions  are 
used,  this  selection  cannot  be  performed.  It  is  necessary  to  write  “1  ” to  6 flags  (DO 
~ D5)  when  color  constant  addition/subtraction  is  performed.  The  remaining  set- 
tings are  the  same  as  the  normal  Color  Constant  Addition/Subtraction.  There  will 
be  addition/subtraction  every  2 dots,  horizontally,  in  the  color  window  function,  be- 
cause the  window  has  only  256  positions  horizontally. 

19.3  DISPLAY  WITH  OBJ 

The  name  H-512  indicates  a horizontal  resolution  of  512  for  BG.  The  horizontal 
resolution  for  the  OBJ  is  only  256-dot,  regardless  of  the  BG  mode.  The  priority  or- 
der for  BG  is  determined  by  every  dot. 

19.4  OTHERS 

See  “BG  Screen”  in  the  Tables  of  Appendix  for  details. 


(NCL  PG  33) 


2-19-1 


OBJ  33 


3 


Chapter  20.  OBJ  33’ s Lines  Over  & Priority  Order 

20.1  33‘S  RANGE  OVER 

The  number  of  OBJs  which  can  be  displayed  in  a horizontal  line  is  limited.  One  of 
these  limitations  is  called  the  “33’s  Range  Over.”  This  limits  the  number  of  OBJs 
which  can  be  displayed  in  a horizontal  line,  regardless  of  the  OBJ  size.  If  “33’s 
Range  Over”  has  occurred  in  one  field  (at  least  one  line),  “D6”  of  register 
<213EH>  will  be  set.  For  the  line  in  which  this  “33’s  Range  Over”  occurs,  only  32 
OBJs  can  be  displayed  out  of  33  or  more  OBJs  present.  The  32  OBJs  displayed 
are  selected  using  the  priority  order  (selected  from  smaller  OBJ  number). 

NOTE:  “The  number  of  displayed  OBJs”  counts  OBJs  hidden  by  BG  window  or 
other  OBJs. 

NOTE:  If  H-position  is  minus,  and  the  OBJ  is  not  displayed  on  the  screen  area 
(located  on  the  left  of  the  screen  to  be  displayed),  “the  number  of  displayed  OBJs” 
does  not  count  them. 

20.2  35’S  TIME  OVER 

The  other  limitation  on  the  horizontal  line  is  called  “35's  time  over.”  This  limits  the 
number  of  OBJs  (converted  to  character  size  8-dot  x 8-dot)  that  can  be  displayed. 
If  the  “35’s  Time  Over”  has  occurred  in  one  field  (at  least  one  line),  “D7”  of  the  reg- 
ister <213EH>  will  be  set.  In  the  line  in  which  this  “35's  Time  Over”  has  occurred, 
only  32  of  the  total  OBJs  available  can  be  displayed  according  to  the  priority  order 
(selected  from  larger  OBJ  number).  This  limit  is  due  to  a conversion  limit  of  less 
than  35  OBJs  (8  x 8)  displayed  per  horizontal  line.  “These  32  OBJs  must  satisfy 
the  display  condition  explained  in  “33’s  Range  Over”,  above. 

NOTE:  There  are  characters  (8-dot  x 8-dot)  which  are  not  displayed  on  the  dis- 
play area  depending  on  OBJ  size  and  position.  But  they  are  not  included  in  this 
limitation  (34  or  less). 


(NCL  PG  34) 


2-20-1 


SNES  DEVELOPMENT  MANUAL 


20.3  PRIORITY  ORDER  SHIFTING 

As  mentioned  above,  limited  numbers  of  OBJs  can  be  displayed  in  a line  and  are 
related  to  the  priority  order.  It  is  desirable  to  develop  a game  within  this  limitation. 
However,  sometimes  OBJs  need  to  be  displayed  beyond  this  limitation.  This  can 
be  accomplished  using  virtual  OBJs.  One  method  is  to  change  the  priority  order 
every  frame.  Another  method  changes  the  OBJ  data  order  through  programming. 
The  Super  NES  also  contains  a function  which  rotates  the  priority  order  of  1 28 
OBJs.  When  using  these  methods,  consider  that  the  OBJ  will  flash  every  frame 
unit  and  the  priority  order  among  OBJs  will  change.  The  method  for  assignment  is 
as  follows: 

Step  1.  Display  the  OBJ. 

Step  2.  Write  “1”  to  “D7”  of  register  <2103H>. 

Step  3.  Write  the  highest  priority  OBJ  number  (0  ~ 127)  to  “D1  ~ D7”  of 
register  <2102H>  during  V-Blank  period  every  frame. 

Step  4.  Repeat  step  3. 

When  OBJ  number  stored  in  step  3 is  “n”. 


OBJ  NUMBER 

PRIORITY  ORDER 

OBJ  0 

1 2 9 - n 

• 

• 

• 

• 

• 

• 

0 B J (n  - 1) 

1 2 8 

0 B J (n) 

1 

0 B J (n  + 1) 

2 

• 

• 

• 

• 

• 

• 

0 B J 1 2 7 

1 2 8 - n 

(NCL  PC  35) 


2-20-2 


CPU  CLOCK  AND  ADDRESS  MAP 


Chapter  21.  CPU  Clock  and  Memory  Mapping 

21.1  CPU  CLOCK 

The  CPU  clock  can  be  switched  automatically,  depending  on  the  address  to  be 
accessed  by  the  CPU.  Three  clock  speeds  are  available:  3.58MHz,  2.68MHz,  and 
1 .79  MHz.  The  device  speed  (ROM,  RAM,  LSI,  etc.)  will  determine  the  speed  to 
be  used.  If  a medium  speed  ROM  and  RAM  (access  time  less  than  200ns)  are 
used  in  the  cartridge,  it  will  be  mapped  to  the  address  area  for  2.68MHz.  If  high 
speed  (access  time  less  than  120ns)  are  used,  it  will  be  mapped  to  the  address 
area  for  3.58MHz.  Please  refer  to  “Frequency  & Address  Mapping”  for  the  relation 
between  the  address  and  the  clock.  Two  clocks  (2.68MHz  & 3.58MHz)  can  be  se- 
lected by  setting  DO  of  register  <420DH>  for  the  range  of  memory  shown  in 
the  illustration  on  the  next  page.  The  default  setting  is  2.68MHz.  The  CPU  is  oper- 
ated internally  with  a 3.58MHz  clock  speed.  (Regardless  of  the  address,  DMA  will 
be  performed  with  2.68MHz  clock  speed). 

21.2  CPU  MEMORY  MAP 

Please  refer  to  “Frequency  & Address  Map”  on  the  next  page.  The  WRAM  (8K- 
Byte)  is  mapped  to  address  (0000  ~ 1 FFF)  of  banks  (00  ~ 3F),  (80  - BF)  and  7E. 
This  is  the  WRAM  used  as  common  bank.  This  8K-Bytes  can  be  accessed  from 
any  bank  described  above.  The  WRAM  (120K-Byte)  is  mapped  to  address  (2000 
- FFFF)  of  bank  7E  and  (0000  ~ FFFF)  of  bank  7F.  Therefore,  the  WRAM  (128K- 
Byte  total)  is  included  in  the  Super  NES  unit.  This  128k-Byte  (RAM  CD,  RAM  ©)  is 
one  consecutive  memory  and  can  be  accessed  from  the  B - Bus  address.  The  ad- 
dress “2000  ~ 5FFF”  of  bank  “00  ~ 3F”  and  “80  - BF”  are  reserved  as  a register 
area  of  the  S-PPU,  DMA,  etc.  Because  this  basically  is  reserved  as  a common 
bank  area,  the  S-PPU  and  DMA  register  can  be  accessed  from  any  bank  above. 


(NCL  PG  36) 


Figure  2-21-1  Super  NES  CPU  Memory  Map 


SNES  DEVELOPMENT  MANUAL 


(NCL  PC  37) 


2-21-2 


Figure  2-21-2  Super  NES  Memory  Map  (Mode  20) 


CPU  CLOCK  AND  ADDRESS  MAP 


2-21-3 


Figure  2-21-3  Super  NES  Memory  Map  (Mode  21) 


2-21-4 


the  need  for  the  high  speed  mode  in  the  submission  form. 


Figure  2-21  -4  Super  NES  Memory  Map  (Mode  25,  ROM  Size  Greater  than  32  Mbits  only) 


CPU  CLOCK  AND  ADDRESS  MAP 


2-21-5 


SNES  DEVELOPMENT  MANUAL 


Chapter  22.  Super  NES  Functional  Operation 

This  chapter  provides  the  user  with  a basic  understanding  of  the  functional  purpose  for 
each  of  the  major  components  of  the  Super  NES  control  deck.  Refer  to  the  Super  NES 
Functional  Block  Diagram  (opposite  page)  while  reading  the  following  paragraphs. 

22.1  SUPER  NES  CPU 

This  is  the  Central  Processing  Unit  for  the  Super  NES.  It  coordinates  all  func- 
tions of  the  Super  NES  control  deck  and  peripheral  devices  which  are  attached 
to  the  Super  NES. 

22.2  SUPER  NES  PPU1  AND  PPU2 

These  2 units  work  together  as  the  Picture  Processing  Unit  for  the  Super  NES. 
Pictures  are  generated  for  display  based  upon  control  inputs  from  the  Super 
NES  CPU.  In  general,  PPU1  is  used  to  generate  background  character  data,  ro- 
tation, and  scaling;  while  PPU2  performs  special  effects  like  windows,  mosaic, 
and  fades. 

22.3  SUPER  NES  WRAM 

The  work  RAM  (WRAM)  is  a custom  128K  x 8 bit  RAM  used  by  the  Super  NES 
CPU  for  data  storage.  Direct  Memory  Addressing  (DMA)  can  be  used  by  the  Su- 
per NES  CPU  for  rapid  bulk  transfer  of  data. 

22.4  VRAM 

The  VRAM  is  composed  of  2 - 32K  x 8 bit  S-RAMs.  This  unit  is  used  by  PPU1  to 
store  background  character  data  until  needed  for  display. 

22.5  AUDIO  PROCESSING  UNIT  (APU) 

The  Audio  Processing  Unit  performs  all  sound  functions  for  the  Super  NES  and 
is  composed  of  the  following  units. 

22.5.1  SOUND  CPU 

The  Sound  CPU  is  the  central  processing  unit  for  the  Super  NES  Audio 
Processing  Unit.  It  controls  sound  functions  much  in  the  same  way  that 
the  Super  NES  CPU  controls  functions  of  the  Super  NES. 

22.5.2  SOUND  DSP 

The  DSP  has  8 channels  of  pulse  code  modulated  (PCM)  sound,  a 
noise  generator,  echo,  sweep,  envelope,  and  other  circuits  to  repro- 
duce tone  qualities  from  RAM  data. 


2-22-1 


CIC0~3|  CIC 


SUPER  NES  FUNCTIONAL  OPERATION 


Figure  2-22-1  Super  NES  Functional  Block  Diagram 


2-22-2 


SUPER  NES  BLOCK  DIAGRAM 


SNES  DEVELOPMENT  MANUAL 


] 


22.5.3  SOUND  RAM 

The  Sound  RAM  is  composed  of  2-32Kx8  bit  SRAMs.  Program  and 
tone  data  are  loaded  from  the  game  pak  to  the  sound  RAM  by  the 
Sound  CPU.  The  RAM  is  time  shared  by  the  Sound  CPU  and  DSP. 

22.5.4  D/A  CONVERTER 

Converts  the  digitized  sound  to  an  analog  signal  which  is  filtered  and 
amplified  to  produce  the  L+R  (mono)  output  through  the  RF  Modulator 
and  L,R  (stereo)  outputs  through  the  multi-out  connector. 


2-22-3 


SYSTEM  FLOWCHART 


Chapter  23.  System  Flowchart 


FORCED 

BLANK 


(NCL  PG  40) 


2-23-1 


SYSTEM  FLOWCHART 


(From  Sheet  2) 


Display 

Period 


V-Blank 

Period 


(NCL  PG  42) 


2-23-3 


SNES  DEVELOPMENT  MANUAL 


Chapter  24.  Programming  Cautions 


24.1  CAUTION  #1 


Registers  <210DH>  - <21 14H>  and  <21 1BH>  ~ <2120H>  must  be  accessed  in 
the  order  of  Low  and  High  twice  (Read  Twice  or  Write  Twice).  If  it  is  not  known 
whether  the  next  access  should  be  low  or  high,  initialize  as  follows: 

OAM,  CGRAM,  VRAM  Set  the  address  again. 

Other  Registers  (Write)  The  lower  data  should  be  written  more 

than  one  time,  and  the  higher  data 
should  be  written. 

HA/  Counter  Read  The  H/V  counter  will  be  initialized  when 

the  status  register  <213FH>  is  read.  The 
data  should  be  read  in  the  order  of  Low 
and  High. 


24.2  CAUTION  #2 


for  the  register  is  as  follows: 


The  period  which  can  be  accessed 

V-RAM,  OAM 
CG-RAM 

Other  Register  (Write) 

Other  Register  (Read) 


Forced  Blank  or  V-Blank  period  only. 
Forced  Blank,  V-Blank  or  H-Blank  period 
only. 

All  period  (however,  when  writing  the 
data,  the  picture  may  not  be  displayed 
properly). 

All  period  (However,  the  data  which  may 
be  changed  during  display  period  may 
not  be  read  properly). 


24.3  CAUTION  #3 

The  address  space  for  the  V-RAM  is  64K-word  (1  word  = 16-bit)  maximum.  32K- 
word  memory  is  installed  in  the  Super  NES  unit. 

24.4  CAUTION  #4 

When  the  V-RAM  is  accessed  from  the  CPU,  the  address  counter  will  be  in- 
creased automatically.  For  the  V-RAM  increment  mode,  please  use  the  register 
mode  designated  by  the  instruction. 


(NCL  PC  43) 


2-24-1 


PROGRAMMING  CAUTIONS 


24.5  CAUTION  #5 

When  the  V-RAM  is  read  continuously,  the  first  address  will  not  be  incremented 
once  the  V-RAM  data  has  been  stored.  The  first  address  should  be  read  as 
dummy  data  on  subsequent  passes. 

24.6  CAUTION  #6 

The  top  color  data  of  each  CG  color  data  palette  is  transparent.  Because  trans- 
parent is  a color  which  is  not  displayed,  any  color  can  be  set.  The  color  data  of 
CG  address  (00H)  is  normally  black  (background). 

24.7  CAUTION  #7 

Even  though  9-bits  are  provided  as  the  OAM  H-position,  the  value  (100H)  must 
not  be  used. 

24.8  CAUTION  #8 

Before  processing  the  controller  keys,  verify  which  devices  are  currently  connect- 
ed to  the  controller  ports.  The  valid  identification  codes  are: 

• Standard  Controller  OOOOB 

• Super  NES  Mouse  0001 B 

•Super  Scope  1111 B 

These  codes  may  be  found  in  bits  D3  ~ DO  of  registers  <421 8H>  and  <421  AH>. 
If  the  standard  controller  is  used  for  the  game,  inputs  should  be  ignored  whenev- 
er the  ID  code  is  not  OOOOB. 

24.9  CAUTION  #9 

The  initial  value  of  the  work  RAM  in  the  main  computer  is  not  set  when  power  is 
applied  to  the  computer.  Programming  should  be  done  in  such  a way  that  no  er- 
rors occur  when  the  data  is  indeterministic.  The  initial  value  is  different  depend- 
ing upon  the  computer  used.  Initialize  the  entire  RAM  area  when,  for  example,  it 
has  been  programmed  under  the  misconception  that  the  data  is  a fixed  value, 
00*FF. 

24.10  CAUTION  #10 

When  using  the  battery  back-up  SRAM,  avoid  program  errors  due  to  data  loss. 
The  CPU  may  crash  if  the  user  hits  the  control  deck  when  the  game  pak  is  in 
use,  if  the  game  pak  is  not  inserted  properly,  or  if  the  game  pak  connector  is 
dirty.  Data  loss  may  be  unavoidable  in  some  cases.  Before  reusing  SRAM  data, 
determine  if  the  data  is  recoverable.  One  method  of  detection  is  to  save  the  data 
in  several  areas  of  the  SRAM  and  calculate  the  check  sums  of  each  area.  Be- 
fore utilizing  any  data  in  the  SRAM,  the  program  must  compare  each  of  the 
check  sums.  If  the  check  sums  are  not  equal,  the  data  is  corrupted. 

(NCL  PC  43) 


2-24-2 


SNES  DEVELOPMENT  MANUAL 

r 


24.11  CAUTION  #11 

In  addition  to  using  a check  code  to  check  a hot/cold  start,  determine  if  the  con- 
tent of  the  work  RAM  used  is  correct  after  the  reset.  Data  in  work  RAM  is  lost 
gradually  after  the  power  is  turned  off.  The  speed  at  which  data  is  lost  differs  ac- 
cording to  the  area.  If  the  device  is  turned  on  immediately  after  it  has  been 
turned  off,  the  area  that  is  checked  for  hot/cold  start  code  may  contain  the  origi- 
nal data.  This  does  not  mean  that  the  entire  data  have  been  recovered.  Guide- 
lines for  prevention  of  data  loss  are  the  same  as  those  for  the  previous  caution. 

24.12  CAUTION  #12 

When  executing  critical  commands  using  the  controller  keys,  such  as;  modify, 
erase  data,  or  software  reset,  use  all  16  bits  of  data  including  the  input  device’s 
signature.  Corrupt  data  may  be  sent  by  the  controller  if  the  controller  is  un- 
plugged during  a game.  When  the  computer  is  reset  using  start,  select,  L,  and  R 
controller  data  simultaneously,  verify  that: 

• The  start,  select,  L,  and  R are  pressed, 

• No  other  keys  are  pressed,  and 

• The  signature  data  is  0000. 

In  other  words,  check  that  the  key  data  is  3030H. 

24.13  CAUTION  #13 

Do  not  place  critical  game  characters  within  two  characters  of  the  perimeter  of 
the  display  screen  area.  This  area  of  the  television  varies  from  one  brand  or 
model  to  the  next.  The  Super  NES  may  not  be  able  to  display  characters  in 
some  areas  if  programmed  too  close  to  the  edge  of  the  screen.  Critical  game 
characters  include  score  data  and  various  parameters. 

24.14  CAUTION  #14 

Ensure  that  the  program  clears  the  emulation  bit  on  reset  or  start-up  before  exe- 
cuting 65816  instructions  (i.e.,  JMP  $808007).  This  is  demonstrated  in  the  pro- 
gramming example,  below: 

Example: 

RESET  ; Reset  vector 

SEI  ;Disable  interrupt 

CLC  ;Clear  carry 

XCE  ;Exchange  carry  with  E bit,  now  in  65816  mode 

JMP  $808009  ;Example  65816  instruction 


2-24-3 


PROGRAMMING  CAUTIONS 


24.15  CAUTION  #15 

When  utilizing  the  high  speed  mode  (3.58MHz),  perform  a dummy  jump  at  the 
start  of  every  vector  to  change  the  Program  Bank  Register  to  the  upper  banks 
($80  or  above).  Refer  to  the  following  program  example. 

Example: 

ORG  $808000 

RESET 

SEI 

CLC 

XCE 

JMP  -RESETFAST  ;Dummy  jump  to  change  PBR 
RESETFAST  ;RESETFAST  belongs  to  bank  $80 


NMI 

JMP 

NMI  FAST  ... 


-NMIFAST 


24.16  CAUTION  #16 

When  restarting  controller  read  after  it  has  been  temporarily  disabled,  the  user 
program  should  confirm  that  the  buttons  have  been  released  before  accepting 
the  button  inputs. 

Some  licensed  controllers  latch  the  last  data  which  was  received  after  disabling 
controller  read.  This  data  is  held  for  about  3 fields  (50  msec)  into  the  next  con- 
troller read  sequence.  This  performance  as  compared  to  Nintendo’s  standard 
controller  performance  is  demonstrated  in  the  table  below. 


User 

Operation 


No 

Operation 


‘B”  Button 


No 

Operation 


‘A”  Button 


Nintendo 

Controller 

Output 


B B 


N/A 


Output  of 
Some 
Licensed 
Controllers 


B 


B 


N/A 


B 


B 


B 


Controller 

Read 


Ensble 


Disable 


Enable 


Note:  1 


ield  (16.6  msec) 


2-24-4 


SNES  DEVELOPMENT  MANUAL 


[ 


For  instance,  if  the  software  is  programmed  as  follows; 

1 . Enter  the  room  when  “B”  button  is  pressed. 

2.  Disable  controller  read  while  changing  screen  data. 

3.  The  room  appears  and  enable  controller  read. 

4.  Exit  the  room  when  “B”  button  is  pressed. 

the  player  will  immediately  exit  the  room. 

This  problem  can  be  resolved  in  2 different  ways,  as  described  below. 

24.16.1  EDGE  DETECTION 

If  “edge  detection”  is  used  for  processing  controller  data  instead  of 
“level  detection”,  the  above  problem  can  be  avoided.  The  fol- 
lowing sample  program  illustrates  edge  detection.  The  differ- 
ence between  controller  (Cont)  and  trigger  (Trig)  data  in  the 
sample  program  is  shown  in  the  table  below. 


Cont 

1 

1 

0 

0 

0 

0 

1 

1 

1 

1 

0 

0 

Trig 

0 

0 

0 

1 

0 

0 

0 

0 

0 

0 

0 

0 

1 

0 

0 

0 

0 

0 

Note:  0 = Off 
1 = On 


2-24-5 


PROGRAMMING  CAUTIONS 


(SAMPLE  PROGRAM) 

1 ! 

RAM  Definition 

Conti  L 

ds 

1 

Controller  #1  data  low  byte 

Conti  H 

ds 

1 

Controller  #1  data  high  byte 

Cont2L 

ds 

1 

Controller  #2  data  low  byte 

Cont2H 

ds 

1 

Controller  #2  data  high  byte 

TrigIL 

ds 

1 

Trigger  data  of  controller  #1 

TrigIH 

ds 

1 

Trig2L 

ds 

1 

Trigger  data  of  controller  #2 

Trig2H 

ds 

1 

> i 

Read  Controller 

j 

RdCont; 

push 

a8 

Accumulator  8-bit 

RdCont_Wait1 

LDA 

HVBJoy 

<421 2> 

AND 

#%00000001 

Wait  JOY-C  Enable  : D0=0 

BEQ 

RdCont_Wait1 

RdCont_Wait2 

LDA 

HVBJoy 

AND 

#%00000001 

BNE 

RdCont_Wait2 

a16 

Accumulator  16-bit 

i16 

Index  16-bit 

RdCont_Cont1 

LDY 

Conti  L 

Keep  last  data  in  “IY” 

LDA 

JoylL 

<421 8>  (Conti -L) 

STA 

Conti  L 

Store  new  controller  data 

TYA 

<edge  detection> 

EOR 

Conti  L 

AND 

Conti  L 

STA 

TrigIL 

Store  trigger  data 

RdCont_Cont2 

LDY 

Cont2L 

Keep  last  data  in  “IY” 

LDA 

Joy2L 

<421  AH>  (Cont2-L) 

STA 

Cont2L 

Store  new  controller  data 

TYA 

<edge  detection> 

EOR 

Cont2L 

AND 

Cont2L 

STA 

Trig2L  ; 

; Store  trigger  data 

pop 

RTS 

2-24-6 


SNES  DEVELOPMENT  MANUAL 


24.16.2  ALTERNATE  METHOD 

The  problem  may  be  avoided  by  ignoring  controller  data  for  about  3 
fields,  after  restarting  controller  read.  Since  programming  becomes 
very  complicated,  increasing  the  risk  of  program  bugs,  this  method  is 
not  recommended. 

If  controller  read  is  disabled  for  1 ~2  fields,  the  consumer  cannot  press 
a button  quickly  enough  to  cause  a problem.  This  configuration  is  il- 
lustrated in  the  table  below. 


User 

Operation 

No 

Operation 

“B”  Button 

No 

Operation 

1 

“A” 

Button 

Nintendo 

Controller 

Output 

i 

i 

i 

B 

B 

N/A 

B 

B 

i 

i 

i 

i 

i 

i 

H 

H 

Output  of 
Some 
Licensed 
Controllers 

1 

B 

N/A 

B 

B 

1 

1 

1 

1 

1 

1 

A 

A 

Controller 

Read 

Disable 

- — — ■ — ■ — ■ — ■ — ■ — ■ — ( 
Enable 

Note:  1 1 

ield  (16.6  msec) 

2-24-7 


PROGRAMMING  CAUTIONS 


THIS  PAGE  INTENTIONALLY 
LEFT  BLANK 


2-24-8 


SNES  DEVELOPMENT  MANUAL 


3 


Chapter  25.  Documented  Problems 

The  following  paragraphs  describe  system  problems  which  have  been  identified  and  pro- 
vides solutions  for  the  problems  listed. 

25.1  PROBLEM  1 

25.1.1  SYMPTOM 

If  H-DMA  starts  at  about  the  same  time  that  General  Purpose  DMA  finish- 
es, sometimes  the  CPU  will  cease  to  operate  properly  or  H-DMA  will  not  be 
correctly  implemented  (S-CPU  ver.  1). 

This  could  happen  if  General  Purpose  DMA  finishes  during  the  first  2.24  (is 
of  the  H - Blank  period  on  lines  0 - 224  (239),  while  H-DMA  is  being  used.  It 
can  also  happen  at  the  beginning  of  line  0,  as  well.  & 

% The  real  time  trace  function  of  the  ICE  can  be  utilized  to  confirm  the  tim- 
ing. 

25.1.2  SOLUTION 

This  problem  will  not  happen  if  General  Purpose  DMA  is  used  only  during 
V - Blank  or  if  H-DMA  starts  in  the  middle  of  data  transfer  of  General  Pur- 
pose DMA.  It  does  not  happen  if  H-DMA  is  not  being  used. 

This  problem  can  also  be  avoided  by  adjusting  the  time  at  which  General 
Purpose  DMA  begins  and/or  decreasing  the  number  of  bytes  transferred. 
The  H and  V count  timers  can  be  utilized  to  determine  the  start  time  of 
General  Purpose  DMA.  One  line  takes  63.5  |is  and  the  value  of  one  count 
on  the  H count  timer  is  equivalent  to  0.186  jlls. 

The  end  timing  of  the  General  Purpose  DMA  changes  depending  on  the 
amount  of  transferred  data  of  H-DMA  which  happens  in  the  middle  of  data 
transfer  of  the  General  Purpose  DMA. 


When  the  problem  occurs: 


General  Purpose 
DMA  Starts  >j 

General  Purpose 
DMA  Ends > 

i > \ 

/ 

CPU 

HDMA 

CPU 

General 

Purpose 

DMA 

HDMA 

General 1 K3eneral 
Purpose  Purpose 
DMA  * * DMA 

HDMA 

General  \ 
Purpose  \ 
DMA  / 

' HDMA  CPU 

Whe 

Gene 

DMA 

Li RQ  K lie  J 

<■  < 7“T 

in  avoiding  th 

;ral  Purpose 
Starts  

e problem: 

1 

General  Purpose 
DMA  Ends  > 

CPU 

HDMA 

CPU 

General 

Purpose 

DMA 

HDMA 

General 1 K3eneral 
Purpose  Purpose 
DMA  . . DMA 

C t — — — 

HDMA 

General 

Purpose 

DMA 

CPU 

1 HDMA  CPU 

(NCL  PC  43a) 


2-25-1 


DOCUMENTED  PROBLEMS 


25.2  PROBLEM  2 

25.2.1  SYMPTOM 

When  the  size  of  OBJ  0 is  16  x 16,  32  x 32,  or  64  x 64,  and  its  horizontal 
position  is  0 through  255,  and  there  are  other  objects  present  with  negative 
horizontal  positions  (they  are  not  displayed  on  the  screen),  the  Time  Over 
Flag  will  become  1 (S-PPU1  ver.  1). 

25.2.2  SOLUTION 

The  cause  is  being  examined. 


( NCL  PG  43b) 


2-25-2 


SNES  DEVELOPMENT  MANUAL 


Chapter  26.  Register  Clear  (Initial  Settings) 

(This  is  a recommended  setting  for  beginners.  It  is  not  necessary  to  perform  register 
clear  exactly  this  way.  However,  the  register  status  is  not  stable  when  power  is  turned  on 
and  initial  settings  must  be  performed). 


ADDRESS  (HEX) 

DATA  (HEX) 

<2100> 

8 F (Forced  Blank) 

<21 01 > 

0 0 

<2102> 

00 

<2103> 

00 

<2104> 

(OAM  Data) 

<2105> 

00 

<2106> 

00 

<2107> 

00 

<2108> 

00 

<2109> 

00 

<210A> 

00 

<210B> 

00 

<210C> 

00 

(Low)  (High) 

<210D> 

00  00 

<210E> 

00  00 

<210F> 

00  00 

<21 1 0> 

00  00 

<21 1 1> 

00  00 

<21 1 2> 

00  00 

<21 13> 

00  00 

<21 14> 

00  00 

<21 1 5> 

80 

<21 1 6> 

00 

<2117> 

00 

<21 1 8> 

(VRAM  Data) 

<21 1 9> 

(VRAM  Data) 

<21 1 A> 

00 

<21 1 B> 

00  0 1 

<211C> 

00  00 

<211D> 

00  00 

<21 1 E> 

00  0 1 

<21 1 F> 

00  00 

ADDRESS  (HEX) 

DATA  (HEX) 

<2120> 

00  00 

<21 21 > 

00 

<2122> 

(CG  Data) 

<2123> 

00 

<2124> 

00 

<2125> 

00 

<2126> 

00 

<2127> 

00 

<2128> 

00 

<2129> 

00 

<212A> 

00 

<212B> 

00 

<212C> 

00 

<212D> 

00 

<212E> 

00 

<2130> 

30 

<2131 > 

00 

<2132> 

E0 

<2133> 

00 

<4200> 

00 

<4201 > 

F F 

<4202> 

00 

<4203> 

00 

<4204> 

00 

<4205 > 

00 

<4206> 

00 

<4207> 

00 

<4208> 

00 

<4209> 

00 

<420A> 

00 

<420B> 

00 

<420C> 

00 

<420D> 

00 

(NCL  PG  44) 


2-26-1 


PPU  REGISTERS 


Chapter  27.  PPU  Registers 

ADDRESS:  2100H 

NAME:  INIDISP 

CONTENTS:  INITIAL  SETTINGS  FOR  SCREEN 


D7 

BLANK 

ING 


D2  D1  DO 
FADE  IN/OUT  (0~15) 


2100H 


BLANKING:  FORCED  BLANKING 


SCREEN  BRIGHTNESS:  Determine 
the  screen  brightness  (16-stages) 


D 


F3 

F2 

F1 

F0 

BRIGHTNESS 

1 

1 

1 

1 

BRIGHT 

1 

1 

1 

0 

l 

0 

0 

0 

0 

i 

DARK 

NON-BLANKING 

BLANKING 


ADDRESS:  2101H 

NAME:  OBJSEL 

CONTENTS:  OBJECT  SIZE  & OBJECT  DATA  AREA  DESIGNATION 
D7  D6  D5  D4  D3  D2  D1  DO 

OBJ  | SIZE  SELECT  I OBJ  | OBJ 

NAME  SELECT  NAME  BASE  ADDR 
S2  I SI  I SO  N1  I NO  BA-2  I BA-1  I BA-0 


2101H 


For  Expansion  '-►OBJECT  BASE  ADDRESS  (UPPER 
Norm  = 0 3 BIT) 

Designate  the  segment  (8K-word/ 
segment)  address  which  the  OBJ  data 
is  stored  in  the  VRAM.  (See  pages  A-1 
and  A-2) 

— ►OBJECT  DATA  AREA  SELECT 

The  upper  4K-word  out  of  the  area  (8K-word)  designated  by 
“Object  Base  Address”  is  assigned  as  the  Base  Area,  and 
the  area  of  the  lower  4K-word  combined  with  its  Base  Area 
can  be  selected.  (See  pages  A-1  and  A-2) 

-OBJECT  SIZE:  DESIGNATE  OBJECT  SIZE  (See  pages  A-3  and  A-4) 


1 OBJ  SIZE  ! 

SI 

so 

mafia 

uu&a 

0 

0 

8 DOT 

16  DOT 

0 

1 

8 DOT 

32  DOT 

1 

0 

8 DOT 

64  DOT 

1 

1 

16  DOT 

32  DOT 

0 

0 

16  DOT 

64  DOT 

0 

1 

32  DOT 

64  DOT 

2-27-1 


SNES  DEVELOPMENT  MANUAL 


ADDRESS:  2102H/2103H 

NAME:  OAMADDL  / OAMADDH 

CONTENTS:  ADDRESS  FOR  ACCESSING  OAM  (OBJECT  ATTRIBUTE  MEMORY) 

ADDRESS 

D7  D6  D5  D4  D3  D2  D1  DO 

2102H 


2103H 


• This  is  the  INITIAL  ADDRESS  to  be  set  in  advance  when  reading  from  or  writing 
to  the  OAM. 

• To  set  the  OBJ  priority  order,  write  “1”  to  D7  (OAM  Priority  Rotation)  of  register 
<21 03H>  and  set  the  highest  priority  OBJ  number  (0  ~ 1 27)  to  D1  ~ D7  of  register 
<2102H>  (refer  to  “Priority  Order  Shifting”). 

• The  address  which  has  been  set  just  before  every  field  (beginning  with  V-BLANK) 
will  be  set  again  to  registers  <2102H>  <2103H>  automatically.  However,  the  ad- 
dress cannot  be  set  automatically  during  Forced  Blank  period. 

ADDRESS:  2104H 

NAME:  OAM  DATA 

CONTENTS:  DATA  FOR  OAM  WRITE 

D7  D6  D5  D4  D3  D2  D1  DO 


2104H 


This  is  the  OAM  data  to  be  written  to  any  address  of  the  OAM  (refer  to  page  A-3). 

After  register  <2102H>  or  <2103H>  is  accessed,  the  data  must  be  written  in  the  or- 
der of  Lower  8-bit  and  Upper  8-bit  of  register  <2104H>.  The  OAM  address  will  be 
increased  automatically  when  the  OAM  data  is  written  in  the  order  of  LOW  to  HIGH. 

The  data  can  be  written  only  during  a V-BLANK  or  FORCED  BLANK  period. 


(NCL  PC  47) 


2-27-2 


PPU  REGISTERS 


ADDRESS:  2105H 

NAME:  BG  MODE 

CONTENTS:  BG  MODE  & CHARACTER  SIZE  SETTINGS 


D6  D5 
BG  SIZE 


! D1 
BG  MODE 


2105H 


BG  4 BG  3 


BG  1 PRIO. 


!-►  BG  SCREEN  MODE  SELECT: 
See  BG  Screen  Mode  Summary 
(page  A-5) 

1 — ►HIGHEST  PRIORITY  DESIGNATION  FOR  BG-3 
Make  BG3  highest  priority  during  BG  Mode  0 or  1 
(page  A- 19) 

□ 0:  OFF 
1:  ON 

BG  SIZE  DESIGNATION:  Designate  the  size  for  each  BG  Character 
(pages  A-21  and  A-22) 

□ 0:  8X8  DOT/CHARACTER 

1 : 16X16  DOT/CHARACTER 

16  DOT 


16  DOT 


00  01  In  case  CHR  NAME  of  SC  data  is  “00H”: 


10  11. 


• CHARACTER  NAME  (HEX) 


ADDRESS:  2106H 

NAME:  MOSAIC 

CONTENTS:  SIZE  & SCREEN  DESIGNATION  FOR  MOSAIC  DISPLAY 


D6  D5 
MOSAIC  SIZE 


D3  D2  D1  DO 
MOSAIC  ENABLE 

3G4  I BG3  I BG2  I BG1 


2106H 


MOSAIC  MODE  SELECT: 

ON/OFF  for  Mosaic  Mode  of  each  BG 

□ 0:  OFF 
1:  ON 

MOSAIC  MODE  SIZE  DESIGNATION:  DESIGNATE  MOSAIC  MODE  SIZE 
(page  A-7) 

256  MODE 51 2 MODE  (H  X V) 


123  EE  EE  Eil! 


1 X 1 DOT 
2X2  DOT 
3X3  DOT 


1 0 15X15  DO 

1 1 16X16  DO 


SIZE  ( ):  NON-INTERLACE 

0 

0 0 

0 

2X2  DOT  (2  X 1 DOT) 

0 

0 0 

1 

4X4  DOT  (4X2  DOT) 

0 

0 1 

• 

• 

• 

0 

6X6  DOT  (6X3  DOT) 

• 

• 

• 

1 

1 1 

0 

30X30  DOT  (30X15  DOT) 

1 

1 1 

1 

32X32  DOT  (32X16  DOT) 

2-27-3 


SNES  DEVELOPMENT  MANUAL 


l 


1 


ADDRESS:  2107H  / 2108H  / 2109H  / 210AH 

NAME:  BG 1 SC / BG2SC / BG3SC / BG4SC 

CONTENTS:  ADDRESS  FOR  STORING  SC-DATA  OF  EACH  BG  & SC  SIZE  DESIGNATION 
(MODE  0 ~ 6) 


D7 

D6 

D5  D4  D3 

D2 

D1 

DO 

BG1 

SC  BASE  ADDRESS 

BG1 

SC  SIZE 

A5 

1 A4  I 

1 A3  1 A2  I A1  I 

AO 

SI 

1 SO 

BG2 

SC  BASE  ADDRESS 

BG2  SC  SIZE 

A5 

]_A4_J 

1 A3  I A2  | A1  | 

AO 

SI  1 SO 

2108  H 


BG3 

SC  BASE  ADDRESS 

BG3  SC  SIZE 

A5 

1 A4  | 

A3  1 A2  1 A1  1 

AO 

SI  1 SO 

BG4 

SC  BASE  ADDRESS 

BG4 

SC  SIZE 

A5 

1 A4  | 

A3  1 A2  I A1  ! 

AO 

SI 

1 SO 

2109H 


21 0A  H 


CREEN  SIZE  DESIGNATION 


(pages  A-21  and  A-22) 
Designate  Background  Screen 
Size 


L— ► BACKGROUND  SCREEN  BASE  ADDRESS  (UPPER  6-BIT) 
Designate  the  segment  in  which  BG-SC  data  in  the  VRAM  is 
stored.  (1 K-WORD/SEGMENT) 


SCREEN  SIZE  & SCREEN  REPETITION 


2-27-4 


PPU  REGISTERS 


ADDRESS:  210BH/210CH 

NAME:  BG12NBA  / BG34NBA 

CONTENTS:  BG  CHARACTER  DATA  AREA  DESIGNATION 


Designate  the  segment  address  in  the  VRAM  in  which  BG  character  data 
is  stored.  (4K-WORD/SEGMENT) 


ADDRESS:  210DH/210EH 

NAME:  BG1H0FS  / BG1V0FS 

CONTENTS:  H/V  SCROLL  VALUE  DESIGNATION  FOR  BG-1 

D7  D6  D5  D4  D3  D2  D1  DO 

BG  1 H-OFFSET  (LOW,  HIGH) 

(H012)  (HO1 1)  (H010)  (H09)  (H08)  210DH 

HO  7 | HO  6 I HO  5 I HO  4 I HO  3 I HO  2 I HO  1 I HO  0 


210EH 


10-Bit  maximum  (0  ~ 1023)  can  be  designated  for  HA/  scroll  value.  (The  size  of 
13-Bit  maximum  {-4096  ~ 4095}  can  be  designated  in  MODE  -7). 

(pages  A-10  and  A-11) 

By  writing  to  the  register  twice,  the  data  can  be  set  in  the  order  of  Low  and  High. 


(NCL  PC  50) 


2-27-5 


SNES  DEVELOPMENT  MANUAL 

nzm 


ADDRESS:  210FH  / 21 10  H / 21 1 1 H / 2112  H / 2113  H / 21 14  H 

NAME:  BG2H0FS  / BG2V0FS  / BG3H0FS  / BG3V0FS  / BG4H0FS  / BG4V0FS 

CONTENTS:  HA/  SCROLL  VALUE  DESIGNATION  FOR  BG-2,  3,  4 


210FH 

2111H 

2113H 


2110H 

2112H 

2114H 


10-Bit  maximum  (0  ~ 1023)  of  the  H N scroll  value  can  be  designated 
(page  A-10) 

By  writing  to  the  register  twice,  the  data  can  be  set  in  the  order  of  Low- 
and  High. 


D7  D6  D5  D4  D3  D2  D1  DO 


HO  7 | 

BG  H-OFFSET  (LOW,  HIGH) 
HO  6 | HO  5 | HO  4 | HO  3 | HO  2 | 

(HO  9) 

HOI  | 

(HO  8) 
H0  0 

V07  | 

BG  V-OFFSET  (LOW,  HIGH) 
VO  6 | VO  5 | VO  4 | VO  3 | VO  2 | 

(VO  9) 
VO  1 | 

(VO  8) 
VOO 

ADDRESS:  2115H 

NAME:  VMAINC 

CONTENTS:  VRAM  ADDRESS  INCREMENT  VALUE  DESIGNATION 


D7 

D6 

D5 

D4 

D3 

D2 

D1 

DO 

H/L 

V-RAM  ADDRESS 
FULL  GRAPHIC 

SEQUENCE  MODE 
SC  INCREMENT 

INC 

G1 

GO 

11 

12 

Designate  the  increment  value  for  the  VRAM 
address,  (page  A-8) 


G1 

GO 

mm 

10 

INCREMENT  VALUE 

0 

1 

0 

0 

Increment  by  8 (for  32  times)  (2-Bit  Formation) 

1 

0 

0 

0 

Increment  by  8 (for  64  times)  (4-Bit  Formation) 

1 

1 

0 

0 

Increment  by  8 (for  128  times)  (8-Bit  Formation) 

0 

0 

0 

0 

Address  Increments  1 BY  1 

0 

0 

0 

1 

Address  Increments  32  BY  32 

0 

0 

1 

0 

Address  Increments  128  BY  128 

0 

0 

1 

1 

Address  Increments  128  BY  128 

Designate  the  increment  timing  for  the  address 

0:  The  address  will  be  increased  after  the  data  has  been  written  to  register  <21 18H> 
or  the  data  has  been  read  from  register  <2139>. 


1 : The  address  will  be  increased  after  the  data  has  been  written  to  register  <21 19H> 
or  the  data  has  been  read  from  register  <213AH>. 


(NCL  PC  51) 


2-27-6 


PPU  REGISTERS 


ADDRESS:  2116H/2117H 

NAME:  VMADDL  / VMADDH 

CONTENTS:  ADDRESS  FOR  VRAM  READ  AND  WRITE 


D7 

D6 

D5  D4  D3  D2 

D1 

DO 

VRAM  ADDRESS  (LOW) 

A7  | 

1 A6 

1 A5  I A4  | A3  I A2  I 

1 A1 

I AO 

2116H 


VRAM  ADDRESS  (HIGH) 

A15  I A14  I A13  I A12  I All  I A10  I A9  I A8 


2117H 


This  is  the  initial  address  for  reading  from  the  VRAM  or  writing  to  the  VRAM. 


The  data  is  read  or  written  by  the  address  set  initially,  and  every  time  the  data  is 
read  or  written,  the  address  will  be  increased  automatically. 

The  value  to  be  increased  is  determined  by  “SC  INCREMENT”  of  register 
<2115H>  and  the  setting  value  of  the  “FULL  GRAPHIC.” 


ADDRESS:  2118H/2119H 

NAME:  VMDATAL  / VMDATAH 

CONTENTS:  DATA  FOR  VRAM  WRITE 


2118H 


2119H 


This  is  the  screen  data  and  character  data  (BG  & OBJ),  which  can  be  written  to 
any  address  in  the  VRAM. 


According  to  the  settings  of  register  <21 15H>  “H/L  INC,”  the  data  can  be  written 
to  the  VRAM  as  follows: 


D7  D6  D5  D4  D3  D2  D1  DO 
VRAM  DATA  (LOW) 

A7  I A6  I A5  1 A4  I A3  I A2  I A1  I AO 


VRAM  DATA  (HIGH) 

A15  1 A14  I A13  1 A12  I All  | A10  1 

A9 

1 A8 

H/L  INC 

WRITE  TO  REGISTER 

OPERATION 

0 

Write  to  <21 1 8H>  only 

The  data  is  written  to  lower  8-bit  of  the  VRAM  and 
the  address  will  be  increased  automatically. 

1 

Write  to  <2119H>  only 

The  data  is  written  to  upper  8-bit  of  the  VRAM  and 
the  address  will  be  increased  automatically. 

0 

Write  in  the  order  of 
<21 19H>  and  <2118H> 

When  the  data  is  set  in  the  order  of  upper  and  lower, 
the  address  will  be  increased. 

1 

Write  in  the  order  of 
<21 18H>  and  <2119H> 

When  the  data  is  set  in  the  order  of  lower  and  upper, 
the  address  will  be  increased 

NOTE:  The  data  can  be  written  only  during  V-BLANK  or  FORCED  BLANK  period. 

(NCL  PG  52) 


2-27-7 


SNES  DEVELOPMENT  MANUAL 


ADDRESS:  211  AH 

NAME:  M7SEL 

CONTENTS:  INITIAL  SETTING  IN  SCREEN  MODE-7 


D7 

D6 

D5 

D4 

D3 

D2 

D1 

DO 

SCREEN  OVER 

SCREEN  FLIP 

01 

| 00 

V 

J_H 

01 

00 

PROCESS  OUT  OF  AREA 

0 

0 

Screen  repetition  if  outside  of  screen  area 

1 

0 

Outside  of  the  screen  area  is  the  Back  Drop  Screen  in  single  color 

1 

1 

Character  #0  repetition  if  outside  of  screen  area 

(NCL  PG  53) 


2-27-8 


PPU  REGISTERS 


1 


ADDRESS:  211B  H / 211C  H / 211 D H / 21  IE  H / 211 F H / 2120  H 

NAME:  M7A  / M7B  / M7C  / M7D  / M7X  / M7Y 

CONTENTS:  ROTATION/ENLARGEMENT/REDUCTION  IN  MODE-7,  CENTER  COORDINATE 
SETTINGS  & MULTIPLICAND/MULTIPLIER  SETTINGS  OF  COMPLEMENTARY 
MULTIPLICATION 


211  BH 


211  CH 


211  DH 


211  EH 


The  8-bit  data  should  be  written  twice  in  the  order  of  lower  and  upper. 
Then,  the  parameter  of  rotation,  enlargement  and  reduction  should  be 
set  by  its  1 6-bit  data. 

The  value  down  to  a decimal  point  should  be  set  to  the  lower  8-bit.  The 
most  significant  bit  of  the  upper  8-bit  is  for  the  signed  bit.  (MP1 5 is  the 
signed  bit.  There  is  a decimal  point  between  M7  & M8.) 

FORMULA  FOR  ROTATION/ENLARGEMENT/REDUCTION  (Refer  to 
Rotation/Enlargement/Reduction  in  Appendix  A.). 


D7  D6  D5  D4  D3  D2  D1  DO 

MATRIX  PARAMETER  A (LOW,  HIGH) 

(MP15)  (MP14)  (MP13)  (MP12)  (MP11)  (MP10)  (MP9)  (MP8) 

MP  7 I MP  6 I MP  5 I MP  4 1 MP  3 I MP2|  MP 1 1 MPO 

MATRIX  PARAMETER  B (LOW,  HIGH) 

(MP15)  (MP14)  (MP13)  (MP12)  (MP11)  (MP10)  (MP9)  (MP8) 

MP  7 | MP  6 | MP  5 | MP 4 V MP3 | MP2|  MP 1 1 MPO 

MATRIX  PARAMETER  C (LOW,  HIGH) 

(MP15)  (MP14)  (MP13)  (MP12)  (MP11)  (MP10)  (MP9)  (MP8) 

MP  7 | MP  6 | MP  5 | MP  4 1 MP  3 | MP2|  MP 1 1 MPO 

MATRIX  PARAMETER  D (LOW,  HIGH) 

(MP15)  (MP14)  (MP13)  (MP12)  (MP11)  (MP10)  (MP9)  (MP8) 

MP  7 | MP  6 | MP  5 | MP4 1 MP3  | MP2|  MP 1 1 MPO 


*2 

A B 

X . -X 
1 0 

+ 

>c 
o , 

l 

CD 

i 

1 

A = cos yx  (1  / a),  B = sinyx  (1  / a),  C = -sinyx(1  / P),  D = cosyx(1  / (3) 
y:  Rotation  angle  a:  Reduction  Rates  for  X (H)  p:  Reduction  Rates  for  Y (v) 
X0  • Y0  : Center  Coordinate, X,  • Y, : Display  Coordinate, 

X2  • Y2 : Coordinate  Before  Calculation 


(NCL  PG  54) 


2-27-9 


SNES  DEVELOPMENT  MANUAL 


Set  the  value  of  “A”  to  the  register  <211BH>.  In  the  same  way,  set 
“B~D”  to  the  register  <21 1 CH>  ~ <21 1 EH>. 

The  complementary  multiplication  (16-bit  x 8-bit)  can  be  done  by  using 
registers  <211BH>  <211CH>.  When  setting  16-bit  data  to  register 
<211BH>  (must  be  written  twice)  and  8-bit  data  to  register  <211CH> 
(must  be  written  only  once),  the  multiplication  result  can  be  indicated 
rapidly  by  reading  registers  <2134H>  ~ <2136H>. 


D7 

D6  D5  D4  D3  D2 

D1 

DO 

X 7l 

CENTER  POSITION  X0  (LOW,  HIGH) 

(XI 2)  (XII)  (XI 0)  (X9) 

X6  I X5  I X4  I X3  1 X2  | XI  1 

(X8) 

XO 

Y7| 

CENTER  POSITION  Y0  (LOW,  HIGH) 
(Y12)  (Y11)  (Y10)  (Y9) 

Y6  | Y 5 1 Y 4 1 Y 3 1 Y2  I Y1  I 

(Y8) 

Y0 

The  center  coordinate  (X0  Y0)  for  Rotation/Enlargement/Reduction  can 
be  designated  by  this  register. 

The  coordinate  value  of  X0  & Y0  can  be  designated  by  13-bit  (comple- 
ment of  2). 

This  register  requires  that  the  lower  8-bit  set  first  and  the  upper  5-bit  is 
set.  Therefore,  13-bit  data  in  total  can  be  set. 


(NCL  PG  54) 


PPU  REGISTERS 


ADDRESS:  2121 H 

NAME:  CGADD 

CONTENTS:  ADDRESS  FOR  CG-RAM  READ  AND  WRITE 


D7 

D6 

D5 

D4 

D3 

D2 

D1 

DO 

CG  RAM 

ADDRESS 

A7 

1 A6 

1 A5 

1 A4  | 

A3  1 

A2  | 

1 A1 

! AO 

This  is  the  initial  address  for  reading  from  the  CG-RAM  or  writing 
to  the  CG-RAM. 

The  data  is  read  by  address  set  initially,  and  every  time  the  data 
is  read  or  written,  the  address  will  be  increased  automatically. 


ADDRESS:  2122H 

NAME:  CGDATA 

CONTENTS:  DATA  FOR  CG-RAM  WRITE 


D7  D6  D5  D4  D3  D2  D1  DO 


CG  RAM  DATA  (LOW,  HIGH) 

(D14) 

(D13)  (D12)  (Dll)  (DIO). 

(D9) 

(D8) 

D7 

I D6 

1 D5  I D4  | D3  1 D2  ! 

D1 

1 DO 

This  is  the  color  generator  data  to  be  written  at  any  address  of  the 
CG-RAM. 

The  mapping  of  BG1  ~ BG  4 and  OBJ  data  in  the  CG-RAM  will  be 
determined,  which  is  performed  by  every  mode  selected  by  “BG 
MODE”  of  register  <21 05H>.  (See  page  A-1 7) 

There  are  the  color  data  of  8 palettes  for  each  screen  of  BG1  ~ 
BG4.  The  palette  selection  is  determined  by  3-bit  of  the  SC  data 
“COLOR. "(Refer  to  page  A-10) 

Because  the  CG-RAM  data  is  15-bit/word,  it  is  necessary  to  set  low- 
er 8-bit  first  to  this  register  and  then  upper  7-bit  should  be  set.  When 
both  lower  and  upper  are  set,  the  address  will  be  increased  by  1 au- 
tomatically. 


NOTE:  After  the  address  is  set,  the  data  should  be  written  in  the  or- 
der of  low,  then  high.  This  is  similar  to  the  OAM  Data  register. 

NOTE:  The  data  can  be  written  only  during  H/V  BLANK  or  FORCED 
BLANK  period. 


(NCL  PG  55) 


2-27-11 


SNES  DEVELOPMENT  MANUAL 


I 


ADDRESS:  2123H  / 2124H  / 2125H 

NAME:  W1 2SEL/  W34SEL/  WOBJSEL 

CONTENTS:  WINDOW  MASK  SETTINGS  (BG1-BG4,  OBJ,  COLOR) 


D7  D6  D5 

D4 

D3  D2  D1 

DO 

BG2  WINDOW 
W2  EN  | IN/OUT |W1  EN 

| IN/OUT 

BG1  WINDOW 
W2  EN|  IN/OUT|W1  EN  | 

| IN/OUT 

2123H 


BG4  WINDOW 
W2  EN  | IN/OUT  | W1  EN|IN/OUT| 


BG3  WINDOW 

W2  ENj  IN/OUT|W1  EN  | IN/OUT 


2124H 


The  COLOR  WINDOW  is  a window  for  main  and  sub  screen.  (It  is  related  to  the  register 
<2130H>). 


ADDRESS:  2126H/ 2127H/ 2128H/ 2129H 

NAME:  WH0/WH1/  WH2/  WH3 

CONTENTS:  WINDOW  POSITION  DESIGNATION  (Refer  to  page  A-18) 


D7  D6  D5  D4  D3  D2  D1  DO 


WINDOW  H0/H1/H2/H3  POSITION 
P7  I P6  I P5  I P4  I P3  I P2  I PI  I PO 


2126H  WINDOW-1  LEFT 
2127H  POSITION 

DESIGNATION 

2128H 

2129H 


WINDOW  HO  POSITION  <2126H>:WINDOW-1Left  Position  Designation.  It  can  be  set  in  range  0 ~255 
WINDOW  HI  POSITION  <2127H>:WINDOW-1  Right  Position  Designation.  It  can  be  set  in  range  0 -255 
WINDOW  H2  POSITION  <2128H>:WINDOW-2  Left  Position  Designation.  It  can  be  set  in  range  0 r255 
WINDOW  H3  POSITION  <2129H>:WINDOW-2  Right  Position  Designation.  It  can  be  set  in  range  0 -255 


NOTE:  If  'LEFT  POSITION  SETTING  VALUE>  RIGHT  POSITION  VALUE”  is  assumed,  there  will 
be  no  range  of  the  window. 


(NCL  PC  56) 


2-27-12 


PPU  REGISTERS 


ADDRESS:  212AH/212BH 

NAME:  WBGLOG/  WOBJLOG 

CONTENTS:  MASK  LOGIC  SETTINGS  FOR  WINDOW-1  & 2 ON  EACH  SCREEN 


D7 

D6 

D5 

D4 

D3  D2 

D1 

DO 

WINDOW  LOGIC 

BG4 

BG3 

BG2 

BG1 

21 2 AH 

D1  1 

DO 

Lei 

1 DO  1 

D1  1 DO 

1 PI  1 

DO 

WINDOW  LOGIC 

Color  OBJ 

D1  | DO  | D1  | DO 


212BH 


WINDOW  LOGIC:  SET  MASK  LOGIC  FOR  WINDOW-1  & 2 

When  both  Window-1  and  Window-2  are  “IN,”  the  shaded  portion  will  be  masked  as  follows: 


NOTE:  “IN/OUT”  of  registers  <2123H>  <2124H>  <2125H>  becomes  the  “NOT  logic”  for  each 
Window-1  and  Window-2. 


(NCL  PG  57) 


SNES  DEVELOPMENT  MANUAL 


ADDRESS:  212CH 

NAME:  TM 

CONTENTS:  MAIN  SCREEN  DESIGNATION 


to  be  displayed  as  the  Main  Screen. 
Designate  the  screen  to  be  added  for  the 
screen  addition/subtraction  . 


0 : DISABLE 

1 : ENABLE 


ADDRESS:  212DH 

NAME:  TS 

CONTENTS:  SUB  SCREEN  DESIGNATION 


D7  D6  D5  D4  D3  D2  D1  DO 


Designate  the  screen  (BG1  ~ BG4,  OBJ) 
to  be  displayed  as  SUB-Screen. 
Designate  the  screen  to  be  added  for  the 
screen  addition/subtraction 


0 : DISABLE 

1 : ENABLE 


NOTE:  When  the  screen  addition/subtraction  is  functioning,  the  SUB  screen  is  a screen 
to  be  added  or  subtracted  against  the  MAIN  screen. 


(NCL  PC  58) 


2-27-14 


PPU  REGISTERS 


ADDRESS:  212EH 

NAME:  TMW 

CONTENTS:  WINDOW  MASK  DESIGNATION  FOR  MAIN  SCREEN 


MAIN  SCREEN: 


In  the  window  area  designated  by 
register  <2123H>  ~ <2129H>,  the 
screen  to  be  displayed  can  be 
designated,  which  is  selected  among 
the  Main  screen  designated  by 
register  <212CH>. 


0 : DISABLE 

1 : ENABLE 


ADDRESS:  212FH 

NAME:  TSW 

CONTENTS:  WINDOW  MASK  DESIGNATION  FOR  SUB  SCREEN 


SUB  SCREEN: 

In  the  window  area  designated  by 
register  <2123H>  ~ <2129H>,  the 
screen  to  be  displayed  can  be 
designated,  which  is  selected  among 
the  Sub  screen  designated  by 
register  <212DH>. 

i-  0 : DISABLE 
I—  1 : ENABLE 

NOTE:  When  the  screen  addition/subtraction  is  functioning,  the  SUB  screen  is  a screen 
to  be  added  or  subtracted  against  the  MAIN  screen. 


(NCL  PG  59) 


2-27-15 


SNES  DEVELOPMENT  MANUAL 


ADDRESS:  2130H 

NAME:  CGSWSEL 

CONTENTS:  INITIAL  SETTINGS  FOR  FIXED  COLOR  ADDITION  OR  SCREEN  ADDITION 


D7  D6  D5  D4 
COLOR  WINDOW  ON/OFF 
MAIN  SW  (A)  SUB  SW  (B) 

Ml  I MO  I SI  I SO 


D1  DO 

cc  addIdireci 

ENABLE SELEC1 


2130H 


DIRECT  SELECT  (Refer  to  p.  A-17): 

The  VRAM  data  (Color  & Character 
data)  become  the  color  data  directly. 
(Only  when  mode-3,  4 & 7 are 
selected.) 

r0  : DISABLE 
Li  : ENABLE 


-FIXED  COLOR 

ADDITION/SUBTRACTION  ENABLE: 

Designate  whether  2 kinds  of  the  data  should 
be  added/subtracted  from  each  other  or  not, 
which  are  the  fixed  color  set  by  register 
<21 32H>  and  the  color  data  which  is  set  to 
the  CGRAM. 


e: 


ADDITION/SUBTRACTION 
FOR  FIXED  COLOR 

ADDITION/SUBTRACTION 
FOR  SUB  SCREEN 


COLOR  WINDOW  ON/OFF  MAIN/SUB  SWITCH: 
When  the  Color  Window  is  functioning, 
the  assignment  of  the  window  area  for 
MAIN  and  SUB  screens  can  be  designated. 


FUNCTION 

ON  (All  the  time) 

ON  (Inside  window  only) 
ON  (Outside  window  only) 
OFF  (All  the  time) 


(NCL  PC  60) 


2-27-16 


ADDRESS:  2131H 

NAME:  CGADSUB 

CONTENTS:  ADDITION/SUBTRACTION  & SUBTRACTION  DESIGNATION  FOR  EACH  BG  SCREEN 
OBJ  & BACKGROUND  COLOR 


D7 

D6 

D5 

D4  D3 

D2  D1 

DO 

ADD 

1/2 

ADD  or  SUB  ENABLE 

SUB 

ENABLE 

i _ j 

backI 

OBJ  I BG4| 

BG3|  BG2| 

BG  1 

2131H 


T 

DATA 


COLOR  DATA  ADDITION/SUBTRACTION  ENABLE: 


Designate  the  color  data  of  BG1  ~ BG4,  OBJ,  or  Back  in 
the  main  screen  for  addition/subtraction  of  the  Sub  screen 
color  data  (or  fixed  color  data.) 


r0:DISABLE 

L- 1 : ENABLE  (Addition/Subtraction  function:  ON) 


Note:  When  OBJ  is  designated,  the  Addition/Subtraction 
function  is  available  only  when  the  OBJ  color  palette  is  4 
through  7. 


>-►  “1/2  OF  COLOR  DATA”  DESIGNATION: 

When  color  constant  addition/subtraction  or  screen  addition/ 
subtraction  is  performed,  designate  whether  the  RBG  result  in  the 
addition/subtraction  area  should  be  “1/2”  or  not.  The  back 
(color  constant)  area  on  the  Sub -screen,  will  not  become  “1/2” 

r0  : DISABLE 

Li  : ENABLE  (1/2  function:  ON) 


► COLOR  DATA  ADDITION/SUBTRACTION  SELECT: 

In  the  case  of  executing  screen 
addition/subtraction,  designate 
either  addition  or  subtraction  mode. 

r 0 : ADDITION  MODE  SELECT 
L 1 ; SUBTRACTION  MODE  SELECT 


(NCL  PC  60) 


SNES  DEVELOPMENT  MANUAL 


ADDRESS:  2132H 

NAME:  COLDATA 

CONTENTS:  FIXED  COLOR  DATA  FOR  FIXED  COLOR  ADDITION/SUBTRACTION 


D7  D6  D5  D4  D3  D2  D1  DO 

2132H 

v 

COLOR  CONSTANT  DATA: 

Set  the  color  constant  data  for  color  constant 
addition/subtraction. 

COLOR  DESIGNATION:  Bit  for  Selecting  Desired  Color 
R/G/B  brightness  should  be  set  using  5-bit  data.  Example: 


COH,  3FH  (B=00H,  G=00H,  R=1  FH) 
AOH,  5FH  (B=00H,  G=1FH,  R=00H) 
60H,9FH  (13=1  FH,  G=00H,  R=00H) 
FFH 
EOH 


(NCLPG  6V 


2-27-18 


ADDRESS:  2133H 

NAME:  SETINI 

CONTENTS:  SCREEN  INITIAL  SETTING 


D7  D6  D5  D4  D3  D2  D1  DO 


EXT. 

EXT. 

PSEUDO 

224^ 

OBJ-V 

INTER- 

SYNC. 

INPUT 

512 

239 

SELECT 

LACE 

SCANNING  INTERLACE(I) 
NON/INTERLACE(0)  SELECTION: 
(Related  to  <2105H>) 


L^OBJ  V-DIRECTION  DISPLAY:* 

In  the  interlace  mode,  select  either  1 dot 
per  line  or  1 dot  repeated  every  2 lines.  If  “1” 
is  written,  the  OBJ  appears  to  be  reduced  to 
half  its  vertical  size. 


^ BG  V-DIRECTION  DISPLAY: 

Switch  the  display  line  of  a field  to  224-Line  or  239-Line. 
(In  case  of  interlace  mode,  it  will  be  doubled  dot.) 

r- 0:224  LINES 
Li  : 239  LINES 

-►  HORIZONTAL  PSEUDO  512  MODE: 

An  imaginary  resolution  of  512  (Horizontal)  can 
be  created  by  shifting  the  SUB  screen  half  dot  to 
the  left,  alternately  every  field: g . DISABLE 

L i i ENABLE 


^ EXTBG  MODE  (SCREEN  EXPAND): 

Enable  the  data  supplied  from  the  external  LSI.  For  the  Super  NES, 
enable  when  the  screen  with  priority  is  used  on  mode-7. 


^ EXTERNAL  SYNCHRONIZATION: 

Used  for  super-imposing  images,  etc.  Normally,  “0”  should  be  written. 

* If  “D1”  is  set  in  non-interlace  mode,  even  and  odd  numbered  lines  of  the  OBJ 
will  be  displayed  alternately  every  field. 


(NCLPG61) 


SNES  DEVELOPMENT  MANUAL 


ADDRESS:  2134H  / 2135H  / 2136H 

NAME:  *MPYL/*MPYM/*MPYH 

CONTENTS:  MULTIPLICATION  RESULT 


D7 

D6 

D5 

D4  D3 

D2 

D1 

DO 

M7  | 

M6  I 

M5  I 

M P Y (LOW) 
M4  | M3  I 

M2  I 

Ml  | 

MO 

M P Y (MID) 

M15  I M14  | M13 | M12 I Mill  M10 | M9  I M8 


2134H 


2135H 


M PY  (HIGH) 

M23  I M22  | M21  I M20  | M19 1 M18 1 M17 1 M16 


2136H 


This  is  a Multiplication  result  (complement  of  2)  and  can  be  read  by  setting  16-bit  to 
register  <21 1 BH>  and  setting  8-Bit  data  to  register  <21 1 CH> 


ADDRESS:  2137H 

NAME:  *SLHV 

CONTENTS:  SOFTWARE  LATCH  FOR  HA/  COUNTER 

D7  D6  D5  D4  D3  D2  D1  DO 
SOFT  LATCH  FOR  H/V  COUNTER 
SL7  I SL6  I SL5  I SL4  I SL3  I SL2  I SL1  1 SLO 


This  is  a register,  which  generates  the  pulse  for  latching  the  H/V  counter  value. 


The  H/V  counter  value  at  the  point  when  register  <2137H>  is  read  can  be  latched. 
The  data  which  was  read  is  meaningless  data. 


The  H/V  counter  value  latched  can  be  referred  by  registers  <213CH>  and 
<213DH>. 


(NCL  PC  62) 


2-27-20 


PPU  REGISTERS 


ADDRESS:  2138H 

NAME:  *0 AM  DATA 

CONTENTS:  READ  DATA  FROM  OAM 


D7 

D6 

D5  D4  D3  D2 

D1 

DO 

OAM  DATA  (LOW,  HIGH) 

D7 

1 D6  1 

D5  I D4  | D3  | D2  I 

pi  1 

DO 

2138H 


This  is  a register,  which  can  read  the  data  at  any  address  of  the  OAM. 


• When  the  address  is  set  to  register  <2102H>  <2103H>  and  register  <2138H>  is 
also  accessed,  the  data  can  be  read  in  the  order  of  Low  8-Bit/High  8-Bit.  Afterward, 
the  address  will  be  increased  automatically,  and  the  data  of  the  next  address  can 
be  read. 

NOTE:  The  data  can  be  read  only  during  H/V  BLANK  or  FORCED  BLANK  period. 


ADDRESS:  2139H/213AH 

NAME:  ‘VMDATAL  / *VMDATAH 

CONTENTS:  READ  DATA  FROM  VRAM 


D7 

D6 

D5  D4  D3 

D2 

D1 

DO 

VRAM  DATA  (LOW) 

p i l 

D6  I 

D5  1 D4  | D3  I 

D2  | 

PI  1 

DO 

VRAM  DATA  (HIGH) 

D15  | D14  | D13  | D12  | Dili  DIO  1 D9  I D8 


2139H 


213AH 


This  is  a register,  which  can  read  the  data  at  any  address  of  the  VRAM. 

The  initial  address  should  be  set  by  registers  <21 1 6>  and  <21 1 7H>.  The  data  can 
be  read  by  the  address  which  has  been  set  initially. 


When  reading  the  data  continuously,  the  first  data  for  the  address  increment 
should  be  read  as  “dummy"  data  after  the  address  has  been  set. 


• Quantity  to  be  increased  will  be  determined  by  “SC  INCREMENT”  of  register 
<21 15H>  and  the  setting  value  of  the  “FULL  GRAPHIC.” 

NOTE:  The  data  can  be  read  only  during  HA/  BLANK  or  FORCED  BLANK  period. 


(NCL  PG  63) 


2-27-21 


SNES  DEVELOPMENT  MANUAL 


ADDRESS:  213BH 

NAME:  ‘CGDATA 

CONTENTS:  READ  DATA  FROM  CG-RAM 

D7  D6  D5  D4  D3  D2  D1  DO 

213BH 


This  is  a register,  which  can  read  the  data  at  any  address  of  the  CG-RAM. 

The  initial  address  can  be  set  by  register  <2121H>.  The  lower  8-Bit  is  read  first, 
and  then  the  upper  7-Bit  will  be  read  by  accessing  the  register.  The  current  ad- 
dress will  be  increased  to  the  next  address  at  the  same  time  the  upper  7-Bit  is 
read. 

Note:  The  data  can  be  read  only  during  H/V  blank  or  forced  blank  period. 


ADDRESS:  213CH/213DH 

NAME:  *OPHCT  / *OPVCT 

CONTENTS:  H/V  COUNTER  DATA  BY  EXTERNAL  OR  SOFTWARE  LATCH 


213CH 


213DH 


, and  its  H/V  counter  val- 


The  H/V  counter  is  also  latched  by  the  external  latch,  and  its  value  can  be  read  by 
this  register. 

If  register  <213CH>  or  <213DH>  is  read  after  register  <213FH>  has  been  read, 
the  lower  8-Bit  data  will  be  read  first,  and  then  the  upper  1-Bit  will  be  read  by 
reading  the  register. 


(NCL  PG  64) 


D7  D6  D5  D4  D3  D2  D1  DO 


The  H/V  counter  is  latched  by  reading  register  <2137H> 
ue  can  be  read  by  this  register. 


2-27-22 


PPU  REGISTERS 


ADDRESS:  213EH 

NAME:  *STAT77 

CONTENTS:  PPU  STATUS  FLAG  & VERSION  NUMBER 


D7  D6  D5 
TIME  [RANGE  |MASTEr' 

OVER  OVER  /SLAVE 


D3  D2  D1  DO 
5C77  VERSION  NUMBER 


213EH 


LI— ► MASTER  / SLAVE  MODE  SELECT:  LSI  MODE  (Normally  “0”  is  set) 

OBJ  DISPLAY  STATUS  (ON  A HORIZONTAL  LINE) 

E RANGE:  When  Quantity  of  the  OBJ  (regardless  of  the  size)  becomes  33  pcs  or  more, 

“1”  will  be  set. 

TIME:  When  quantity  of  the  OBJ  which  is  converted  to  “8  x 8-SIZE”  is  35  pcs  or  more, 

“1”  will  be  set 

NOTE:  The  flag  will  be  reset  at  the  end  of  the  V-BLANK  period. 


ADDRESS:  213FH 

NAME:  *STAT78 

CONTENTS:  PPU  STATUS  FLAG  & VERSION  NUMBER 


FIELD  EXT. 

NTSC 

5C78  VERSION  NUMBER 

LATCH 

/PAL 

1 1 1 

213FH 


DISPLAY  METHOD 


p 0 : NTSC 
L 1 : PAL 


H ► EXTERNAL  LATCH  FLAG:  When  the  external  signal  (Light  Pen,  etc.)  is  applied,  it 
enables  to  latch  the  H/V  countervalue.  It  is  connected  to  I/O  port  d7  in  SNES. 
(Refer  to  page  1-28-1.) 

This  is  a status  flag,  which  indicates  whether  the  1st  or  2nd  field  is  scanned  at  the  interlace 
mode.  (The  definition  is  different  from  the  field  of  NTSC.) 

pO  : 1ST  FIELD 
I-  1 : 2ND  FIELD 


NOTE:  When  this  register  is  read,  registers  <213CH>  <213DH>  will  be  initialized  individually  in  the 
order  of  Low  and  High. 


(NCL  PG  65) 


2-27-23 


SNES  DEVELOPMENT  MANUAL 


ADDRESS:  2140H  / 2141H  / 2142H  / 2143H 

NAME:  APUIOO  / APUI01  / APUI02  / APUI03 

CONTENTS:  COMMUNICATION  PORT  WITH  APU 


2140H 

2141H 

2142H 

2143H 


The  port  provides  more  registers  for  the  purpose  of  IN/OUT,  which 
are  8 registers  in  total  in  the  APU.  Therefore,  the  different  register 
will  be  accessed,  whether  reading  or  writing  for  the  same  address. 

Refer  to  Part  2 of  this  manual  for  the  details  of  the  communication 
method. 


D7  D6  D5  D4  D3  D2  D1  DO 
APU  I/O  PORT 


(NCL  PC  66) 


2-27-24 


PPU  REGISTERS 


ADDRESS:  2180H 

NAME:  WMDATA 

CONTENTS:  DATA  to  consecutively  read  from  and  write  to  WRAM 
D7  D6  D5  D4  D3  D2  D1  DO 

2180H 

• Data  to  consecutively  read  and  write  at  any  address  of  WRAM 

• Data  is  read  and  written  at  address  set  by  register  <21 81  H>  ~ <21 83H>,  and 
address  automatically  increases  each  time  data  is  read  or  written. 

ADDRESS:  2181H/2182H/2183H 

NAME:  WMADDL/WMADDM/WMADDH 

CONTENTS:  Address  to  consecutively  read  and  write  WRAM 

2181H 
2182H 
2183H 

written. 

1 7 bit  address  to  show 


(NCL  PG  66a) 


D7  D6  D5  D4  D3  D2  D1  DO 


• Address  to  be  set  before  WRAM  is  consecutively  read  or 

• AO  through  A1 6 at  register  <21 81  H>  ~ <21 83H>  is  lower 
address  7E0000  ~ 7FFFFF  Memory. 


2-27-25 


SNES  DEVELOPMENT  MANUAL 


Chapter  28.  CPU  Registers 


ADDRESS 

NAME 

CONTENTS 


ENABLE 


4200H 

NMITIMEN 

ENABLE  FLAG  FOR  V - BLANK,  TIMER  INTERRUPT  & STANDARD  CONTROLLER 
D 6 D 5 D 4 D 3 D2  D 1 DO  READ 


TIMER  ENABLE 
V-EN  I H-EN 


STANDARC 

CNTRL 

ENABLE 


4 2 0 0 H 


STANDARD  CONTROLLER  ENABLE 
i-0  : Disable  Automatic  reading  of  Standard  Controller 

Li  : Enable  Automatic  reading  of  Standard  Controller 

^ Reading  the  data  can  be  started  at  the  beginning  of 
V - Blank  period,  but  it  takes  about  3 or  4 scanning 
lines  to  complete  the  read. 

TIMER  ENABLE 

r V - EN  : V - COUNT  TIMER  ENABLE 


EN  : H-  COUNT  TIMER  ENABLE 


FUNCTION 


V H 
EN  EN 


0 0 Disable  BOTH  H & V. 

0 1 Enable  H only.  IRQ  is  applied  by  H - count  timer  value  designated. 

1 0 EnableVonly.  IRQ  is  applied  by  V - count  timer  value  designated. 

1 1 Enable  both  H & V.  IRQ  is  applied  by  both  H and  V count  timer  value  designated. 


NMI  ENABLE : Enable  NMI  at  the  point  when  V - Blank  begins. 

(When  power  is  turned  on  or  the  reset  signal  is  applied,  it  will  be  “0".) 

r0  : NMI  DISABLE 


NMI  ENABLE 


ADDRESS  :4201H 
NAME  : WRIO 

CONTENTS:  PROGRAMMABLE  I/O  PORT  (OUT  - PORT) 


D 7 

D 6 

D 5 

D 4 

D 3 

D 2 

D 1 

DO 

I/O 

PORT 

4 2 01  H 

D7 

D6 

| D5 

I D4 

| D3 

| D2 

1 D1 

| DO 

• This  is  a Programmable  I/O  port  (OUT  - PORT).  The  written  data  will  be  output  directly  from 
the  OUT -PORT. 

• When  this  is  used  as  a INPORT,  “1  ’’  should  be  written  to  the  particular  bit  which  will  be  used 
as  a IN  - PORT.  The  input  data  can  be  read  by  register  <421 3H>. 

• Only  D6  and  D7  can  be  used  by  the  Super  NES.  Standard  Controller  I and  III  (connector  1) 
has  signal  at  D6  and  Standard  Controller  II  and  IV  (connector  2)  has  signal  at  D7.  Signal  at 
D7  is  also  an  external  latch  input  signal  (Refer  to  page  1-27-23). 


(NCL  PC  88) 


2-28-1 


CPU  REGISTERS 


ADDRESS  :4202H  / 4203H 
NAME  : WRMPYA  / WRMPYB 

CONTENTS: MULTIPLIER  & MULTIPLICAND  BY  MULTIPLICATION 


D7 

D 6 

D 5 D 4 D 3 

D 2 

D 1 

DO 

A7  | 

A6 

MULTIPLICAND -A 
A5  | A4  | A3  | 

A2 

|A, 

i A0 

MULTIPLIER -B 

_f_l 

B6  | 

| B5  | B4  | B3  | 

B2 

1 81 

i 60 

• This  is  a register,  which  can  set  as  multiplicand  (A)  and  a multiplier  (B)  for  Absolute 
Multiplication  of  “A  (8  - bit)  X B (8  - bit)  = C (16  - bit)”. 

• A PRODUCT  (C)  can  be  read  by  registers  <4216H><4217H>. 

• Set  in  the  order  of  (A)  and  (B).  The  operation  will  start  as  soon  as  (B)  has  been  set,  and  it 
will  be  completed  right  after  an  8-machine  cycle  period. 

• Once  the  data  of  the  A-REGISTER  is  set,  it  will  not  be  destroyed  until  new  data  is  set. 


ADDRESS  : 4204H  / 4205H  / 4206H 
NAME  : WRDIVL  / WRDIVH  / WRDIVB 
CONTENTS: DIVISOR  & DIVIDEND  BY  DIVIDE 


D 7 

D 6 

D 5 

D 4 

D 3 

D 2 

D 1 

DO 

C7 

C6  | 

DIVIDEND- 

C (LOW) 

4 2 04  H 

C5 

1 04  1 

C3  | 

C2 

1 C1 

I CO 

DIVIDEND-  C (HIGH) 

C15 

1 014 

C13  j C12  | C11  | CIO  | 

C9 

| C8 

DIVISOR -B 

67 

B6  | 

| B5 

| B4  | B3  | 

B2 

1 B1 

| BO 

• This  is  a register,  which  can  be  set  as  Dividend  (C)  and  a Divisor  (B)  for  Absolute  Divide 
of  “C  (16-bit)  + B (8-bit)  = A (16-bit)”. 

• The  Quotient  (A)  can  be  read  by  registers  <4214H><4215H>.  And  the  remainder  can  be  read 
by  registers  <4216H><4217H>. 

• Set  in  the  order  of  (C)  and  (B).  The  operation  will  start  as  soon  as  (B)  has  been  set,  and  it 
will  be  completed  right  after  a 1 6-machine  cycle  period. 

• Once  the  data  of  the  C-REGISTER  is  set,  it  will  not  be  destroyed  until  new  data  is  set. 


INCL  PG  89) 


SNES  DEVELOPMENT  MANUAL 


ADDRESS  : 4207H  / 4208H 
NAME  :HTIMEL/  HTIMEH 
CONTENTS :H-COUNT TIMER  SETTINGS 


D 7 

D 6 

D 5 D 4 D 3 

D 2 

D 1 

DO 

H7  | 

| H6 

H-COUNT  TIMER 
| H5  | H4  | H3  | 

H2 

|H1 

| HO 

H MSB 
H8 


4 2 07  H 
4 2 08  H 


• This  is  a register,  which  can  set  the  H-COUNT  TIMER  value. 


• The  stored  value  should  be  from  0 through  339,  which  is  counted  from  the  far  left  on  the  screen. 

• When  the  coordinate  counter  becomes  the  count  value  set,  the  IRQ  will  be  applied. 

And  at  the  same  time,  “1"  will  be  written  to  Timer  IRQ”  of  register  <421 1H>  (READ  RESET). 
Enable/Disable  of  the  interrupt  will  be  determined  by  setting  register  <4200H>. 

^ This  continuous  counter  is  reset  eveiy  scanning  line,  therefore  once  the  count  value  is  stored, 
it  is  possible  to  apply  the  IRQ  every  time  the  scanning  line  comes  to  the  same  horizontal 
position  on  the  screen. 


ADDRESS  :4209H  / 420AH 
NAME  :VTIMEL  / VTIMEH 
CONTENTS  :V-COUNT  TIMER  SETTINGS 


D 7 

D 6 

D 5 D 4 D 3 

D 2 

D 1 

DO 

V7  1 

V6  | 

V-  COUNT  TIMER 
V5  | V4  | V3  | 

V2 

1 V1 

|V0 

V MSB 
V8 


4 2 09  H 
4 2 0AH 


• This  is  a register,  which  can  set  the  V-COUNT  TIMER  value. 


• The  stored  value  should  be  from  0 through  261  (262),  which  is  counted  from  top  of  the 
screen.  (This  line  number  described  is  different  from  the  actual  line  number  on  the  screen.) 

• When  the  coordinate  counter  becomes  the  count  value  set,  the  IRQ  will  be  applied. 

At  the  same  time,  “1”  will  be  written  to  Timer  IRQ”  of  register  <421 1 H>  (READ  RESET). 
Enable/Disable  of  the  interrupt  will  be  determined  by  setting  register  <4200H>. 

^ This  is  a continuous  counter  like  the  H-counter  and  will  reset  every  time  262  lines  are 
scanned.  Once  the  count  value  is  stored,  it  is  possible  to  apply  the  IRQ  every  time  the 
scanning  line  comes  to  the  same  vertical  position  on  the  screen. 


(NCL  PC  90) 


2-28-3 


ADDRESS  :420BH 
NAME  :MDMAEN 

CONTENTS: CHANNEL  DESIGNATION  FOR  GENERAL  PURPOSE  DMA  & TRIGGER  (START) 
D 7 D 6 D 5 D 4 D3  D2  Dt  DO 

GENERAL  PURPOSE  DMA  ENABLE  FLAG 

4 2 OB  H 

CH7  EN  I CH6 EN  I CH5 EN  I CH4 EN  I CH3 EN  I CH2  EN  I CHI  EN  I CHO  EN 


• General  purpose  DMA  consists  of  8 channels  total  (CHO  ~ CH7). 

• This  is  used  to  designate  1 of  the  8 channels  (8  channels  maximum). 


• The  channel  to  be  used  can  be  designated  by  writing  "1”  to  the  bit  of 

this  channel.  As  soon  as  “1”  is  written  to  the  bit  (after  a few  cycles  have  passed), 
the  general  purpose  DMA  transfer  will  begin. 

• When  general  purpose  DMA  of  the  designated  channel  is  completed,  the 
flag  will  be  cleared. 


NOTE:  Because  the  data  area  (register<4300H>  ~)  of  each  channel  is  held  in  common  with  the  data 
of  each  H-DMA  channel,  the  channel  designated  by  the  H-DMA  channel  designation  register 
<420CH>  can  not  be  used.  (It  is  prohibited  to  write  “1”  to  the  bit  of  the  channel).  Therefore  8 
channels  (CHO  ~ CH7)  should  be  assigned  by  the  H-DMA  and  the  general  purpose  DMA. 


NOTE:  If  the  H-Blank  comes  during  the  operation  of  the  general  purpose  DMA  and  the  H-DMA  is 

started,  the  general  purpose  DMA  will  be  discontinued  in  the  middle  and  resumed  right  after 
the  H-DMA  is  complete. 


NOTE:  If  2 or  more  channels  are  designated,  the  DMA  transfer  will  be  performed  continuously 

according  to  the  priority  order  described  on  page  B-1 . The  CPU  will  also  stop  operation  until 
all  the  general  purpose  DMAs  are  completed. 


(NCL  PG  9V 


SNES  DEVELOPMENT  MANUAL 


ADDRESS  :420CH 
NAME  :HDMAEN 

CONTENTS: CHANNEL  DESIGNATION  FOR  H-DMA 
D 7 D 6 D 5 D 4 D3  D2  D1  DO 

H - DMA  ENABLE  FLAG 

CH7  EN  | CH6  EN  | CH5  EN  [ CH4  EN  | CH3  EN  | CH2  EN  | CHI  EN  | CHO  EN 


• The  H-DMA  consists  of  8 channels  total  (CHO  ~ CH7). 

• The  register  is  used  to  designate  the  channel  out  of  8 channels  (8  channels 
maximum). 

• The  channel  which  should  be  used  can  be  designated  by  writing  “1  ” to  the  bit  of 
this  register.  As  soon  as  H-Blank  begins  (after  a few  cycles  have  passed),  the 
H-DMA  transfer  will  begin. 


NOTE:  Once  this  flag  is  set,  it  will  not  be  cleared  until  new  data  is  set. 

The  initial  settings  are  done  automatically  for  every  field  and  the  same 
transfer  pattern  will  be  repeated.  The  flag  is  also  set  out  of  V-Blank  period, 
so  the  DMA  transfer  will  be  performed  properly  for  the  next  screen  frame. 


ADDRESS  :420DH 
NAME  :MEMSEL 

CONTENTS: ACCESS  CYCLE  DESIGNATION  IN  MEMORY  © AREA  (Refer to  “Memory  Map”) 


D 7 


D 6 


D 5 


D 4 


D 3 


D 2 


D 1 


DO 


2.68/ 

'3.58 


4 2 OD  H 


ACCESS  CYCLE  DESIGNATION  IN  MEMORY  © AREA 
•0  : 2.68MHz  access  cycle 

• 1 : 3.58MHz  access  cycle  (Only  when  the  high  speed  memory  is  used) 

• MEMORY  © shows  the  address  (8000H  ~ FFFFH)  of  the  bank  (80H  ~ BFH) 
and  all  the  addresses  of  the  bank  (COH  ~ FFH). 

• When  power  is  turned  on  or  the  reset  signal  is  applied,  it  becomes  “0”. 


(NCL  PC  9 1 & 91a) 


CPU  REGISTERS 


ADDRESS  :421  OH 
NAME  :*RDNMI 

CONTENTS: NMI  FLAG  BY  V - BLANK  & VERSION  NUMBER 


D 7 D 6 D 5 D 4 D3  D2  D1  DO 


BLANK 

SNES-CPU  VERSION  NUMBER 

N M 1 

1 1 

i 1 1 

v 


NMI  FLAG  BY  V-BLANK  '•  When  “1”  is  written  to  “NMI  ENABLE”  of  register  <4200H>,  this 

flag  will  show  NMI  status. 

rO  : NMI  has  not  occurred 


L1  : NMI  has  occurred 

A “1"  is  written  to  this  flag  at  the  beginning  of  V-Blank  and  a “0"  is  written  at  the  end  of  V-Blank. 
It  can  also  be  reset  by  reading  this  register. 


NOTE  : It  is  necessary  to  reset  by  reading  this  flag  during  NMI  processing.  (Refer  to  page  B-3.) 


ADDRESS  :4211H 

NAME  :*TIMEUP 

CONTENTS:  IRQ  FLAG  BY  H/V  COUNT  TIMER 


D 7 D 6 D 5 D 4 D3  D2  D1  DO 


TIMER 

IRQ 


42  11  H 


^ IRQ  FLAG  BY  H/V  COUNT  TIMER  : 

This  flag  is  “READ  RESET”.  (If  Timer  Enable  is  set  by  “Timer  Enable”  of  register  <4200H>, 
IRQ  will  be  applied  and  the  flag  will  be  set  as  soon  as  H/V  count  timer  reaches  the  value 
stored. 


^ Even  if  V-EN  =”0”  and  H-EN  =”0”  are  set  by  “Timer  Enable”  of  register  <4200H>,  this  flag  will  be 
reset. 

[0  • Either  H/V  count  timer  is  active  or  disabled 
1 : Status  of  H/V  count  timer  is  Time-Up 


(NCL  PG  92) 


SNES  DEVELOPMENT  MANUAL 


ADDRESS  :4212H 
NAME  :*  HVBJOY 

CONTENTS  :H/V  BLANK  FLAG  & STANDARD  CONTROLLER  ENABLE  FLAG 


D 7 

D 6 

D 5 

D 4 

D 3 

D 2 

D 1 

DO 

V 

H 

STANDARD 

BLANK 

BLANK 

CNTRL 

ENABLE 

STANDARD  CONTROLLER  ENABLE: 

This  flag  shows  the  timing  to 
read  the  data  of  the  Standard 
Controller.  (However,  it  is 
limited  to  the  case  where  the 
“STANDARD  CNTRL  ENABLE"  of 
register  <4200H>  is  set  to  “1”) 

- 0 : This  is  a period  when  the  Standard 
Controller  is  not  reading  the  data 
or  is  disabled.  (In  case  “0”  is  set  to 
“STANDARD  CNTRL  ENABLE”  of 
register  <4200H>) 

- 1 : This  is  a period  when  the  Standard 
Controller  is  reading  data. 


1 ► H-BLANK  PERIOD  FLAG  : It  shows  whether  the  scan  is  in  the  H-Blank 

period  or  not. 

r-0  : Out  of  H-Blank  period 
Li  : in  H-Blank  period 

V-BLANK  PERIOD  FLAG  : It  shows  whether  the  scan  is  in  the  V-Blank  period  or  not. 


r-0  : Out  of  V-Blank  period 
Li  : In  V-Blank  period 


ADDRESS  :4213H 
NAME  :*RDIO 

CONTENTS:  PROGRAMMABLE  I/O  PORT  (IN  - PORT) 


D 7 

D 6 

D 5 

D 4 

D 3 

D 2 

D 1 

DO 

D7 

06  1 

D5 

I/O 

1 04 

PORT 
| D3 

| D2 

1 01 

| DO 

• This  is  a Programmable  I/O  port  (IN  - PORT).  The  data  which  is  set  to  the  IN-PORT  should 
be  read  directly. 

• The  bit  in  which  “1”  is  written  by  register  <4201  H>  is  used  as  the  IN-PORT. 

• Only  D6  and  D7  can  be  used  by  the  Super  NES.  Standard  Controller  I and  III  (connector  1) 
has  signal  at  D6  and  Standard  Controller  II  and  IV  (connector  2)  has  signal  at  D7.  Signal  at 
D7  is  also  an  external  latch  input  signal  (Refer  to  “PPU  Status  Flag  and  Version  Number”  in 
“PPU  Registers”). 


(NCL  PC  93) 


2-28-7 


CPU  REGISTERS 


ADDRESS  :4214H  / 421 5H 
NAME  : * RDDIVL  / * RDDIVH 
CONTENTS : QUOTIENT  OF  DIVIDE  RESULT 


D 7 

D 6 

D 5 D 4 D 3 

D 2 

D 1 

DO 

A7  | 

A6  | 

QUOTIENT- A (LOW) 
A5  | A4  | A3  | 

A2 

1 A1 

| AO 

QUOTIENT -A  (HIGH) 

A15 

1 A14 

| A13  | A12  | All  | A10  | 

A9 

[ A8 

• This  is  Quotient  (A),  which  is  a result  of  absolute  division  of 
“ C (16  BIT)  -5-  B (8  BIT)  = A (16  BIT)”. 

• Dividend  (C)  and  divisor  (B)  are  set  by  registers  <4204H>,  <4205H>,  and  <4206H>. 


ADDRESS  :4216H  / 4217H 
NAME  :*  RDMPYL/  * RDMPYH 

CONTENTS: PRODUCT  OF  MULTIPLICATION  RESULT  OR  REMAINDER  OF  DIVIDE  RESULT 


4 216  H 


4 217H 

© WHEN  USED  FOR  MULTIPLICATION 

• This  is  a Product  (C),  which  is  a result  of  Absolute  Multiplication  of 
“ A (8  BIT)  X B (8  BIT)  =C  (16  BIT)”. 

• Multiplicand  (A)  and  Multiplier  (B)  are  set  by  registers  <4202H>  and  <4203H>. 

© WHEN  USED  FOR  DIVISION 

• This  is  a Remainder,  which  is  a result  of  Absolute  Division  of 

“ C (16  BIT)  + B (8  BIT)  = A (16  BIT)  . . . REMAINDER  (8  or  16  bit)”. 

• Dividend  (C)  and  divisor  (B)  are  set  by  registers  <4204H>,  <4205H>,  and  <4206H>. 


D 7 D 6 D 5 D 4 D3  D2  D1 DO 

PRODUCT-C  [MULTIPLICATION]  / REMAINDER  [DIVIDE]  (LOW) 
C7  | C6  | C5  | C4  | C3  | C2  | Cl  | CO 

PRODUCT-C  [MULTIPLICATION]  / REMAINDER  [DIVIDE]  (HIGH) 
C15  [ C14  | C13  | C12  | C11  | CIO  | C9  | C8 


(NCL  PG  94) 


2-28-8 


SNES  DEVELOPMENT  MANUAL 


ADDRESS 

NAME 

CONTENTS 


421 8H/4219H/421  AH/421  BH/421 CH/421 DH/421  EH/421  FH 

STD  CNTRL1 L / 1 H / 2L/2H/3L/3H/4L/4H 

DATA  FOR  STANDARD  CONTROLLER  I,  II,  III,  & IV 


D 7 D 6 D 5 D 4 D3  D2 

STANDARD  CONTROLLER  -I  (LOW) 
A | X | L | R | 

BUTTON  BUTTON  BUTTON  BUTTON 


4 218  H 


STANDARD  CONTROLLER  -I  (HIGH) 

B I Y I SELECT  I START  I DIRECTIONAL  PAD 

BUTTON  I BUTTON  1 BUTTON  1 BUTTON  1 UP  I DOWN  I LEFT  I 

STANDARD  CONTROLLER  -II  (LOW)  “ 

A i X i L i R i ' ' 

BUTTON  1 BUTTON [ BUTTON | BUTTON  [ 

STANDARD  CONTROLLER  -II  (HIGH)  ~ 

B I Y SELECT  START  DIRECTIONAL  PAD 

BUTTON  BUTTON  BUTTON  BUTTON  UP  | DOWN  | LEFT 


STANDARD  CONTROLLER  -I 
A X L R 

BUTTON  I BUTTON  I BUTTON  I BUTTON  I I 


(LOW) 


BUTTON  BUTTON  BUTTON  BUTTON 


DOWN 


RIGHT 


RIGHT 


STANDARD  CONTROLLER  -III  (HIGH) 

Y I SELECT  I START  I DIRECTIONAL  PAD 


RIGHT 


STANDARD  CONTROLLER  -IV  (LOW) 

A X L R 

BUTTON  | BUTTON  | BUTTON  | BUTTON  | | | | 

STANDARD  CONTROLLER  -IV  (HIGH)  “ 
B I Y I SELECT  | START  I DIRECTIONAL  PAD 


4 2 19H 


4 21 A H 


421BH 


421CH 


421DH 


421  EH 


4 21FH 


I BUTTON I BUTTON  I BUTTON  BUTTON 


DOWN 


RIGHT 


For  controller  expansion  

Registers  <401 6H>  <401 7H>  can  be  used  the  same  as  the  NES. 

D 7 D 6 D 5 D4  D3  D2  D1  DO  P0RT 

6H  RD  I I I n lllillpltil  401 6H  DO  : Data  for  Controller  I 

Dnnu wmmwmm  4016HD1  : Data  for  Controller  II 


IffpiMB  OUT0,  OUT1,  OUT2  (OUT1  and 
!!«■»■«  OUT2  are  not  output  from  SNES) 


401 7H  RD  i I plliiiilill!  401 7H  DO  Data  for  Controller  II 

4U1  m I I 1 I I I 401 7H  D1  Data  for  Controller  IV 

NOTE  : Whether  the  standard  controllers  are  connected  to  Super  NES  unit  or  not  can  be  determined 
by  reading  the  17th  bit  of  401 6H  and  401 7H.  (Refer  to  “Standard  Controller”.) 

pi  : connected 
Lq  : not  connected 


(NCL  PG  95) 


2-28-9 


CPU  REGISTERS 


ADDRESS  :43X0H  (X  : CHANNEL  NUMBER  <0  ~ 7>) 
NAME 

CONTENTS:  PARAMETER  FOR  DMA  TRANSFER 


D 7 

D 6 

D 5 

D 4 D 3 

D 2 D 1 DO 

C H 

* 

C H 
TYPE 

A BUS  ADDRESS 
INC/DEC  | FIXED 

CH  TRANSFER 

WORD  SELECT 
D2  | D1  | DO 

43X0H 


v 


y 


♦ Transfer 
Origination 


♦ - 

DMA  TRANSFER  WORD  SELECT 


GENERAL  PURPOSE  DMA  : B-ADDRESS  CHANGE 

METHOD  DESIGNATION 
PER  CHANNEL 


D2 

D1 

DO 

ADDRESS  TO  BE  WRITTEN 

0 

0 

0 

1 -ADDRESS 

0 

0 

1 

2-ADDRESS  (VRAM  etc.)  L,H 

0 

1 

0 

1 -ADDRESS  (WRITE  TWICE) 

0 

1 

1 

2-ADDRESS  (WRITE  TWICE)  L,L,H,H 

1 

0 

0 

4-ADDRESS  L,H,L,H 

H-DMA  : The  number  of  bytes  to  be  transferred  per  line 
and  write  method  designation. 


D2 

D1 

DO 

# Of  BYTE  TC 
BE  TRANS- 
FERRED 

ADDRESS  TO  BE  WRITTEN 

0 

0 

0 

1 BYTE 

1 -ADDRESS 

0 

0 

1 

2 BYTE 

2-ADDRESS  (VRAM  etc.)  L,H 

0 

1 

0 

2 BYTE 

1-ADDRESS  (WRITE  TWICE)  LL 

0 

1 

1 

4 BYTE 

2-ADDRESS  (WRITE  TWICE)  L,L,H,H 

1 

0 

0 

4 BYTE 

4-ADDRESS  L.H.L.H 

FIXED  ADDRESS  FOR  A-BUS  & AUTOMATIC  INCREMENT 
/DECREMENT  SELECT  [IN  CASE  OF  GENERAL  PURPOSE 
DMA] 


D3 


D4 


0 : Automatic  address  increment/decrement 

Fixed  address  (To  be  used  when  clearing  VRAM  etc.) 


[?; 


0 : Automatic  increment 


a; 


(In  case  “0"  is  written  to  D3) 

Automatic  decrement 

TYPE  DESIGNATION  [H-DMA  ONLY] : Addressing  mode  designation  when 

accessing  the  data  (Refer  to  page  B-2). 


Li-0  : ABSOLUTE  ADDRESSING 

Li  : INDIRECT  ADDRESSING 

TRANSFER  ORIGINATION  DESIGNATION  : Transfer  direction  A Bus->B  Bus 

B Bus->  A Bus  Designation  (Refer  to  page  B-1) 


j-0  : A-BUS  -»B-BUS  (CPU  MEMORY ->PF?U) 
Li  : B-BUS  ->  A-BUS  (PPU  CPU  MEMORY) 


^ For  example,  in  case  the  DMA  transfer  is  performed  from  CPU  memory  to  PPU,  “0”  should  be 
written. 


(NCL  PG  96) 


2-28-10 


SNES  DEVELOPMENT  MANUAL 


ADDRESS  :43X1H  (X  : CHANNEL  NUMBER  <0  ~ 7>) 
NAME 

CONTENTS  :B-BUS  ADDRESS  FOR  DMA 


D 7 

D 6 

D 5 

D 4 D 3 

D 2 

D 1 

DO 

BA7 

BA6 

BA5 

B - ADDRESS 
| BA4  | BA3 

| BA2 

| BA1 

| BA0 

43X1 H 

• This  is  a register  which  can  set  the  address  of  B-bus. 


• Whether  this  is  the  address  of  the  “Transfer  Destination"  or  the  address  of  the  ‘Transfer 
Origination"  can  be  determined  by  D7  (Transfer  Origination)  of  register  <43X0H>. 


A - BUS<- 


Direction  can  be  designated  by  “Transfer  Origination” 


B-BUS 


Actual  address  is  0021 XXH. 
(XX  : value  by  this  register) 

% When  H-DMA  is  performed,  it  will  be  the  address  of  the  “Transfer  Destination”. 


ADDRESS  :43X2H  / 43X3H  / 43X4H  (X  : CHANNEL  NUMBER  <0  ~ 7>) 

NAME 

CONTENTS  TABLE  ADDRESS  OF  A-BUS  FOR  DMA  <A1  TABLE  ADDRESS> 

D 7 D 6 D 5 D 4 D3  D2  D1  DO 


43X2H 


43X3H 


43X4H 


A7 

A1  TABLE  ADDRESS  (LOW) 
A6  | A5  | A4  | A3  | A2 

A1 

A0 

A15  | 

A1  TABLE  ADDRESS  (HIGH) 
A14  | A13  | A12  | All  | A10 

1 A9  1 

A8 

A23 

A-TABLE  BANK 
A22  | A21  | A20  | A19 

A18 

A17 

A16 

• This  is  a register,  which  can  set  the  address  of  A-bus. 


• Whether  this  is  the  address  of  the  “Transfer  Destination"  or  the  address  of  the  ‘Transfer 
Origination”  can  be  determined  by  D7  (Transfer  Origination)  of  register  <43X0H>. 

A “0”  should  be  written  to  D7  except  in  special  cases. 

• In  the  H-DMA  mode,  the  address  of  the  transfer  origination  is  designated  except  it  is  a 
special  case.  Therefore,  for  the  CPU  area  designated  by  this  address,  the  data  (page  B-2) 
must  be  set  by  the  absolute  addressing  mode  or  the  indirect  addressing  mode. 

• This  address  becomes  the  basic  address  on  the  A-Bus  during  DMA  transfer  period  and  the 
address  will  be  increased  or  decreased  based  on  this  address.  (When  the  general  purpose 
DMA  is  performed,  it  will  be  decreased.) 


(NCL  PG  97) 


2-28-11 


CPU  REGISTERS 


ADDRESS  : 43X5H  / 43X6H  / 43X7H  (X  : CHANNEL  NUMBER  <0  ~ 7>) 

NAME 

CONTENTS:  DATA  ADDRESS  STORE  BY  H-DMA 

& NUMBER  OF  BYTE  TO  BE  TRANSFERRED  SETTINGS  BY  GENERAL  PURPOSE  DMA 


D 7 

D 6 

D 5 D 4 D 3 D 2 

D 1 

DO 

DATA  ADDRESS  (LOW) 

FOR  H-DMA 

DA7 

DA6 

DA5  | DA4  | DA3  | DA2 

DAI 

1 DAO 

43X5H 

NUMBER  OF  BYTES  TO  BE  TRANSFERRED  (LOW) 

GENERAL 

B7 

B6 

B5  B4  B3  | B2 

B1 

BO 

PURPOSE 

DMA 

DATA  ADDRESS  (HIGH) 

FOR  H-DMA 

DAI  5 | 

DAI  4 

DAI  3 | DAI  2 | DA1 1 | DA10 

DA9 

j DA8 

43X6H 

NUMBER  OF  BYTES  TO  BE  TRANSFERRED  (HIGH) 

GENERAL 

B15  | 

B14 

B13  B12  B11  BIO 

B9 

| B8 

PURPOSE 

DMA 

DATA  BANK 

FOR  H-DMA 

DA23  | 

DA22 

DA21  | DA20  | DAI 9 | DAI 8 

DAI  7 

1 DAI  6 

43X7H 

• IN  CASE  OF  H-DMA 

This  is  a register  in  which  the  indirect  address  will  be  stored  automatically  in  the  Indirect 
addressing  mode.  The  indirect  address  means  the  data  described  on  page  B-2.  It  is  not 
necessary  to  read  or  write  directly  by  the  CPU  except  in  special  cases. 

• IN  CASE  OF  GENERAL  PURPOSE  DMA 

This  is  the  register  which  can  set  the  number  of  bytes  to  be  transferred.  However,  the  number 
of  Byte  (0000H)  means  10000H. 


(NCL  PC  98) 


2-28-12 


SNES  DEVELOPMENT  MANUAL 


ADDRESS  :43X8H  / 43X9H  (X  : CHANNEL  NUMBER  <0  ~ 7>) 

NAME 

CONTENTS: TABLE  ADDRESS  OF  A-BUS  BY  DMA  <A2  TABLE  ADDRESS> 

D 7 D 6 D 5 D 4 D3  D2  D1  DO 


43X8H 


43X9H 


A7 

A6 

A2  TABLE  ADDRESS  (LOW) 

A5  | A4  | A3  | A2  | A1  | AO 

A15 

A14 

A2  TABLE  ADDRESS  (HIGH) 

| A13  | A12  | All  | A10  | A9  | A8 

• This  is  the  address  which  is  used  to  access  the  CPU  and  RAM.  It  will  be  increased 
automatically.  (See  page  B-2.) 

• The  data  of  this  register  is  used  as  the  basic  address  which  is  the  address  set  by  the  “A1 
Table  Address”.  Afterwards,  because  it  will  be  increased  (or  decreased)  automatically,  it  is 
not  necessary  to  set  the  address  into  this  register  by  the  CPU  directly. 

^ However,  if  the  data  which  is  transferred  needs  to  be  changed  by  force,  it  can  be 
done  by  setting  the  CPU  memory  address  to  this  register.  In  such  case,  the 
address  of  the  CPU  which  is  accessed  currently  will  be  changed  by  reading  this 
V register. 


H-DMA 

ONLY 


ADDRESS  :43XAH  (X  : CHANNEL  NUMBER  <0  - 7>) 

NAME 

CONTENTS:THE  NUMBER  OF  LINES  TO  BE  TRANSFERRED  BY  H-DMA 


D 7 D 6 D 5 D 4 D3  D2  D1  DO 


NUMBER  OF  LINES 

Continue  | L6 

L5  | L4  | L3  | L2 

l L1 

1 L° 

43XAH 


• This  is  the  register  which  shows  the  number  of  lines  for  H-DMA  transfer.  (Refer  to  page  B-2.) 

• The  number  of  lines  written  to  the  CPU  memory  will  be  the  basic  number  of  lines.  It  is  not 
necessary  to  write  the  data  into  this  register  by  the  CPU  directly. 


(NCL  PC  99) 


OUTLINE 


Chapter  1.  SNES  Sound  Source  Outline 

1.1  OUTLINE 

The  SNES  sound  source  is  composed  of  a Sound-CPU-IC,  a single  chip  in  which 
are  integrated  an  8-bit  CPU,  IPL  ROM,  I/O  ports,  a DSP-IC,  and  peripheral  appa- 
ratus. 


CHARACTERISTICS 


•CPU 

core 

•Minimum  Command  Execution  Time 

•Internal  ROM 

•Memory  Space 

•Peripheral  Functions 

•I/O  Ports 

Universal  I/O  Ports  8 bit  x 2 
♦Timers 

♦Output  Sound  Production 


: Sony  SPC700  series  CMOS  8-bit  CPU 

: 1 ,953ps/2.48MHz  when  active 
: 64  byte  (IPL  ROM) 

: 64K  byte 

: SNES  CPU  Interface  I/O  Ports  8 bit  x 4 

: (8  bit  timer  + 4 bit  counter)  x 3 sets 

: 4-bit  ADPCM  sampling  sound  x 8 tones 
(simultaneous  production) 


(NCL  PG  2) 


3-1-1 


SNES  DEVELOPMENT  MANUAL 


1.2  SYSTEM  OUTLINE 


Figure  3-1-1  System  Block  Diagram 

1.3  Designation  and  Role  of  Each  Section: 

1.3.1  Sound-CPU: 

SNES  sound  source  CPU.  Program  and  tone  color  data  are  read  into  RAM 
from  the  game  cassette  through  the  SNES  CPU,  Consequently  controlling 
the  game  music. 

In  addition,  the  Sound-  CPU  is  provided  with  an  internal  IPL-ROM  which  is 
activated  upon  reset.  The  IPL-ROM  provides  for  transmission  of  data 
through  the  SNES  CPU,  initial  settings  of  the  SNES  sound  source,  etc. 

1.3.2  DSP: 

Digital  Signal  Processor.  Reproduces  tone  quality  data  in  RAM.  Carries 
out  various  functions  for  the  purpose  of  musical  expression. 

1.3.3  51 2K  RAM: 

Shared  on  a time  basis  by  the  Sound-CPU  and  the  DSP. 

1.3.4  SNES  CPU: 

CPU  for  SNES  use.  Carries  out  progression  of  the  game  in  conformity  with 
the  game  cassette  format. 

1.3.5  SPPU: 

PPU  for  SNES  use.  Creates  imaging  through  CPU  control. 


(NCL  PC  3) 


OUTLINE 


1.4  MEMORY  MAPPING 


0-Page 


1-Page 


/ 


0000H 


OOEFH 

OOFOH 

OOFFH 

OlOOH 

OlFFH 


0200H 


Standard  data 
transmission  region 


\ 


7FFFH 


FFBFH 

FFCOH 


FFFFH 


External  Memory  Region 


Peripheral 
Function  Registers 


External  Memory  Region 


External  Memory  Region 


IPL  ROM  64  byte  * 


\ 


51 2K  bit  RAM 
(installed  on  board) 


/ 


* 


The  initial  hardware  setting  program  is  installed  in  the  IPL  ROM 

Figure  3-1-2  Memory  Map 

(NCL  PG  4) 


3-1-3 


SNES  DEVELOPMENT  MANUAL 


1.5  SIGNAL  FLOW 


3-1-4 


RIGHT 

CHANNEL 


BIT  RATE  REDUCTION 


Chapter  2.  BRR  (Bit  Rate  Reduction ) 

Sound  data  for  the  Super  NES  is  recorded  on  a game  data  cassette  in  4-bit  ADPCM  for- 
mat. Creating  data  in  this  format  requires  the  use  of  a technique  called  “BRR”  for  some 
sounds. 

Knowledge  of  this  operation  is  not  necessary  to  correctly  create  data  with  the  Sony 
NEWS  system,  which  has  been  the  standard  tool  used  by  Nintendo  to  date.  When  the 
same  data  is  created  using  a different  tool,  however,  one  must  understand  BRR. 
Complications  arise  during  the  creation  of  sound  data  from  data  in  BRR  format  when  cre- 
ating the  position  of  the  program  which  selects  the  filter  number  described  below.  Also, 
Nintendo  cannot  currently  support  this  programming  effort. 

One  block  of  wave  form  data  is  comprised  of  a one-byte  header  and  eight-byte  wave 
form  (4  bit  x 16  samples).  This  is  the  minimum  unit  the  sound  1C  can  handle. 


-v  " v ' + + 

Range  value  Filter  No.  Loop  End  BLOCK 

yes/no  or  not 


Figure  3-2-1  BRR  Data  String 

From  this,  the  range  and  filter  contain  the  BRR  information  (how  the  data  string  in  1 - 16 
will  be  regenerated).  Refer  to  f 7. 2. 2. 5 for  information  on  dl  and  dO  bits. 

The  “filter  number”  can  have  a value  from  0 ~ 3.  These  indicate,  respectively,  0:  con- 
stant, 1 : first-order  filter,  2:  second-order  filter,  3:  third-order  filter.  Of  these  values,  1 ~ 3 
require  previous  data  values  for  data  calculation.  (Filter  1 requires  one  previous  sample, 
and  filters  2 and  3 require  two  previous  samples.) 

The  “range”  indicates  the  number  of  bits  shifted.  One  sample  data  (4-bit)  is  shifted  to  the 
left  for  the  number  of  bits  and  re-created  as  1 6-bit  data.  The  maximum  value  for  a range 
is  1 2(1 1 00).  (See  the  next  page.) 


3-2-1 


SNES  DEVELOPMENT  MANUAL 


Figure  3-2-2  BRR  Range  Data 

An  equation  for  decoding  a sample  value,  xfrom  the  previous  sample  x^and  second  pre- 
vious sample  x.2,  is  given  below. 

x = R + ax_!  + bx.2 

R is  the  value  obtained  by  shifting  the  4-bit  data,  d,  by  the  range  value,  r. 

R=  [d]  2M5 

([d]  is  a decimal  presentation  of  d,  which  is  in  two's  compliment  form,  -7  ~+8) 

The  values  of  a and  b for  each  filter  are  as  follows: 


Filter  No. 

a 

b 

0 

0 

0 

1 

0.9375 

0 

2 

1.90625 

-0.9375 

3 

1 .796875 

-0.8125 

Table  3-2-1  BRR  Filter  Values 


3-2-2 


BIT  RATE  REDUCTION 


Figure  3-2-3  Example  Data  when  Filter  = 


SNES  DEVELOPMENT  MANUAL 


Chapter  3.  HO  Ports 

3.1  PERPHERAL  FUNCTIONS  REGISTERS 


Peripheral  Function  Registers  Table  3-3-1.  Peripherals 


Address 

Function  Register 

R/W 

When  Reset 

Remarks 

OOFOH 

(test) 

Installed  in  Sound-CPU 

H 

00F1H 

Control 

w 

Control  = “--00-000” 

00F2H 

Register  Add. 

Indeterminate 

Installed  in  DSP 

00F3H 

Register  Data 

Indeterminate 

Installed  in  DSP 

00F4H 

Port-0 

Port  Or  = “00” 
Port  Ow  = “00” 

Installed  in  Sound-CPU 

00F5H 

Port-1 

Port  1 r = “00” 
Port  1w  = “00” 

Installed  in  Sound-CPU 

00F6H 

Port-2 

Port  2r  = “00” 
Port  2w  = “00” 

Installed  in  Sound-CPU 

00F7H 

Port-3 

Port  3r  = “00” 
Port  3w  = “00” 

Installed  in  Sound-CPU 

00F8H 

■ 

00F9H 

■ 

H 

OOFAH 

Timer-0 

w 

Indeterminate 

Installed  in  Sound-CPU 

OOFBH 

Timer-1 

w 

Indeterminate 

Installed  in  Sound-CPU 

OOFCH 

Timer-3 

w 

Indeterminate 

Installed  in  Sound-CPU 

OOFDH 

Counter-0 

R 

Indeterminate 

Installed  in  Sound-CPU 

OOFEH 

Counter-1 

R 

Indeterminate 

Installed  in  Sound-CPU 

OOFFH 

Counter-3 

R 

Indeterminate 

Installed  in  Sound-CPU 

(NCL  PG  6) 


3-3-1 


I/O  PORTS 


3.2  APU  I/O  PORTS 

Ports  0-3  are  ports  which  carry  out  data  transmission  to  the  SCPU  through  the 
SNES  bus  and  are  composed  of  four  8-bit  input  registers  and  four  8-bit  output  reg- 
isters. Port  n r registers  can  only  write  from  the  SCPU  section  and  can  only  read 
from  the  Sound-CPU  section.  The  opposite  is  true  of  the  port  n w registers.  Since 
the  composition  of  each  of  these  ports  is  identical,  only  an  explanation  of  Port  Or 
and  Port  Ow  is  provided. 

1 . Data  is  input  into  Port  Or  when  the  SCPU  writes  data  into  21 40H.  Then,  the 
contents  of  Ports  Or  are  read  when  the  Sound-CPU  reads  the  data  in 
00F4H  (this  is  also  true  of  Ports  1 r - 3r). 

2.  Data  is  written  into  Port  Ow  when  the  Sound-CPU  writes  data  into  the  APU 
I/O  port  (00F4H).  Then  the  contents  of  Port  Ow  are  read  when  the  SCPU 
reads  2140H  (this  is  also  true  of  Ports  1w  - 3w). 

3.  When  reset  is  applied,  the  contents  of  Port  n r registers  and  Port  n w regis- 
ters become  “00”  (n  =0-3). 

Table  3-3-2  PortO  - Port3  Registers 


Address  Seen  From  Sound-CPU 

Address  Seen  From  SCPU 

Register  Name 

W/R 

Function  Seen  From  Sound-CPU  Section 

00F4H 

2140H 

PortOr 

PortOw 

R 

W 

Read  content  of  PortOr  register. 
Write  to  PortOw  register. 

00F5H 

2141H 

Portlr 

Portlw 

R 

W 

Read  content  of  Portlr  register. 
Write  to  Portlw  register. 

00F6H 

2142H 

Port2r 

Port2w 

R 

W 

Read  content  of  Port2r  register 
Write  to  Port2w  register. 

00F7H 

2143H 

Port3r 

Port3w 

R 

W 

Read  content  of  Port3r  register. 
Write  to  Port3w  register. 

Figure  3-3-1  I/O  Diagram 
From  SCPU  To  SCPU 


Port  n r + 


Port  n w 


To  Sound-CPU 


From  Sound-CPU 


(NCL  PG  7) 


3-3-2 


SNES  DEVELOPMENT  MANUAL 


1 


Chapter  4.  Control  Register 

4.1  THE  PORT  CLEAR  FUNCTION  BY  MEANS  OF  THE  CONTROL 
REGISTER. 

The  ports  are  cleared  to  “00”  when  “1  ” is  written  into  the  control  register  port  clear 
control  bits  PC32  and  PC10.  When  “0”  is  written  in,  they  are  not  cleared. 

When  “1”  is  written  into  the  port  clear  control  bit  PC10,  both  the  port  Or  register 
and  the  port  1 r register  are  cleared  to  “00”.  In  the  same  manner,  when  “1  ” is  writ- 
ten into  PC32,  both  the  port  2r  register  and  the  port  3r  register  are  cleared  to  “00”. 


CONTROL  REGISTER 


D7  D6  D5  D4  D3  D2  D1  DO 


Control 

(00F1H) 

- 

- 

PC32 

PC10 

- 

ST2 

ST1 

ST0 

(W) 

i 

□ 

“1  ” Port  Reset 

“0”  No  Clear 


When  Reset:  “--00-000” 


Figure  3-4-1  Port  Clear 
Note:  Clear  Timing 

Port  clear  is  executed  during  the  machine  cycle  following  that  in  which  “1” 
is  written  into  the  port  clear  control  bit. 

When  port  clear  timing  conflicts  with  write  timing  to  the  port  in  question 
from  the  SNES  bus,  there  are  cases  in  which  the  contents  of  the  register  in 
question  become  indeterminate. 


Machine  Cycle  Machine  Cycle 

4 M ► 


Clear  Pulse 


Timing  when  “1”  is  written  into  the  port  clear  control  bit. 


Figure  3-4-2  Clear  Timing 

(NCL  PC  8) 


3-4-1 


CONTROL  REGISTER 


4.2  TIMER  CONTROL  BY  MEANS  OF  THE  CONTROL  REGISTER 


CONTROL  REGISTER 
D7  D6  D5  D4  D3  D2  D1  DO 


Control 

(00F1H) 

" 

- 

PC32 

PC10 

- 

ST2 

ST1 

ST0 

i 

k i 

i i 

k 

(W) 


“0”  Timer  Stop 


When  Reset:  “--00-000" 


Figure  3-4-3  Timer  Control 

ST0  is  the  Timer  TO  start/stop  control  bit;  the  timer  stops  with  “0”  and  starts  with 
“1  At  this  timer,  it  is  necessary  to  input  “1  ” into  ST0  once  it  has  been  changed  to 
“0”. 

ST  1 and  ST2  are  respectively  the  start/stop  control  bits  of  timers  T 1 and  T2.  Their 
function  is  identical  to  that  of  ST0. 

NOTE:  In  regard  to  the  functional  operation  of  timers,  please  refer  to  the  next 
page. 


(NCL  PG  9) 


3-4-2 


SNES  DEVELOPMENT  MANUAL 


Chapter  5.  Timers 


5.1  FUNCTION  OF  TIMERS  TO,  T1 , AND  T2 

The  SNES  sound  source  is  provided  with  three  timers;  TO,  T1 , and  T2. 


Clock 

2.048  MHz *\  prescaler  8 bits 


8KHz 

— H 


Lower  level  8-bit 
programmable  interval  timer 


Upper  level  4-bit 
up  counter 


8KHz 

H 


Same  as  above 


*\  Same  as  above 


64KHz 


Same  as  above 


Same  as  above 


:T0 


:T1 


:T2 


Figure  3-5-1  Timer  Section 

The  timers  TO,  T1 , and  T2  are  each  composed  of  a lower  level  8-bit  programma- 
ble interval  timer  connected  to  an  upper  level  4-bit  up  counter. 

The  8-bit  timer  is  made  up  of  an  8-bit  binary  up  counter,  comparator,  timer  regis- 
ter, and  control  circuit.  Each  of  the  timers;  TO,  T1 , and  T2;  is  independently  pro- 
grammable. 

The  clock  input  to  timers  TO  and  T1  from  the  prescaler  is  8KHz  (125  ps)  and  the 
clock  input  to  timer  T2  from  the  prescaler  is  64KHz  (1 5.6  ps). 


8-bit  Timer 

4-bit  Up  Counter 

Resolution 

Max.  Count  Value 

Max.  Count  Value 

Timer  TO,  T1 

125  psec. 

32  msec. 

512  msec. 

Timer  T2 

15.6  psec. 

4 msec. 

64  msec. 

Table  3-5-1  Timer  Function 


(N CL  PG  J 0) 


TIMERS 


5.2  TIMER  ACTION 


Since  timers  TO,  T1 , and  T2  are  alike  in  structure,  an  explanation  of  only  timer  TO 
is  provided. 

The  lower  level  8-bit  timer  of  timer  TO  is  composed  principally  of  a binary  up 
counter,  which  is  incremented  at  each  count  of  the  clock  input.  When  its  value  cor- 
responds to  the  contents  of  the  timer  register,  it  is  cleared  to  00H.  Simultaneously 
a pulse  is  generated  to  the  4-bit  up  counter. 

The  4-bit  up  counter  is  composed  principally  of  a binary  up  counter,  which  incre- 
ments at  each  input  of  a lower  level  pulse. 

The  action  of  the  counter  of  timer  TO  is  controlled  by  the  0 bit  of  the  control  regis- 
ter. When  bit  STO  is  “0”  count  up  is  suspended.  Count  up  commences  when  both 
upper  and  lower  level  counters  are  cleared  by  “1  ”.  Consequently,  in  order  to  clear 
the  counters,  it  is  necessary  to  set  bit  STO  to  “1  ” after  having  set  it  to  “0”. 

Writing  to  the  timer  register  is  carried  out  while  the  counter  is  stopped.  At  this  time 
the  minimum  write  value  is  00H  and  the  maximum  value  is  01 H.  Though  it  is  not 
possible  to  read  the  value  of  the  timer  register,  it  is  possible  to  read  the  4-bit  value 
CNO  at  any  time.  When  the  value  of  CNO  is  read,  only  the  4-bit  up  counter  section 
is  cleared  to  “00". 


Upper  Level  4-bit  Counter  Timing 


Figure  3-5-2  4-bit  Counter 


4-bit  Counter 


Action  of  timer  TO  is  stopped  by  means  of  the  reset  input  (POR=”L”).  At  the  time  of 
reset,  STO  of  the  control  register  is  “0”  and;  CNO  and  TM0  of  the  timer  register  are 
indeterminate. 

When  CN  is  read,  the  4-bit  up  counter  alone  is  cleared  through  1C  internal  timing, 
But  the  read  clear  pulse  and  the  pulse  to  the  4-bit  up  counter  do  not  conflict  with 
each  other. 

Consequently,  when  the  pulse  is  input  to  the  4-bit  up  counter,  the  value  of  CN  will 
necessarily  be  incremented;  or  when  the  value  of  CN  is  read,  CN  will  be  cleared 
and  become  “0”. 


Figure  3-5-3.  Timing  Value  is  4 


(NCL  PG  71) 


3-5-2 


SNES  DEVELOPMENT  MANUAL 


5.3  TIMER  RELATED  REGISTERS 

Control  Register 


Control 

(00F1H) 


D7  D6  D5  D4  D3  D2  D1  DO 


PC32 

PC10 

ST2 

ST1 

STO 

i 

L i 

k i 

k 

M 

(W) 


When  Reset:  “--00-000” 


Tinner  Register 


Timer-0 

(00FAH) 

Timer-1 

(00FBH) 


Timer-2 

(OOFCH) 


D7  D6  D5  D4  D3  D2  D1  DO 
TMO 


TM1 


TM2 


(W) 

(W) 

(W) 


Counter  Register 


D7  D6  D5  D4  D3  D2  D1  DO 


Counter-0 

CNO 

(OOFDH) 

1 1 1 

1 1 1 

Counter-1 

CN1 

(OOFEH) 

1 1 1 

1 1 1- 

Counter-2 

CN2 

(OOFFH) 

111- 

1 1 1 

(R) 

(R) 

(R) 


Indeterminate 
When  Reset 


Figure  3-5-4  Tinner  Related  Registers 

(NCL  PG  12) 


3-5-3 


DSP  INTERFACE  REGISTER 


Chapter  6.  DSP  Interface  Register 
6.1  Interface  Register 

D7  D6  D5  D4  D3  D2  D1  DO 

Register  Address 
(00F2H) 


D7  D6  D5  D4  D3  D2  D1  DO 

Register  Data 
(00F3H) 

_ Indeterminate 

Figure  3-6-1 . Interface  Register  When  Reset 

This  is  the  register  which  loads  data  into  the  registers  within  DSP.  Values  are 
loaded  into  the  designated  register  in  accordance  with  the  path  of  the  flow-chart 
below.  The  DSP  address  is  written  to  00F2H  and  data  is  written  to  00F3H  (refer  to 
Flow  A).  When  the  contents  of  the  register  data  is  read,  it  conforms  to  Flow  B.  The 
address  to  be  read  is  loaded  into  00F2H  and  the  contents  of  00F3H  are  read. 

Figure  3-6-2.  Interface  Register  Flow 


Loading  Data  into  Reading  Data  in 

DSP  Registers  DSP  Registers 


Secondary  Secondary 

Processing  Processing 


(NCI  PC  13) 


3-6-1 


SNES  DEVELOPMENT  MANUAL 

3 

Chapter  7.  Register  Used 
7.1  DSP  REGISTER  MAP 


Address 

Register 

Explanation  of  Function 

00 

VOL  (L) 

Left  Channel  Volume  VOICE  O 

01 

VOL  (R) 

Right  Channel  Volume 

02 

P(L) 

The  total  14  bits  of  P(H)  and  P(L)  express 

03 

P (H) 

Pitch  Height 

04 

SRCN 

Designates  source  number  from  0-255 

05 

ADSR  (1) 

Address  is  designated  by  D7=1  of  ADSR(1);  when 

06 

ADSR  (2) 

D7 

=0,  Gain  is  operative 

07 

GAIN 

Envelope  can  be  freely  designated  by  the  program 

08 

ENVX 

Present  value  of  envelope  which  DSP  rewrites  at 
each  Ts 

09 

OUTX 

Value  after  envelope  multiplication  & before  VOL 
multiplication  (present  wave  height  value) 

10  ~ 19 
20  - 29 
30  ~ 39 

Voice  1 
Voice  2 
Voice  3 

| 

Same  as  Voice  0 

40-49 

50-59 

60-69 

Voice  4 
Voice  5 
Voice  6 

1 

70-79 

Voice  7 

/ 

oc 

MVOL  (L) 

Main  Volume  (L) 

1C 

MVOL  (R) 

Main  Volume  (R) 

2C 

EVOL  (L) 

Echo  Volume  (L) 

3C 

EVOL  (R) 

Echo  Volume  (R) 

4C 

KON 

Key  On,  D0-D7  correspond  to  Voice0-Voice7 

5C 

KOF 

Key  Off 

6C 

FLG 

Designated  on/off  of  reset,  mute,  echo,  and  noise 
clock 

7C 

ENDX 

Indicates  source  end  block 

0D 

EFB 

Echo  Feedback 

ID 

Not  Used 

2D 

PMON 

Pitch  modulation  of  Voice  i with  OUTX  of  Voice  (i-1) 
as  modulated  wave 

3D 

NON 

Noise  on/off,  D0-D7  correspond  to  Voice0-Voice7 

4D 

EON 

Echo  On/Off 

5D 

DIR 

Off-set  address  of  source  directory 

6D 

ESA 

Off-set  address  of  echo  region,  Echo  Start  Address 

7D 

EDL 

Echo  Delay.  Only  lower  level  4 bits  active. 

OF 

IF 

2F 

3F 

4F 

5F 

6F 

7F 


Filter 

Coefficients 


CO 

Cl 

C2 

C3 

C4 

C5 

C6 

C7 


\ 


Echo  Filter  coefficients 

Makes  up  an  8 tap  FIR  Filter 

(Both  Lch  & Rch  have  the  same  filter) 


/ 


Register  written  to  by  DSP  during  conditions  of  activity. 


Table  3-7-1  DSP  Register  Map 


(NCL  PG  U) 


3-7-1 


REGISTER  USED 


7.2  REGISTER  FUNCTION 

7.2.1  Register  of  each  voice  (Addresses  indicated  are  those  of  Voice  0). 

7.2.1. 1 VOL  (L),  VOL  (R) 

D7  D6  D5  D4  D3  D2  D1  DO 

VOL  (L) 

(00H) 

VOL  (R) 

(01 H) 

Each  is  a volume  level  multiplied  by  Lch  and  Rch,  which  is  in  a 2’s 
complement  form  making  D7  the  sign  bit.  When  a negative  value 
is  entered,  phases  reverse. 

7.2.1. 2 P(L),  P(H) 

P(H) 

(03H) 

P(L) 

(02H) 

Pitch  is  expressed  by  the  total  14  bits  combining  six  lower  level 
bits  of  P(H)  and  eight  bits  of  P(L).  At  the  current  time,  two  upper 
level  bits  of  P(H)  are  not  used.  (Considered  to  be  “0”  at  all  times.) 
With  f as  the  frequency  of  the  reproduced  sound,  f0  as  the  fre- 
quency of  the  original  sound  (sound  at  the  time  of  recording), 
and  P as  the  value  expressed  by  the  lower  level  fourteen  bits 
of  P(H)  and  P(L),  the  following  formula  is  performed: 


The  diagram  below  illustrates  the  relationship  between  P and  the 
octaval  ratio  of  the  reproduced  sound  and  the  original  sound. 
There  are  theoretically  no  limitations  in  the  practical  range  so  long 
as  the  original  sound  is  converted  lower.  The  upper  range  is  limit- 
ed to  approximately  four  times  the  frequency  of  the  original  sound. 

Interval:  -2oct.  -loct.  original  +1oct.  +2oct.  (approx.) 

sound 


P:  0400H  0800H  1000H  2000H  3FFFH 

In  terms  of  tone  quality,  the  lower  level  4 bits  of  P(L)  should  be  set 
at  “0”  when  possible  in  cases  where  pitch  aberrations  are  not  of 
concern. 


< NCL  PC  15) 


D7  D6  D5  D4  D3  D2  D1  DO 


3-7-2 


SNES  DEVELOPMENT  MANUAL 


3 


7.2. 1.3  ADSR(1),  ADSR(2) 


D7  D6  D5  D4  D3  D2  D1  DO 


ADSR(1) 

ADSR 

DR 

AR 

(05H) 

/GAIN 

i i 

i i i 

ADSR(2) 

SL 

SR 

(06H) 

1 1 1 

1 1 1 1 

When  D7  of  ADSR(1)  = “1”,  these  two  bytes  become  operable. 
(ADSR  mode) 

AR  is  added  to  the  fixed  value  “1/64”  and  DR,  SR  by  the  fixed  val- 
ue “1-1/256”.  When  in  the  state  of  “Key  Off”,  the  “click”  sound  is 
prevented  by  the  addition  of  the  fixed  value  “1/256”.  (GAIN  mode 
is  identical.) 

Table  3-7-2  Adsr  Parameters 


m 

Ratio 

El 

1/8 

i 

2/8 

m 

3/8 

3 

4/8 

4 

5/8 

5 

6/8 

6 

7/8 

7 

1 

m 

Time  from  0 to  1 

0 

4.1  sec 

1 

2.6  sec 

2 

1 .5  sec 

3 

1.0  sec 

4 

640  msec 

5 

380  msec 

6 

260  msec 

7 

1 60  msec 

8 

96  msec 

9 

64  msec 

A 

40  msec 

B 

24  msec 

C 

1 6 msec 

D 

1 0 msec 

E 

6 msec 

F 

0 msec 

Time  from  1 to  SL 

0 

1 .2  sec 

i 

740  msec 

n 

440  msec 

3 

290  msec 

4 

180  msec 

5 

110  msec 

6 

74  msec 

7 

37  msec 

o 

t t 


Time  from  0 to  1 

o 

Infinite 

1 

38  sec 

n 

28  sec 

3 

24  sec 

4 

19  sec 

5 

14  sec 

6 

12  sec 

7 

9.4  sec 

8 

7.1  sec 

9 

5.9  sec 

A 

4.7  sec 

B 

3.5  sec 

c 

2.9  sec 

D 

2.4  sec 

E 

1 .8  sec 

F 

1 .5  sec 

10 

1 .2  sec 

11 

880  msec 

12 

740  msec 

13 

590  msec 

14 

440  msec 

15 

370  msec 

16 

290  msec 

17 

220  msec 

18 

180  msec 

19 

150  msec 

1 A 

110  msec 

IB 

92  msec 

1C 

74  msec 

ID 

55  msec 

IE 

37  msec 

IF 

18  msec 

Key  On 


Key  Off 


(NCL  PG  16) 


3-7-3 


REGISTER  USED 


7.2.1. 4 GAIN 

This  becomes  operable  when  D7  of  ADSR(1)  = 0.  The  following 
five  modes  are  available. 


D7  D6  D5  D4  D3  D2  D1  DO 
Direct  Designation  I I 


Increase  Mode  (Linear) 

1 

(07H) 

1 

0 

-..-1 1—1 L 

Increase  Mode  (Bent  Line) 

-I 

1 

1 

(07H) 

1 

1 1 1 1 

Decrease  Mode  (Linear) 

1 

(07H) 

0 

0 

1 1 1 1 

Decrease  Mode  (Exponential) 

1 

A 

1 

(07H) 

U 

1 1 1 1 

.-.  Direct  Designation:  The  value  of  GAIN  is  set  directly  by  the  values  of  DO  ~ D6. 

Increase  (Linear):  Addition  of  the  fixed  value  1/64. 

. . Increase  (Bent  Line):  Addition  of  the  constant  1/64  up  to  0.75,  addition  of  the 
constant  1/256  from  0.75  to  1. 

Decrease  (Linear):  Subtraction  of  the  fixed  value  1/64. 

- Decrease  (Exponential):  Multiplication  by  the  fixed  value  1-1/256. 

In  all  cases,  present  envelope  values  (indicated  by  ENVX)  are  uti- 
lized for  initial  values. 


The  various  parameter  values  are  indicated  on  the  next  page. 


(NCL  PG17) 


SNES  DEVELOPMENT  MANUAL 


■ - I 

GAIN  PARAMETERS 


Parameter 

Values 

Increase  Mode 
Linear  (0 — M) 

Increase  Mode 
Bentline(0 — M) 

Decrease  Mode 
Linear(1 — ►0) 

Decrease  Mode 
Exponential 
(0 — ►1/10) 

00 

Infinite 

Infinite 

Infinite 

Infinite 

01 

4.1  sec 

7.2  sec 

4.1  sec 

38  sec 

02 

3.1  sec 

5.4  sec 

3.1  sec 

28  sec 

03 

2.6  sec 

4.6  sec 

2.6  sec 

24  sec 

04 

2.0  sec 

3.5  sec 

2.0  sec 

19  sec 

05 

1 .5  sec 

2.6  sec 

1 .5  sec 

14  sec 

06 

1 .3  sec 

2.3  sec 

1 .3  sec 

12  sec 

07 

1 .0  sec 

1 .8  sec 

1.0  sec 

9.4  sec 

08 

770  msec 

1 .3  sec 

770  msec 

7.1  sec 

09 

640  msec 

1 .1  sec 

640  msec 

5.9  sec 

0A 

510  msec 

900  msec 

510  msec 

4.7  sec 

OB 

380  msec 

670  msec 

380  msec 

3.5  sec 

OC 

320  msec 

560  msec 

320  msec 

2.9  sec 

OD 

260  msec 

450  msec 

260  msec 

2.4  sec 

OE 

190  msec 

340  msec 

1 90  msec 

1 .8  sec 

OF 

160  msec 

280  msec 

1 60  msec 

1 .5  sec 

10 

130  msec 

220  msec 

130  msec 

1 .2  sec 

11 

96  msec 

170  msec 

96  msec 

880  msec 

TO 

80  msec 

140  msec 

80  msec 

740  msec 

MM 

64  msec 

110  msec 

64  msec 

590  msec 

14 

48  msec 

84  msec 

48  msec 

440  msec 

15 

40  msec 

70  msec 

40  msec 

370  msec 

16 

32  msec 

56  msec 

32  msec 

290  msec 

17 

24  msec 

42  msec 

24  msec 

220  msec 

n 

20  msec 

35  msec 

20  msec 

180  msec 

MM 

1 6 msec 

28  msec 

1 6 msec 

150  msec 

1 A 

1 2 msec 

21  msec 

12  msec 

110  msec 

IB 

1 0 msec 

18  msec 

1 0 msec 

92  msec 

1C 

8 msec 

14  msec 

8 msec 

74  msec 

ID 

6 msec 

11  msec 

6 msec 

55  msec 

IE 

4 msec 

7 msec 

4 msec 

37  msec 

IF 

2 msec 

3.5  msec 

2 msec 

18  msec 

Table  3-7-3Gain  Parameters 


(NCL  PC  18) 


3-7-5 


REGISTER  USED 


7.2.1. 5  SRCN 

Refers  to  source  number.  It  is  the  sequence  of  tone  color  within 
the  hexa-file  of  tones  produced  by  means  of  a separate  tool.  (0  ~ 
255) 


D7  D6  D5  D4  D3  D2  D1  DO 


SRCN 

(04H) 


7.2.1. 6  ENVX 


The  present  value  of  the  ADSR/GAIN  envelope  constant.  The 
DSP  section  rewrites  this  at  each  Ts  (31 .25  psec). 


, (D7  is  always  0). 


D7  D6  D5  D4  D3  D2  D1  DO 

ENVX 
(08H) 


7.2.1. 7  OUTX 

The  present  value  of  the  wave  height  after  envelope  multiplication 
and  prior  to  VOL  multiplication.  The  DSP  section  rewrites  this  at 
each  Ts.  (31 .25  psec).  Its  value  is  utilized  as  the  modulated  wave 
of  pitch  modulation. 


D7  D6  D5  D4  D3  D2  D1  DO 

OUTX 
(09H) 


(NCI  PC  19) 


3-7-6 


SNES  DEVELOPMENT  MANUAL 


7.2.2  COMPLETE  VOICE  REGISTERS 

7. 2.2.1  KON,  KOF 

“Key  on”  and  “Key  off”.  DO  ~ D7  correspond  to  Voice  0 ~ 7.  When 
a “1  ”,  key  on  or  key  off  are  active;  when  “0”  neither  is  active.  These 
two  registers  need  not  be  reset.  With  KOF,  in  regard  to  any  Voice 
in  which  a “1  ” is  written  and  whether  in  the  ADSR  mode  or  GAIN 
mode,  1 to  0 decreases  at  the  rate  of  8 msec  by  means  of  the  ad- 
dition of  the  fixed  value  1/256.  In  writing  in  a succession  of  KON 
and  KOF,  two  Ts  (62.5  psec)  or  more  should  be  released.  (In  writ- 
ing a succession  of  various  data  in  less  that  2 Ts,  the  data  written 
may  not  be  usable  later.) 

D7  D6  D5  D4  D3  D2  D1  DO 

KON 
(4CH) 

KOF 
(5CH) 


7. 2. 2. 2  PMON 

Pitch  modulation  is  imposed  on  Voice  n with  OUTX  of  Voice(n-1 ) 
(n=1-7)  as  a modulated  wave.  When  Dn=1 , it  becomes  modula- 
tion ON.  (For  example,  when  D1=1 , a modulated  tone  is  generat- 
ed from  Voice  1 .)  However  modulation  does  not  affect  Voice  0. 
Therefore,  the  bit  DO  is  not  active.  In  regard  to  the  method  of  pitch 
modulation,  when  y0  is  the  wave  height  value  of  the  modulated 
wave  and  P is  the  value  of  P(H)  and  P(L),  then: 

P’  = P(i+y0) 

The  value  of  P”,  as  above,  is  substituted  for  P and  used  as  the  pitch  at  that  time. 

D7  D6  D5  D4  D3  D2  D1  DO 

PMON 
(2DH) 


7.2. 2.3  NON 


Voice  7 

Voice  6 

Voice  5 

Voice  4 

Voice  3 

Voice  2 

Voice  1 

X 

Voice  7 

Voice  6 

Voice  5 

Voice  4 

Voice  3 

Voice  2 

Voice  1 

Voice  0 

Voice  7 

Voice  6 

Voice  5 

Voice  4 

Voice  3 

Voice  2 

Voice  1 

Voice  0 

Noise  on/off.  DO  ~ 7 correspond  to  Voice  0 ~ 7.  When  on,  noise  is 
issued  instead  of  sound  source  data.  At  this  time,  if  sound  source 
data  of  formants  only  is  designated  through  the  previous  SRCN, 
then  noise  is  generated  only  for  the  duration  of  the  sound  source 
data.  When  reproduction  for  random  lengths  of  time  is  desired, 
sound  source  data  incorporating  a loop  must  be  designated 
through  the  SRCN.  In  addition,  even  though  two  or  more  Voices 
may  be  on,  the  source  of  noise  is  the  same. 

Note:  Modulation  can  not  be  imposed  on  this  noise. 

D7  D6  D5  D4  D3  D2  D1  DO 

NON 
(3DH) 


Voice  7 

Voice  6 

Voice  5 

Voice  4 

Voice  3 

Voice  2 

Voice  1 

Voice  0 

(NCL  PC  20) 


3-7-7 


REGISTER  USED 


7. 2. 2. 4 EON 

Echo  on/off.  Active  “1  DO  ~ 7 correspond  to  Voice  0 ~ 7. 


D7 

D6 

D5 

D4 

D3 

D2 

D1 

DO 

Voice  7 

Voice  6 

Voice  5 

Voice  4 

Voice  3 

Voice  2 

Voice  1 

Voice  0 

(5)  FLG 


D7 

D6 

D5 

D4  D3  D2  D1 

FLG 

(6CH) 

RES 

MUTE 

ECEN 

NCK 

1 1 1 L 

RES:  Soft  reset  is  turned  on  when  D7=1 . At  this  time,  all  Voices 
are  in  a state  of  “Key  On”  suspension  and  Mute  is  turned  on.  It  be- 
comes a “1  ” with  power  on. 

MUTE:  Mute  is  turned  on  in  all  Voices  when  D6=1 . This  always  oc- 
curs  when  power  is  first  applied. 

ECEN:  Allows  the  possibility  to  write  into  external  memory  through 
Echo,  when  D5=0.  (Echo  Enable).  After  power  on,  read  out  data  is 
indeterminate  until  initial  data  is  written  in  by  the  CPU. 

NCK:  Designates  the  clock  of  the  noise  generator. 

Table  3-7-4.  Noise  Generator  Clock 


NCK 

Freq. 

NCK 

Freq. 

NCK 

Freq. 

NCK 

Freq. 

00 

0 Hz 

08 

83  Hz 

10 

500  Hz 

18 

3.2  KHz 

01 

16  Hz 

09 

100  Hz 

11 

667  Hz 

19 

4.0  KHz 

02 

21  Hz 

0A 

125  Hz 

12 

800  Hz 

1 A 

5.3  KHz 

03 

25  Hz 

0B 

167  Hz 

13 

1 .0  KHz 

IB 

6.4  KHz 

04 

31  Hz 

OC 

200  Hz 

14 

1.3  KHz 

1C 

8.0  KHz 

05 

42  Hz 

0D 

250  Hz 

15 

1 .6  KHz 

ID 

10.7  KHz 

06 

50  Hz 

0E 

333  Hz 

16 

2.0  KHz 

IE 

16  KHz 

07 

63  Hz 

OF 

400  Hz 

17 

2.7  KHz 

IF 

32  KHz 

It  is  only  possible  to  write  into  these  registers  from  the  CPU  sec- 
tion. 


(NCLPG  2V 


3-7-8 


SNES  DEVELOPMENT  MANUAL 


7. 2.2.5  ENDX 


When  BRR  decode  of  the  block  having  the  Source  End  flag  is 
completed,  the  DSP  section  sets  up  a “1”.  DO  ~ 7 correspond  to 
Voice  0 ~ 7.  If  there  is  a voice  which  has  been  keyed  on,  the  bit 
corresponding  to  this  voice  is  reset.  In  addition,  when  the  CPU 
section  writes  into  this  register,  all  bits  are  reset. 


D7 

D6 

D5 

D4 

D3 

D2 

D1 

DO 

ENDX 

(7CH) 

Voice  7 

Voice  6 

Voice  5 

Voice  4 

Voice  3 

Voice  2 

Voice  1 

Voice  0 

7. 2. 2. 6  MVOL(L),  MVOL(R),  EVOL(L),  and  EVOL(R) 


Refer  to  Main  Volume  (Lch,  Rch)  and  Echo  Volume  (Lch,  Rch). 
The  output  of  this  register  is  the  sum  of  main  volume  and  echo  vol- 
ume with  a sign  bit. 


MVOL(Lch,  Rch; 
EVOL(Lch,  Rch) 
(OCH) 
(1CH) 


D7  D6  D5  D4  D3  D2  D1  DO 


7. 2.2.7  ESA 


Echo  Start  Address.  Issues  the  off-set  address  of  the  Echo  region. 
(ESA)  x 1 00H  becomes  the  lead-off  address  of  the  Echo  region. 

7. 2. 2. 8  EDL 

Echo  Delay.  Only  the  lower  level  four  bits  are  used.  Delay  time  o is 
an  interval  of  16  msec,  and  is  variable  within  a range  of  0 ~ 240 
msec.  If  this  time  is  considered  to  be  t , the  necessary  external 
memory  region  is  (2/)  Kbytes,  with  a maximum  allowable  of  30 
Kbytes.  However,  when  EDL=0,  the  four  byte  memory  region  of 
ESA  - ESA+3  becomes  necessary. 

D7  D6  D5  D4  D3  D2  D1  DO 

EDL 
(7DH) 


7. 2. 2. 9  EFB 


Refers  to  Echo  Feed-Back.  This  word  consists  of  eight  bits  includ- 
ing a sign  bit. 

D7  D6  D5  D4  D3  D2  D1  DO 

EFB 
(ODH) 

7.2.2.10  DIR 

Issues  the  off-set  address  of  the  source  directory.  (DIR)  x 1 0OHs 
is  the  beginning  address  of  the  directory. 


Sign 


(NCL  PG  22) 


3-7-9 


E 


REGISTER  USED 


7.2.2.11  CO  ~ C7 

Issues  the  filter  coefficient.  It  is  composed  of  eight  bits,  including 
a sign  bit  and  makes  up  an  eight  tap  FIR  filter  (identical  with  that 
of  Lch  and  Rch). 


D7  D6  D5  D4  D3  D2  D1  DO 


CO  ~ C7 
(OFH)  ~ (7FH) 


Sign 


Filter  Setting  Example  1 : When  a low  pass  filter  is  imposed  on  the  echo  sound. 


Register 

Numerical  Value 

CO 

FF 

Cl 

08 

C2 

17 

C3 

24 

C4 

24 

C5 

17 

C6 

08 

C7 

FF 

Filter  Setting  Example  2:  When  the  echo  sound  is  given  the  same  tone  color  as 
the  original  sound. 


Register 

Numerical  Value 

CO 

7F 

Cl 

00 

C2 

00 

C3 

00 

C4 

00 

C5 

00 

C6 

00 

C7 

00 

(NCL  PG  23) 


3-7-10 


SNES  DEVELOPMENT  MANUAL 


7.3  SOUND  SOURCE  DATA  (SOURCE)  SPECIFICATIONS  * 

Sound  source  data  is  produced  according  to  the  following  specifications  by  means 
of  specialized  tools. 

7.3.1  Source  Directory 

7.3.1. 1 SA(H),  SA(L) 

The  source  start  address.  This  16  bit  address  is  the  lead-off  ad- 
dress of  the  lead-off  block. 

7.3.1. 2 LSA(H),  LSA(L) 

Source  loop  start  address.  This  16  bit  address  is  the  lead-off  ad- 
dress of  the  loop  start  block. 

Table  3-7-5.  Source  Directory 


SA:  Source  Start  Address 
LSA:  Source  Loop  Start  Address 


* Sound  source  data  used  in  the  SNES  is  called  “Source". 


(NCL  PG  24) 


3-7-11 


REGISTER  USED 


7.3.2  SOURCE  DATA 

7.3.2. 1 BLOCK  FORMAT 

The  sound,  sampled  at  32KHz,  undergoes  BRR  (bit  rate  reduc- 
tion) processing  and  the  data  is  condensed  from  16  bits  to  4 bits 
The  four-bit  data  is  arranged  into  sixteen  portions  and,  together 
with  the  RF  register,  is  formed  into  one  block  of  nine  bytes. 


D7  D6  D5  D4 

D3  D2 

D1 

DO 

RF 

BRR  Data 

i i i i 

1 

Loop 

on/off 

END 

Dao 

X 

o 

< 

O 

o 

< 

D 

dbo 

DB0H 

dbol 

Dai 

X_ 

< 

Q 

DaiL 

Dbi 

DB1H 

DbiL 

CM 

< 

Q 

X 

CM 

< 

Q 

dA2l 

DB2 

DB2H 

dB2l 

DA3 

dA3h 

dA3l 

DB3 

dB3h 

dB3l 

Table  3-7-6  Source  Data  Block  Format 
7. 3. 2. 2 RF 

Bits  D7  ~ D2  is  composed  of  data  relating  to  BRR.  When  D1=1 , it 
indicated  that  it  is  a source  having  a loop  and  when  D1=0,  it  indi- 
cates that  the  block  is  the  block  with  the  final  data. 


(NCL  PC  25) 


SNES  DEVELOPMENT  MANUAL 


Chapter  8.  CPU  Organization 

A Sony  SPC700  series  is  used  in  the  CPU  core  of  the  SNES  Sound  Source.  It  is  possible 
to  access  and  address  space  of  64  Kbytes  in  the  SPC  series  CPU.  Address  classification 
of  the  memory  space  is  made  according  to  purpose;  addresses  0000H  ~ 00FFH  are 
called  page  0 and  addresses  0100H  ~ 01 FFH  are  called  page  1.  In  regard  to  the  data  in 
this  region;  when  direct  page  designation  is  carried  out  by  the  direct  page  flag  (P)  within 
the  program  status  word,  it  is  possible  to  carry  out  data  processing  in  wide-ranging  ad- 
dressing modes  with  a small  number  of  machine  cycles. 

Within  the  CPU  there  are  the  universal  registers  A,  X,  and  Y,  program  status  word  (PSW) 
of  the  various  flags,  program  counter  (PC),  and  stack  pointer  (SP). 

The  A register  is  operable  by  the  greatest  number  of  commands  and  becomes  an  8-bit 
operation  accumulator.  When  16-bit  operations  are  carried  out,  it  becomes  paired  with 
the  Y register  and  becomes  the  lower  level  8-bit  register  of  the  1 6-bit  accumulator.  The  X 
and  Y registers,  in  addition  to  their  function  as  universal  registers,  are  used  in  various  op- 
erations. These  include;  functions  as  index  register  of  various  index  addressing  modes, 
as  dual  address  command  source,  destination  address  register,  etc. 

In  the  command  set  there  are  single  address  commands  which  carry  out  arithmetic  and 
logical  operations  centered  in  the  A register  and  dual  address  commands  which  can  des- 
ignate random  addresses  within  the  direct  page  as  source  addresses  and  destination  ad- 
dresses. 

In  regard  to  bit  processing  diversified  by  control  purpose,  Boolean  bit  operation  com- 
mands are  applicable  to  the  8 Kbyte  wide  range  of  data  of  addresses  0000H  ~ 1 FFFH. 
Moreover,  in  regard  to  the  bits  within  the  direct  page,  set,  reset  and  bit  conditional  rela- 
tive jump  can  be  utilized.  In  regard  to  the  data  within  the  total  space  of  the  64  Kbytes; 
commands  of  multiple  bit  test  and  set,  test,  and  reset  are  provided.  For  the  purpose  of 
data  which  must  be  systematized  or  in  order  to  carry  out  data  processing  rapidly,  it  is 
possible  to  operate  16-bit  data  with  a single  command.  Addition,  subtraction,  compari- 
son, and  transference  are  possible  between  two  bytes  of  continuous  16-bit  data  within 
the  direct  page  and  the  paired  Y register  and  A register.  In  addition,  increment  and  dec- 
rement of  continuous  16-bit  data  within  the  direct  page  are  possible. 

There  are  multiplication  and  division  commands  for  the  purpose  of  rapid  data  processing 
and  processing  of  data  in  a variety  of  forms.  Multiplication  is  8-bits  x 8-bits  with  no  sign 
and  is  carried  out  with  the  multiplicand  stored  in  the  Y register  and  the  multiplier  stored  in 
the  A register;  the  result  is  entered  into  the  (Y,A)  1 6-bit  accumulator.  Division  is  1 6 bits/8 
bits  with  no  sign  and  is  carried  out  with  the  dividend  stored  in  the  (Y,A)  16  bit  accumula- 
tor and  the  divisor  stored  in  the  X register.  The  resulting  quotient  is  entered  into  the  A 
register  and  the  remainder  into  the  Y register. 


(NCL  PG  26) 


3-8-1 


CPU  REGISTERS 


When  processing  decimal  data,  there  are  decimal  addition/subtraction  correcting  com- 
mands in  regard  to  the  results  of  both  addition  and  subtraction. 

In  regard  to  branched  commands,  there  are  relative  branched  commands  according  to 
the  conditions  of  the  various  status  flags,  according  to  the  conditions  of  set  or  reset  of 
random  bits  within  the  direct  page,  etc.  In  addition,  in  regard  to  looped  branched  com- 
mands, there  are  comparison  branched  commands  and  subtraction  branched  com- 
mands. For  these  there  are  two  types  of  addressing  modes. 

In  regard  to  subroutine  call  commands,  there  are  subroutine  address  direct  designation, 
Three-byte  call  commands  within  the  64  Kbytes,  Two-byte  call  commands  for  calling 
specific  areas,  and  One-byte  call  commands  using  call  tables.  It  is  possible  to  improve 
byte  efficiency  through  proper  usage  in  response  to  the  frequency  of  subroutine  use. 


(NCL  PG  26a) 


3-8-2 


SNES  DEVELOPMENT  MANUAL 


CPU  REGISTERS 

Within  the  CPU  are  the  registers  necessary  for  the  execution  of  various  com- 
mands. These  are  the  A register  (also  functions  as  an  8-bit  accumulator),  X regis- 
ter, Y register  (8-bit  universal  register  which  can  also  be  used  as  an  index 
register),  PSW  (program  status  word),  SP  (stack  pointer),  etc.  These  are  all  8-bit 
registers,  but  the  PC  (program  counter)  is  made  up  of  16  bits. 


Program  Counter 

(16  bits) 

A Register 

(8  bits) 

(Y,  A Paired  16  bit  Accumulator) 

(16  bits) 

X Register 

(8  bits) 

Y Register 

(8  bits) 

Stack  Pointer 

(8  bits) 

Program  Status  Word 

(8  bits) 

Carry  Flag  (Bit  Accumulator) 
Zero  Flag 
Half  Carry  Flag 
Direct  Page  Flag 
Overflow  Flag 
Negative  Flag 


Figure  3-8-1  CPU  Registers 


(NCL  PC  27) 


3-8-3 


CPU  REGISTERS 


8.1.1  A REGISTER 

This  register  is  used  as  an  8-bit  accumulator.  At  times  of  16-bit  operation 
commands,  it  becomes  the  register  which  contains  low  byte  data  in  the  16- 
bit  accumulator,  made  up  of  this  paired  with  the  Y register.  When  operation 
commands  are  issued,  it  becomes  the  multiplier  register  and  low  byte  data 
of  the  product  is  entered.  When  division  commands  are  issued,  paired  with 
the  Y register,  it  formulates  the  dividend  and  the  resulting  quotient  is  en- 
tered. 

8.1.2  X REGISTER 

In  addition  to  its  role  as  a universal  data  register,  it  also  functions  as  an  in- 
dex register  when  index  addressing  is  being  carried  out.  In  addition,  it  is 
used  as  a two-  address  command  destination  address  register  and  X regis- 
ter indirect  address  register.  In  division  commands,  it  becomes  the  divisor 
register. 

8.1.3  Y REGISTER 

In  addition  to  its  role  as  a universal  register,  it  functions  as  an  index  register 
when  index  addressing  is  being  carried  out.  In  addition,  it  is  used  as  a two 
address  command  source  address  register.  When  carrying  out  16-bit  oper- 
ation commands,  it  becomes  the  register  which  contains  the  high  byte  data 
of  the  16-bit  accumulator,  which  is  made  up  of  the  pairing  of  this  register 
with  the  A register.  When  multiplication  commands  are  being  carried  out,  it 
becomes  the  dividend  register  and  the  product  high  byte  data  is  entered. 
When  carrying  out  division  commands,  paired  with  the  A register  it  formu- 
lates the  dividend  and  the  resulting  remainder  is  entered. 

8.1.4  PROGRAM  COUNTER 

The  program  counter  is  made  up  of  16  bits  and  has  an  address  region  of 
64  Kbytes.  The  upper  level  8 bits  are  called  PCH  and  the  lower  level  8 bits 
are  called  PCL.  Normally,  it  will  contain  the  address  to  be  executed  during 
the  next  machine  cycle  and  will  be  incremented  by  only  the  number  of 
bytes  necessary  for  the  command  to  be  fetched.  When  there  is  a branching 
command  in  the  midst  of  the  program,  the  address  of  the  branch  destina- 
tion  will  be  stored  in  the  program  counter.  When  there  is  a reset  (POR)  in- 
put, reset  vectors  which  are  in  addresses  FFFFh  and  FFFEH  enter 
respectively  PCH  and  PCL  for  branching  to  take  place. 

8.1.5  STACK  POINTER 

The  stack  pointer  is  used  to  send  data  to  the  RAM  or  to  recover  data  from 
the  RAM  when  the  subroutine  call  commands  push  (PUSH),  pop  (POP),  or 
return  (RET)  are  to  be  carried  out.  The  address  region  indicated  by  the 
stack  pointer  is  within  page  1 (addresses  0100H  ~ 01FFH). 


15  141312  11  10  987654321  0 


0 

0 

0 

0 

0 

0 

0 

1 

1 1 1 1 1 1 1 

SP  Values 

V 7 

Fixed  by  Hardware  Determined  by  the  Program 


(NCL  PG  28) 


3-8-4 


SNES  DEVELOPMENT  MANUAL 


When  sending  data  to  the  RAM,  the  stack  pointer  decreases  by  one  after 
sending  data  (post  decrement)  and  increases  by  one  prior  to  restoring  data 
(pre-increment).  The  diversified  activities  of  the  stack  pointer  are  summa- 
rized below. 

*SUB-ROUTINE  CALLS 


Stack  Address 

Activity 

SP  Value  After  Sending 

SP 

Sending  to  PCH 

SP-1 

SP-1 

Sending  to  PCL 

SP-2 

•RESTORING  FROM  SUB-ROUTINE 


Stack  Address 

Activity 

SP  Value  After  Sending 

SP 

Restore  to  PCH 

SP+1 

SP+1 

Restore  to  PCL 

SP+2 

To  send  the  contents  of  the  A register,  X register,  Y register,  or  PSW  (pro- 
gram status  word)  to  and  from  the  stack,  the  commands  PUSH  and  POP 
can  be  used. 

•push  A (X,  Y,  PSW) 


Stack  Address 

Activity 

SP  Value  After  Sending 

SP 

Sending  of  A (X,  Y,  PSW) 

SP-1 

•POP  A (X,  Y PSW) 


Stack  Address 

Activity 

SP  Value  After  Sending 

SP 

Restore  A (X,  Y,  PSW) 

SP+1 

(NCL  PC  29) 


CPU  REGISTERS 


8.1.6  PROGRAM  STATUS  WORD  (PSW) 

The  program  status  word  is  made  up  of  the  various  flags  which  are  set  and 
reset  according  to  the  results  of  the  execution  of  8-bit  register  commands 
and  the  various  flags  which  determine  the  activities  of  the  CPU.  When  re- 
set it  becomes  “000-0-00”. 


7 

6 

5 

4 

3 

2 

1 

0 

InJ 

M 

l P 

H 

LJ 

LlI 

LjlI 

0 Carry  Flag  (C) 

After  operation  execution,  this  flag  is  set  when  there  has  been  a carry  from  the  up- 
permost bit  of  the  arithmetic  logic  unit  (ALU)  or  when  there  has  been  no  borrow.  It 
is  also  altered  with  shift  or  rotate  commands.  It  acts  as  bit  accumulator  for  Bool- 
ean bit  operation  commands.  It  is  set  with  the  SETC  command  and  reset  with  the 
CLRC  command.  The  carry  flag  inverts  with  the  NOTC  command. 

0 Zero  Flag  (Z) 

After  operation  execution,  this  flag  is  set  when  the  result  is  zero  and  reset  when 
the  result  is  not  zero.  Even  with  16-bit  operation  commands,  zero  detection  is  car- 
ried out.  It  is  possible  to  carry  out  tests  with  conditional  branching  commands. 

0 Half  Carry  Flag  (H) 

After  operation  execution,  this  flag  is  set  when  there  has  been  a carry  from  bit  3 of 
the  ALU  to  bit  4 or  when  there  has  not  been  any  borrow.  There  is  no  command  to 
set  the  half  carry  flag  however,  it  is  reset  by  means  of  the  CLRV  command.  When- 
ever the  half  carry  flag  is  set,  the  overflow  flag  is  also  set. 

0 Direct  Page  Flag  (P) 

This  is  the  flag  which  designates  the  direct  page  to  which  many  addressing 
modes  are  applicable,  such  as  direct  page  addressing,  etc.  When  “0”,  the  direct 
page  becomes  the  addresses  of  the  region  0000H  ~ 00FFH  and  when  “1”,  it  be- 
comes the  addresses  of  the  region  01 00H  ~ 01 FFH.  It  is  set  by  the  SET  P com- 
mand and  reset  by  the  CLRP  command. 

0 Overflow  Flag  (V) 

After  arithmetic  operation  execution,  this  flag  is  set  when  overflow  or  underflow 
has  been  produced.  When  this  occurs  the  H flag  is  also  set.  It  is  possible  to  carry 
out  tests  with  conditional  branching  commands. 

0 Negative  Flag  (N) 

After  operation  execution,  this  flag  is  set  when  the  value  of  the  result  of  MSB  is  “1  ” 
and  reset  when  its  value  is  “0”.  It  is  possible  to  carry  out  tests  with  conditional 
branching  commands. 


(NCL  PG  301 


3-8-6 


SNES  DEVELOPMENT  MANUAL 


1 


8.2  MEMORY  SPACE 

It  is  possible  for  the  Sound-CPU  to  address  64  Kbytes  of  memory.  Memory  space 
is  divided  up  according  to  purpose.  From  address  0000H,  512  bytes  are  divided 
into  two  pages  of  256  byte  units  called  page  zero  and  page  one.  It  is  possible  to 
access  data  within  these  regions  by  means  of  numerous  addressing  modes,  such 
as  direct  page  addressing,  etc.  Page  one  is  taken  up  by  the  stack. 

8.2.1  Direct  Pages  (Page  Zero,  Page  One) 

By  means  of  setting  or  resetting  the  Direct  Page  flag  (P)  within  the  program 
status  word,  it  is  possible  to  designate  whether  page  zero  or  page  one  is  to 
be  made  the  direct  page.  It  is  set  up  such  that  the  data  within  this  page  can 
be  treated  with  fewer  bytes,  at  a higher  speed,  and  with  more  numerous 
types  of  commands  and  addressing  modes. 

8. 2. 1.1  Stack  Area 

The  stack  region  is  established  in  the  RAM  region  within  page  one. 
The  uppermost  byte  of  the  stack  address  is  fixed  at  01 . The  lower- 
most byte  of  the  stack  address  must  be  given  its  initial  setting  by  the 
program. 

8.2.2  Uppermost  Page  (Internal  ROM  Region) 

A mask  ROM  is  installed  within  the  Sound-CPU  from  FFCOH  - FFFFF. 
There  is  a program  in  it  which  transmits  data  from  the  ROM  cassette  to  the 
512  Kbit  RAM  through  the  SNES  CPU.  This  region  is  used  by  means  of  re- 
set. 


(NCL  PC  3V 


3-8-7 


CPU  REGISTERS 


8.2.3  Area  of  Applicable  Bit  Operation  Commands 

8.2.3.1SET1,  CLR1 

The  commands  SET1  (set  memory  bit)  and  CLR1  (clear  memory 
bit)  are  applicable  to  one-bit  data  with  the  direct  page. 
8.2.3.2TSET1 , TCLR1 

The  commands  TSET1  (test  and  set  bit)  and  TCLR1  (test  and  clear 
bit)  are  applicable  to  the  total  64  Kbyte  region. 

8.2.3.3Boolean  Operation  Commands 

The  Boolean  operation  commands  (AND1 , OR1 , EOR1 , MOV1 , 
NOT  1 ) are  applicable  to  the  8 Kbyte  region  of  0000H  ~ 1 FFFH. 


Figure  3-8-2  Boolean  Bit  Operation  Commands 


(NCL  PG  321 


3-8-8 


SNES  DEVELOPMENT  MANUAL 


8.2.4  Direct  Page  Addressing 

Since  all  of  the  addressing  modes  indicated  in  Figure  2-7-3  are  applicable 
to  the  data  of  the  direct  page  (P=0:  addresses  0000H  ~ 00FFH,  P=1 : ad- 
dresses 0100H  ~ 01  FFh)  designated  by  the  direct  page  (P)  flag,  it  is  possi- 
ble to  manipulate  the  data  in  various  ways.  In  addition,  byte  efficiency 
improves  due  to  the  fact  that  direct  address  designation  is  possible  by  one- 
byte  data  within  the  command  words.  Since  effective  command  cycles  also 
decrease,  data  can  be  accessed  more  rapidly. 


Symbol 

Addressing 

# of 

Effective  Address  Region 

Bytes 

0000H  ~ 01  FFh 

~ i fffh 

u 

dp 

Direct  Page 

2 

S1S1S1SSII1 

dp+X 

X-Indexed  Direct  Page 

2 

11IIIIII1 

PMMji 

dp+Y 

Y-Indexed  Direct  Page 

2 

illilii 

flNMl 

(X) 

Indirect 

1 

— — 

lllil 

(X)+ 

Indirect  Auto-Increment 

i 

dp.  dp 

Direct  Page  to  D.P 

3 

lllllllllllll 

1111111111111 

(X),(Y) 

Indirect  Page  to  I.P. 

1 

r-:-:-:-:-:-:*::-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-:-;-:-:-:-:-:-:-:-:- 

wSMms 

dp,#imm 

Immediate  Data  to  D.P. 

3 

mmmmmmmrnm 

%,  • p 'v*Y  ...  p ■ 

llliiillllilllli 

llflllllt 

dp.bit 

Direct  Page  Bit 

2 

jlii 

mu 

dp.bit.rel 

Direct  Page  Bit  Relative 

3 

lllllilill 

■Hi 

mem.bit 

Absolute  Boolean  Bit 

3 

labs 

Absolute 

3 

III 

■Nj 

!abs+X 

X-Indexed  Absolute 

3 

IB 

: 

!abs+y 

Y-Indexed  Absolute 

3 

lllllilill 

mu 

[DP+X] 

X-Indexed  Indirect 

2 

.>■><: <<<<  : 

• ■ : 

iwllllll 

1 

[DP+Y] 

Indirect  Y-Indexed  Indirect 

2 

81I11MII1 

I 

| 

Figure  3-8-3  Memory  Access  Addressing  Effective  Address 

(NCL  PG  33) 


3-8-9 


SOUND  PROGRAMMING  CAUTIONS 


E 


Chapter  9.  Sound  Programming  Cautions 

9.1  CAUTION  #1 

When  layering  sound  on  several  tracks  (for  example,  when  layering  sound  effects 
on  back-ground  music),  make  sure  an  overflow  does  not  occur  due  to  the  addi- 
tional output.  Eight-track  sound  is  ultimately  transmitted  as  one  signal,  which  is 
limited  by  the  maximum  value  for  the  DAC.  Distortion  noise  is  created  when  the 
signal  exceeds  this  limit. 


Figure  3-9-1  Wave-form  Overflow 

9.2  CAUTION  #2 

The  following  precautions  should  be  observed  when  making  the  initial  selections 
for  a sound  driver  echo  function. 

1 . The  FLG’s  ECEN  should  not  be  turned  “on”  immediately  after  the 
EDL  and  ESA  registers  have  been  assigned  a number.  Otherwise, 
the  RAM  area  used  by  the  program  or  other  area  could  be  dam- 
aged. Either  of  the  following  guidelines  can  be  used  to  determine 
the  appropriate  wait  period  after  setting  the  EDL  and  ESA  regis- 
ters. 

a)  Wait  240  ms. 

b)  Read  the  EDL  value  (a)  before  writing  to  it,  and  calculate  the 
wait  period  based  on  the  following  formula. 

a x 16  (ms) 

In  addition,  the  EVOL  should  be  set  high  only  after  (the  EDL  val- 
ue) x 16  ms  or  greater.  (The  read  data  is  undefined  until  the  DSP 
begins  writing  data,  and  could  generate  noise.) 


3-9-1 


SNES  DEVELOPMENT  MANUAL 


2.  Turn  both  the  ECEN  and  EVOL  “off  when  the  echo  function  is  not 
in  use.  Data  will  be  read  and  output  unless  the  EVOL  is  0. 

9.3  CAUTION  #3  (ECHO  OPERATIONS) 

This  caution  describes  the  procedure  to  be  followed  when  writing  echo  data  to  the 
appropriate  RAM  area. 

• ESA  (Echo  Start  Address  - 6DH):  Initial  address  for  the  echo  start 

area. 

• EDL  (Echo  Delay  - 7DH):  Determines  the  number  of  address- 

es in  the  echo  area  begining  from 
the  initial  address. 

9.3.1  PROCEDURE 

An  internal  counter  exists  for  the  echo  data,  which  is  written  sequentially. 
This  counter  is  called  the  “echo  counter”.  The  EDL  determines  the  maxi- 
mum value  of  the  echo  counter.  When  the  echo  counter  reaches  (the 
ESA  value  x 80H),  the  echo  counter  is  set  to  00.  Echo  data  is  written  two 
bytes  at  a time  (4  bytes  for  the  left  and  right)  every  31 .25  s.  A delay  of 
16  ms  occurs  using  a RAM  address  area  of  80H. 

The  echo  counter  is  15  bits,  from  000H  ~ 7FFH.  The  following  formula  is 
used  to  determine  the  RAM  address  to  which  the  echo  data  is  written. 

(ESA  value  x 100H)  + (echo  counter  value)  = (echo  write  address) 
D15  D8  D7  DO 


[ 

ESA 

00000000 

+ 

Echo  counter  value 

Echo  write  conditions 


However,  changes  in  the  echo  counter  value  do  not  immediately  follow 
changes  in  the  ESA  value  using  the  above  formula.  Therefore,  unantici- 
pated problems,  such  as  data  loss,  could  occur.  The  relationship  be- 
tween the  echo  counter  and  EDL  value  can  be  explained  as  follows. 

It  was  mentioned  above  that  the  echo  counter  is  set  to  00  when  it  reaches 
(the  ESA  value  x 80H).  However,  the  ESA  value  mentioned  here  is  not 
the  value  of  ESA  at  that  time,  but  at  the  time  when  the  echo  counter  was 
previously  set  to  00.  Even  when  the  ESA  value  is  changed,  the  counter 
continues  counting  until  it  reaches  the  previously  set  ESA  value,  wherein 
it  is  set  to  00.  Then,  the  last-specified  ESA  value  and  echo  counter  value 
are  compared.  (This  is  to  prevent  the  echo  counter  from  incrementing  un- 
til the  maximum  value  is  reached,  when  a small  value  is  assigned  to 
ESA).  For  these  reasons,  the  echo  write  address  will  be  within  the  speci- 
fied range  if  the  programmer  waits  for  the  period  of  time  specified  below 
when  re-writing  the  EDL  value. 


3-9-2 


SOUND  PROGRAMMING  CAUTIONS 


wait  time  = (the  EDL  value  prior  to  rewrite)  x 16  ms 

To  insure  that  the  echo  data  is  written  to  the  echo  area,  wait  for  a period 
equal  to  the  last-specified  EDL  value  x 16  ms. 

9.4  CAUTION  #4 

Always  select  appropriate  values  for  the  echo  parameters.  Inappropriate  values 
could  lead  to  loss  of  data  in  critical  RAM  areas  or  noise  generation.  Reverberation 
may  occur  when  the  echo  feedback  value  is  too  large. 

9.5  CAUTION  #5 

It  is  extremely  important  to  follow  the  recommended  procedure  (Caution  #3, 
above)  when  setting  the  initial  echo  values  and  modifying  the  echo  parameters. 
The  RAM  used  as  the  echo  buffer  is  also  used  for  the  program,  wave  form  data, 
and  sound  driver.  If  an  echo  is  started  before  the  echo  parameter  initialization  is 
established,  critical  data  may  be  overwritten  in  the  RAM  area. 

9.6  CAUTION  #6 

Do  not  use  an  excessive  sound  data  compression  ratio.  An  excessive  compres- 
sion ratio  results  in  distorted  sound  output. 

9.7  CAUTION  #7 

When  performing  sound  checks,  the  monaural  sound  output  should  also  be 
checked.  Sound  data  created  for  stereo  output  may  not  be  produced  as  desired 
when  played  on  a monaural  output  device.  Super  NES  monaural  sound  is  gener- 
ated by  adding  stereo  sound  output  in  the  circuit.  When,  for  example,  a phase  ef- 
fect is  created  in  stereo  by  setting  negative  values  in  the  volume  register,  the 
sound  volume  may  be  altered  when  the  sound  is  combined  to  generate  monaural 
output. 


3-9-3 


SNES  DEVELOPMENT  MANUAL 


9.8  CAUTION  #8 

Sampled  data  should  not  have  any  discontinuity.  A crackling  noise  is  produced  by 
discontinuous  samples.  The  following  are  examples  of  discontinuity  in  the  sam- 
pled data. 

• The  sampled  data  does  not  begin  at  0. 


• The  sampled  data  does  not  end  at  0. 


A discontinuity  occurs  in  the  middle  of  the  sampled  data. 


SOUND  PROGRAMMING  CAUTIONS 


] 


9.9  CAUTION  #9 

When  transferring  data  between  the  Super  NES  CPU  and  the  APU  using  the  IPL 
loader,  a hang-up  can  occur  if  the  program  is  interrupted. 

When  the  Super  NES  CPU  sends  the  termination  code,  the  Sound  CPU  sends  a 
code  to  the  Super  NES  CPU  to  indicate  that  it  has  received  data.  The  Sound  CPU 
erases  this  code  after  300-400  p,sec. 

If  an  interrupt  occurs  after  sending  the  termination  code,  for  a period  which  is 
greater  than  300-400  micro-seconds,  the  status  code  from  the  Sound  CPU  will  be 
erased  before  it  can  be  read  by  the  Super  NES  CPU.  The  hang-up  will  occur  be- 
cause the  Super  NES  CPU  will  wait  indefinitely  for  the  Sound  CPU  to  indicate  that 
it  has  received  data. 

Two  possible  options  are  available  to  prevent  this  from  occuring. 

• Modify  the  transfer  routine  run  on  the  Super  NES  CPU  side. 

• Inhibit  interrupts  during  transfer. 

These  options  are  demonstrated  below. 

9.7.1  MODIFIED  TRANSFER  ROUTINE 


Add  two  lines  as  shown  to  the  routine. 


adc 

#07fh 

; original  code 

pla 

; original  code 

sta 

!APU_port  0 

; original  code 

cpx 

#1 

; solution  #1 

bcc 

boot_ret 

; solution  #1 

boot_wait3  cmp 

!APU_port0 

; original  code 

bne 

boot_wait3 

; original  code 

bvs 

; original  code 

boot_ret  pip 

; original  code 

rts 

; original  code 

end 

3-9-5 


SNES  DEVELOPMENT  MANUAL 


9.7.2  INHIBITING  INTERRUPTS 


Inhibit  any  interrupt  from  the  time  the  termination  code  is  sent  until  the 
Sound  CPU  sends  an  acknowledgement.  This  is  demonstrated  by  the 
highlighted  code  below. 


adc 

#07fh 

; original  code 

pla 

; original  code 

sta 

!APU_port  0 

; no  interrupt 

boot_wait3  cmp 

!APU_portO 

; no  interrupt 

bne 

boot_wait3 

; no  interrupt 

bvs 

; original  code 

pop 

; original  code 

rts 

; original  code 

end 

9.10  CAUTION  #10  - DATA  TRANSFER 

When  data  is  written  to  Port  0 <2140H>  and  Port  1 <2141  H>  in  the  16  bit  mode, 
during  data  transfer  from  the  Super  NES  APU,  the  value  of  Port  3 <2143H>  may, 
inadvertantly,  be  changed.  Therefore,  the  8 bit  mode  should  be  used  when  writing 
data  to  these  ports. 

This  occurs  because  multiple  ROMs  installed  on  the  game  pak  PCB  can  increase 
load  capacity  of  the  data  bus  and,  when  combined  with  a drastic  fluctuation  of 
CPU  data  output,  cause  noise  in  the  data  being  written.  An  example  is  provided 
below. 


ADDRESS 

DATA 


2140H  (Port  0)^  2141 H (Port  1)^ 

V 2140H  V 2141 H \ 
A Write  Data  A Write  Data  \ 


B-ADDRESSO 

B-ADDRESS1 
PA  WRITE 


/ 


Noise  Pulse 


3-9-6 


SOUND  PROGRAMMING  CAUTIONS 


[ 


In  the  example  on  the  previous  page,  if  data  is  written  to  2140H  (Port  0)  and 
2141 H (Port  1)  in  the  16  bit  mode,  noise  pulses  may  occur  at  B-Address  1 due  to 
noise  which  occurs  when  all  CPU  data  simultaneously  changes  from  high  to  low. 
This  depends  upon  the  type  of  CPU  data.  When  data  is  written  to  2141H  (Port  1), 
B-Addressl  becomes  “1”.  In  other  words,  the  same  data  is  written  to  2143H  (Port 
3)  due  to  this  pulse. 


3-9-7 


PPU  REGISTERS 


Appendix  A.  PPU  Registers 


V-RAM 

ADDRESSWORD  8 BIT  (HIGH)  8 BIT  (LOW) 
A-  A 

0000H  0 f=- 


7FFFH 


0000H 


2000H 


4000H 


2000H  8K 


4000H  16K 


6000H  24K 


32K 


>■ 


>1 


8K-WORD:  This  is  an  area  which  is  designated 
by  “OBJ  NAME  BASE  ADDRESS"  of  the 
register  <2101  H>.  (32K-WORD  / 4-Partition.) 
[The  BA2  of  the  register  <2101  H>  “OBJ  NAME 
BASE  ADDRESS”  is  used  for  expansion  pur- 
poses, and  it  will  normally  be  ignored.] 


[In  case  BA1=1  and  BA0=1  are  set  by  “OBJ 
NAME  BASE  ADDRESS”] 


4K-WORD:  This  is  a lower  4K-WORD  of  the 
area  (8K-WORD)  designated  by  “OBJ  NAME 
BASE  ADDRESS”  of  the  register  <2101H>. 
The  combination  of  this  4K-WORD  and  the 
4K-WORD  remaining  will  be  determined  by 
“OBJ  NAME  SELECT”  of  the  register 
<2101H>. 


OBJ  Name  Select 


N1 

NO 

COMBINATION 

0 

0 

4K  - WORD  + © 

0 

1 

4K  - WORD  + © 

1 

0 

4K  - WORD  + © 

1 

1 

4K  - WORD  + © 

(NCL  PC  68) 


SNES  DEVELOPMENT  MANUAL 


3 


OBJECT  DATA  TO  BE  STORED 


4 BIT  CONSTRUCTION  [8  x 8 x 4 Bit  (16  WORD)  / CHARACTER]  (Refer  to  page  A-12) 

8x8  (Character  Size)  x 4 (Bit  Construction)  x 51 2 (Number  of  character)  ► 1 6K-BYTE 

[In  case  BA1=1  and  BA0=0  are  set  by  “OBJ  NAME  BASE  ADDRESS”  and  also  N1=0  and  N0=0 
are  set  by  “OBJ  NAME  SELECT”] 


D15  <V-RAM>  DO 


A-2 


OICC  O < I—  < 


PPU  REGISTERS 


OBJECT  DATA 

OAM 

ADDRESS 
(Decimal)  D15 

000 

OBJ  0 


15  14  13  12  11  10  9 8 7 6 5 4 3 2 1 00 


1 1 1 1 1 1 1 
OBJ  V-POSITION 

1 1 1 1 1 IT 

OBJ  H-POSITION 

7 6 

5 4 

3 2 1 

0 

1 1 1 1 1 1 1 

FLIP 

OBJ 

COLOR 

NAME  (000H  - 1FFH) 

V | H 

i 1 o 

J-LlLl 

_§J 

| 7 | 6 | 5 | 4 | 3 | 2 | 1 [00 

252 

253 

OBJ126  — 

254 

— OBJ  127  — 

255 

256 

OBJ  7 . OBJ  0 

257 

OBJ  15  - OBJ  8 

CHARACTER 
CODE 
NUMBER 
(Page  A-4) 

COLOR  PALETTE  SELECT: 
Designate  palette  for  1 character 
>-►  OBJ  PRIORITY: 

Determine  the  display  priority  when  OBJ  is  com- 
bined with  BG1  - BG4  (per  character).  [Refer  to 
page  A-19  for  priority.] 

^►H/V  FLIP: 

X-direction  Flip  (H-Flip),  Y-direction  (V-Flip) 

[The  character  is  flipped,  but  H/V  position  does  not 
change.] 

15  14  13  12  11  10  9 8 7 6 5 4 3 2 1 00 

I OBJ  7 1 OBJ  6 1 OBJ  5 1 OBJ  4 I OBJ  3|  OBJ2  I OBJ  1 I OBJ  0 1 


Size  Large/Small 


H-Position  MSB 


270  OBJ  119-OBJ  112  jpg  pase  position  of  the  OBJ  on  the  H-direction  will  be  determined  by 
both  H-position  (8-bit)  and  the  H-position  MSB. 

271  OBJ  127-OBJ  120  , 

|Size  Large/Small:  Determine  the  size  to  be  used  either  of  2 OBJ’s  by 

register  <2101H>.  r 0 : Select  small  size 
H/V  FLIP  I — 1 : Select  large  size 


H/V  FLIP 

<H-FLIP  = 0,  V FLIP  =0> 
H/V  POSITION-*  A 


Turns  on  this  axis 
V H/V  POSITION-^ 


fh- 

I 

tv-R 


.Turns  on  this  axis. 
H/V  POSITION—; 

H-FLIP 


H/V  POSITION 


<H-FLIP  = 1 , V FLIP  =0> 


<H-FLIP  = 0,  V FLIP  =1> 


(NCL  PC  70) 


<H-FLIP  = 1,  V FLIP  =1> 


A-3 


SNES  DEVELOPMENT  MANUAL 


H-POSITION 

-256  ~ -1  (100H  ~ 1FFH) 


0 ~ 255  (000H ~ OFFH) 


(NOTE-1)  The  H-position  is  a complementary  expression  of  2 (9-bit). 

(NOTE-2)  The  coordinate  of  the  OBJ  displayed  is  shifted  down  compared  to  the  coordinate 
of  the  BG  displayed.  [Interlace:  2-dot  / Non-Interlace:  1-dot]  (See  page  A-10.) 

(NOTE-3)  “1 00H”  is  basically  prohibited  to  use  for  9-bit  of  the  H-Position.  (If  it  is  used,  it 
must  be  counted  as  OBJ  quantity  displayed  even  if  it  is  not  displayed  on  the 
screen.) 


OBJECT  CHARACTER  DATA  CONSTRUCTION  (VRAM) 


© 

© 

<D 


EXAMPLE 

Write  33  to  “NAME”  of 
the  OAM 

Write  “001”  (Size  8 or  32) 
to  “OBJ  SIZE  SELECT” 
of  register  <2101H> 

Write  “1"  (Size  32x32)  to 
“SIZE  LARGE/SMALL” 
of  the  OAM  (Refer  to 

page  A-3) 


In  case  the  character  code  is  000  through  OFF,  the  V-RAM  address  per  character  data  (16-word) 
will  be  “n  (Name  Base  Address)  + N (Name)  x16~n  + Nx16  + 15.”  If  the  character  code  is  100 
through  1 FF,  it  will  be  “n  + Ns  (Name  Select)  x4K  + Nx  16~n  + Nsx4K  + Nx16  + 15.” 

(NCL  PG  71) 


A-4 


PPU  REGISTERS 


OBJECT 


# OF  CELLS  DISPLAYED 

1 28 

CELL  SIZE 

8X8  16X16  32X32  64X64 

# OF  LINES  DISPLAYED 

32-pcs  (converted  to  8x8  size) 
1 1 1 

# OF  CELL-COLOR 

1 6 

# OF  PALETTE 

8 

# OF  COLOR  ON  SCREEN 

1 28 

ATTRIBUTE 

H-FLIP  V-FLIP  FUNCTION 
DISPLAY  PRIORITY 
(Select  priority  against  BG) 

BG 


MODE 

# OF 

SCREENS 

DIS- 

PLAYED 

SCREEN 

# OF 
CELL 
DOT 

# OF 
CELL 
COLOR 

# OF 

PALETTES 

# OF 

COLORS 

PER 

SCREEN 

FUNCTION 

BG1 

8X8 

4 

8 

32 

E 

M 

BG2 

4 

8 

32 

1 

m 

m 

® 

0 

MAX  4 

OR 

BG3 

4 

8 

32 

I 

m 

® 

BG4 

16X  16 

4 

8 

32 

i 

B 

B 

® 

BG1 

■ 

■9 

8 

128 

|j 

B 

1 

MAX  3 ; 

BG2 

I 

Q 

8 

128 

1 

BG3 

1 

8 

32 

B 

B 

1 

B 

BG1 

■ 

16 

8 

128 

ES 

M 

El 

M 

M 

r. 

El 

■ 

® 

® 

2 

MAX  2 

■ 

BG2 

■ 

16 

8 

128 

S 

E 

M 

fl 

® 

® 

BG1 

■ 

256 

1 

256 

US 

El 

El 

m 

m 

® 

® 

l 

3 

MAX  2 

■ 

BG2 

■ 

16 

8 

128 

M 

u 

m 

® 

1 

4 

MAX  2 

BG1 

■ 

256 

1 

256 

i 

B 

(D 

® 

® 

BG2 

4 

8 

32 

i 

* 

1 

B 

s 

BG1 

■ 

■ 

8 

128 

to 

El 

El 

■ 

■ 

s 

5 

MAX  2 

■ 

M 

BG2 

■ 

1 

8 

32 

§ 

E 

6 

1 

BG1 

16X8 

16 

8 

128 

b 

B 

1 

E 

1 

■ 

0 

1 

7 

1 

BG1 

8X8 

256 

1 

256 

M 

B 

EXT  BG 

1 

BG2 

8X8 

128 

1 

128 

i 

* 

B 

B 

|| 

B 

j§ 

(NCL  PG  72) 


A-5 


m [^m^i 


SNES  DEVELOPMENT  MANUAL 


[Main  Function  of  BG] 

1 . HV  Scroll  (each  screen) 

2.  HV  Flip  (each  character) 

3.  Mosaic 

4.  Rotate,  Enlarge,  Reduce 

5.  Window  Mask 

6.  Screen  Addition  and  Subtraction 

7.  Fixed  Color  Addition  and  Subtraction 

8.  Color  Window 

9.  CG  Direct  Select 

1 0.  Horizontal  Pseudo  512 

1 1 . Offset  Change 

1 2.  Horizontal  51 2 Mode 

[Other  Function] 

• Priority  (each  character/mode  0 ~ 6) 

• Screen  HV  Rotate  (mode  7) 


(Refer  to  Chapter  4) 
(Refer  to  Chapter  5) 
(Refer  to  Chapter  6) 
(Refer  to  1J7.1) 

(Refer  to  1J7.2) 

(Refer  to  1)7.2) 

(Refer  to  Chapter  8) 
(Refer  to  Chapter  9) 
(Refer  to  Chapter  12) 
(Refer  toChapter  19) 


(NCL  PC  72) 


A-6 


IBO^OO  O C/3  > CD 


PPU  REGISTERS 


MOSAIC  SCREEN  DISPLAY  EXAMPLE  (BG  SCREEN) 
(When  the  mosaic  size  is  2 x 2-dot  in  the  256-mode) 


256  DOT 


O)  is  the  basic  color  data 

(NCL  PG  73) 


A-7 


SNES  DEVELOPMENT  MANUAL 


ADDRESS  INCREMENT  ORDER 


INCREMENT  by  8,  (32-TIMES)  INCREMENT  by  8,  (64-TIMES)  INCREMENT  by  8,  (128-TIMES) 

(GO  = 1,  G1  = 0)  (GO  = 0,  G1  = 1)  (GO  = 1,  G1  = 1) 


xxoo 

0 

XXOO 

\ xxoo 

0 

XOOO 

XXOO 

0 

XOOO 

XX01 

32 

XX20 

XX01 

64 

X040 

XX01 

128 

X080 

2 

XX02 

34 

XX22 

2 X002  XXI 0 

66  X042  XXII 


XX08 

1 

XX01 

XX08 

1 

X001 

XX08 

1 

X001 

XX09 

33 

XX21 

XX09 

65 

X041 

XX09 

129 

X081 

2 

X002 

130 

X082 

XXF8 

31 

XXI F / 

XI F8 

63 

X03F 

X3F8 

127 

X07F 

XXF9 

r*»63 

XX3F 

XI F9 

127 

X07F 

X3F9 

255 

XOFF 

V-RAM 

ADDRESS 


^ | V-RAM  address  is  increased  by  8 for  32-times 

ORDER  OF  ACCESS  (value  designated  by  register  <2116H>  <2117H>) 

( NCL  PG  74) 


A-8 


PPU  REGISTERS 


When  SC  data  (Name)  is  set  during  BG  Mode  0 ~ 6 as  demonstrated  in  the  table 
above,  Character  data  accesses  horizontally  by  8 dots  in  Full  Graphic  (GO,  G1) 
of  register  <211 5H>. 

2 Bit/Dot  (GO  = 1 , G1  = 0) 


*4  Bit/Dot  (GO  = 0,  G1  = 1) 


(1  Frame  is  8 - bit  x 4) 


*8  Bit/Dot  (GO  = 1 , G1  = 1) 


(1  Frame  is  8 - bit  x 8) 


(NCL  PC  74a) 


A-9 


SNES  DEVELOPMENT  MANUAL 


BG  SC  DATA  (MODE  0 ~ 6) 


D15  D14 

D13 

D12  Dll  DIO 

D9 

D8 

D7 

D6  D5  D4  D3 

D2  D1 

DO 

BG 

NAME  (000H-3FFH) 

V H 

Pri. 

flnHRi 

9 I 

8 | 

7 | 

6 I 5 | 4 1 3 | 

2 I 1 I 

o 

J 

v h 

Y 

Y 

V 

CHARACTER  CODE 
NUMBER 


-►  COLOR  PALETTE  SELECT : Palette  designation  per  character 
<8-Palettes> 

BG  PRIORITY:  Determine  the  display  priority  per  character  in  case  OBJ  and 
BG1  ~ BG4  are  combined  on  the  same  screen. 

H/V  FLIP:  X-Directional  Flip  (H-FLIP),  Y-Directional  Flip  (V-FLIP) 


BG  SCREEN  H/V  SCROLL 

REGISTER  <210DH>  <210FH> 


<21 1 1 H>  <2113H> 

i — i 


CD 

CO 

1 1 1 1 1 
BG  H-OFFSET 
7 16  15  14  13  12 

1 

L1.1.Q. 

RANGE  OF  H-SCROLL 
0-  1023  DOT 

RANGE  OF  V-SCROLL 
0-  1023  DOT 

H/Vscroll  range  may  be  changed  and  2-dot  scroll 
may  be  possible,  depending  on  the  combination  of 
the  modes  (512, 16-size,  interlace,  etc.).  Also,  SC 
size  may  be  changed  against  the  screen.  (Page  A-21 
and  A-22) 


REGISTER  <210EH>  <2110H> 


<21 12H>  <2114H> 

I 1 1 ^ 


9 8 

1 1 1 1 1 
BG  V-OFFSET 
7 16  15  14  13  12 

1 

1110 

223 

(238) 

A 


V coordinate  of  BG  and  OBJ  has  one  - line  gap. 


(NCI  PG  75) 


EWlil 


PPU  REGISTERS 


BG  SC  DATA  (MODE  7) 

D15  D14  D13  D12  Dll  DIO  D9  D8  D7  D6  D5  D4  D3  D2  D1  DO 


SNES  DEVELOPMENT  MANUAL 


CHR  DATA  CONSTRUCTION 


A-12 


PPU  REGISTERS 


OFFSET  CHANGE  MODE 


H 

/ 

BG  2 

BG  1 

V 

EN 

EN 

The  offset  change  mode  can  be  used  in  the  BG  mode  2,  4 and  6,  and  the  following  data  is 
required  in  this  mode. 

d15  d14  d13  d12  dll  dIO  d9  d8  d7  d6  d5  d4  d3  d2  dl 


OFFSET  DATA 

I I I I I I I 


H,  V OFFSET  VALUE  (in 
the  change  mode) 

In  case  of  the  H-OFFSET,  the  data  (DO  ~ D2)  will  be  invalid. 
In  case  of  the  character  (16  x 16),  “D3”  is  effective  every  3rd. 

-►  OFFSET  MODE  ENABLE  pO  : Disable 

1—1  : Enable 

Designate  either  H-OFFSET  or  V-OFFSET  for  the  OFFSET  data  dO  - d9.  (Only  BG  MODE 
4 is  effective.)  0 . h-OFFSET 
L 1 : V-OFFSET 

Write  this  data  to  VRAM  of  address  designated  at  (1 ) and  (2),  using  the  BG  Mode. 

(See  below.) 


(1)+(2)+0 


<MODE  2,6> 
H-OFFSET  1 


(1)+(2)+0 

(1)+(2)+1 


<MODE  4> 

OFFSET  1 
OFFSET  2 


(1)+(2)+1F 

(1)+(2)+20 


H-OFFSET  32 
V-OFFSET  1 


(1)+(2)+1F|  OFFSET  32 


• • • In  case  BG3  SC  size  is  S1=0,  S0=0 

^ * (1):  BG3  SC  Base  Address  ([value  set  by  “d2”  ~ “d7”  of 

I <2109H>]x1024) 

(1)+(2)+3F  V-OFFSET  32  | (2):  BG3  SC  Offset  Address  ([value  set  by  “d3”  ~ “d7”  of 

<21 1 2H>]x32)  + ([value  set  by  “d3”  - “d7”  of  <21 1 1 H>]) 

e i-  H-OFFSET  1 H-OFFSET  32-i 

c rofelf1; MilfwJ--. 


32  CHARACTERS 


The  offset  value  can  be  changed  by  each  column  (character  unit). 

(Up  to  3rd  character  can  be  seen  horizontally  on  the  screen  by  setting  the  offset  value  of 
the  entire  screen,  but  the  offset  can  not  be  changed  for  1 st  character  (0  character). 

(NCL  PG  78) 


A- 13 


SNES  DEVELOPMENT  MANUAL 


1 


BG  SCREEN  (BG  Mode  0 ~ 6) 


(n  = SC  Base  Address  (6-bit)  x 400H) 


• When  SC  size  is  “1”  • When  SC  size  is  “2”  • When  SC  size  is  “3" 

n+OOOH  n+400H  n+OOOH  n+400H 


(NCL  PG  79) 


A- 14 


PPU  REGISTERS 


BG  Screen  (BG  Mode  7) 

Screen  Size  and  Area  are  Fixed 


ORIGINAL 


When  SC  size  is  “0” 


128  CHR 


(NCL  PC  79a) 


A-15 


( jj x o 00 ^ o a i^> o 


SNES  DEVELOPMENT  MANUAL 


OPERATION  (ROTATION/ENLARGEMENT/REDUCTION) 


ROTATIONAL  TRANSFORM  FORMULA 


xJ  r ix.-x  [x„ 

2 _ cosy  siny  1 0 + 0 

Y2  [-siny  cosy]  Tj-Tq  Tq 

X o • Y 0:  Center  Coordinate  x i * Y i : Display  Coordinate 

X 2 «Y  2'  Coordinate  before  calculation  of  display  coordinate 

If  the  reduction  rates  for  X-dir  (a)  and  the  reduction  rates  for  Y-dir  (P)  are  considered,  the  formula 
described  above  will  be  as  follows: 


A=cosY  x (1/a),  B=sin  Y x (1/a), 

C=-sinY  x(1/p),  D=cosY  x(1/p), 

(NCL  PG  80) 


A-16 


PPU  REGISTERS 


CG-RAM 


<MODE-0> 


<M0DE-1  & 2> 


00  BG1  ' 

4-COLORS 
„„  x 8-PALETTES 

20  ~B G2 

4-COLORS 
x 8-PALETTES 


• 4 -Screens  for  BG 


4-COLORS  20  Color  Data 
x 8;rALbTTCv>  21  Color  Data 

4-COLORS  22  Color  Data 
x 8-PALETTES  23  Color  Data 
24  Color  Data 


4-COLORS 
x 8-PALETTES 


BG  1,  2 

16-COLORS 
x 8-PALETTES 


Pallete  0 


Pallete  1 


3E™Uallete7  J|COLORSes 
40  Color  Data  Lpa||Ptp  0 


<MODE-1> 

•3-Screens  for  BG 

•BG1  & 2 color  data  are 
held  in  common  in  the 
range  of  0 ~ 7F 


<MODE-2> 

•2-Screens  for  BG 

•BG1  & 2 color  data  are 
held  in  common  in  the 
range  of  0 ~ 7F 


<MODE-5  & 6> 
pi  5 DO 

00  BG2  (MODE-5) 
4-COLORS 
20  x 8-PALETTES 


16-COLORS 
60  x 8-PALETTES 


<MODE-5> 

•2-Screens  for  BG 

•BG1  & 2 color  data  are 
held  in  common  in  the 
range  of  0 - 1 F 


<MODE-6> 

•1 -Screen  for  BG 

•0  - 7F  are  used  just  for 
BG1  color  data 


16-COLORS 
x 8-PALETTES 


<MODE-3,  4 & 7>  <MODE-3> 

PIS  DO 

BG2  (MODE-4)  I #2'Screens  for  BG 
4-COLORS  »BG2  color  data  are  held  in 
x 8-PALETTES  common  in  the  range  of 
0 - 7F 

ctr  o /Mnnc  o (CG  Direct  select  is  excluded) 


BG  2 (MODE-3 

<MODE-4> 

x 8-PALETTES  ’^reens  *or  BG  . 

•BG2  color  data  are  in 

. common  in  the  range  of 

Dbl  n - IF 

-256-COLORS- 

qBj  (CG  Direct  select  is  excluded) 

•1 -Screen  for  BG  (CG  Direct 
16-COLORS  select  is  excluded) 

x 8-PALETTES  <EXTBG  ON  MODE-7> 

•1 -Screen  for  BG 
•0  ~ 7F  are  used  just  for  BG2 
color  data 

*OBJ  is  held  in  common  with 
BG-1 


16-COLORS 


CG-RAM  COLOR  DATA 

BLUE  GREEN 

I d14  1 d13  I d12 I dll  I dIO  I d9  ■ d8  1 d7  1 

DIRECT  SELECT  COLOR  DATA 

BLUE  GREEN 


d6  1 d5 


DA7 1 DA6  1 CL2 


DA5  1 DA4  1 DA3  1 CL1 


RED 

DA2  1 DAI  1 DAO  1 CL0  1 


NOTE:  DAO  ~ DA7  are  used  for  the  character  dot  data.  CL0  ~ CL2  are  used  for  the  BG-SC  data  of 
the  color.  (However,  in  case  of  Mode-7,  CL0  ~ CL2  should  be  “0”) 

NOTE:  If  they  are  “0,”  it  becomes  transparent.  The  color  of  CG-RAM  address  (00H)  will  be 
background.  (nclpgsd 


A- 17 


SNES  DEVELOPMENT  MANUAL 


WINDOW 


REGISTER  <2126H>  - <2129H> 


The  V-directional  position  is 
determined  by  setting  “W1  EN" 
of  registers  <2123H>  <2124H> 
<2125H>  during  the  H-Blank 
period  or  determined  by  set- 
ting registers  <2126H>  ~ 
<2129H>. 


(NCL  PG  82) 


A-18 


OC  LU  < CC  CElU<(r 


PPU  REGISTERS 


BG  & OBJ  PRIORITY 

4-SCREEN/3-SCREEN  MODE  (In  case  Mode  0 and  1 are  selected  by  register  <2105H>) 
*ln  case  “D3=1"  is  selected  by  register  <2105H>  in  the  mode-1 


(OTHERS)  ^ ► * 

Back  Pri.=0  Pri.=0  Pri.=1  Pri.=1  Pri.=0  Pri.=0  Pri.=1  Pri.=1  Pri.=1 

(SINGLE)  BG4  BG3  BG4  BG3  BG2  BG1  BG2  BG1  BG3 


Pri.=0  Pri.=1  Pri.=2  Pri.=3 

<Example  of  Display  Priority  (in  case  of  mode  0)> 


BG1  Pri.=0  — | 
BG2  Pri.=1 
BG3  Pri.=0 
BG4  Pri.=1 
OBJ  Pri.=2  — I 


High  Priority-^ ►Low  Priority 

(FRONT)  (REAR) 

are  set ► BG2-OBJ-BG1-BG4-BG3-Back 

(Display  in  the  order  above) 


2-SCREEN/1-SCREEN  MODE  (in  case  Mode  2 ~ 7 is  selected  by  register  <2105H>) 


Back  Pri.=0  Pri.=0  Pri.=1  Pri.=1 

(Single  BG2  BG1  BG2  BG1 

Colon)  A A A A 


/ OBJ  kKOBJ  I'v  OBJ  l-'KOBJ 

Pri.=0  Pri.=1  Pri.=2  Pri.=3 

NOTE:  In  case  of  the  display  priority  between  the  OBJ’s,  normally  the  lower  numbered  OBJ  will 
be  displayed  as  higher  priority.  (See  page  1-20-2  for  exception.) 

This  display  priority  will  be  determined  before  the  priority  between  OBJ  and  BG  is  determined. 
NOTE:  In  case  of  Mode  7,  the  priority  is  0 at  BG1 . 

(NCL  PG  S3) 


A- 19 


ULCCOZI- 


SNES  DEVELOPMENT  MANUAL 


PPU  REGISTERS 

•••  --I 


BG  SCREEN 

H/V  SCROLL  © (Scroll  range  by  the  combination  of  modes  and  SC  size  against  screen) 
<Example:  in  case  SC  size  is  “3”  - refer  to  register  2107H  ~ 210AH> 

*ln  case  of  mode  0,  1 , 2,  3,  & 4 
• BG  SIZE  (8x8) 

[ 256  DOT  | 

32  CHR 

A 

1 CHARACTER  ON  TV  SCREEN 
(1  NAME) 

8 DOT 

. A , 

8 

O 
T 

SC  SCREEN 


-i-  o 


256 

DOTl 


• RANGE  OF  H-SCROLL:  0~51 1 (Scroll  1 -dot  to  the  left  by  adding  1 ) 

• RANGE  OF  V-SCROLL:  0-51 1 (Scroll  1-dot  up  by  adding  1) 


• BG  SIZE  (16x16) 

, 512  DOT  , * RANGE  OF  H-SCROLL:  0-1023  (Scroll  1-dot  to  the  left  by  adding  1) 

I 1 • RANGE  OF  V-SCROLL:  0-1023  (Scroll  1-dot  up  by  adding  1) 

32  CHR 

. A. . 


A-21 


SNES  DEVELOPMENT  MANUAL 


BG  SCREEN 


H/V  SCROLL  ® (Scroll  range  by  the  combination  of  modes  and  SC  size  against  screen) 
<Example:  in  case  SC  size  is  “3”  - refer  to  register  2107H  ~ 210AH> 

*ln  case  of  MODE-5,  MODE-6  & NON-INTERLACE 


BG  SIZE  (8  x 8) 
.512  DOT. 


32  CHR 


BG  SIZE  (16X16) 
.512  DOT. 


1 CHARACTER  ON  SCREEN 
(1  NAME) 

16  DOT 


8- DOT- 


32  CHR 


SC  SCREEN 


RANGE  OF  H-SCROLL:  0-51 1 (Scroll  2-dots  to  the  left  by 
adding  1) 

RANGE  OF  V-SCROLL:  0-511  (Scroll  1-dot  up  by 
adding  1 ) 


• RANGE  OF  H-SCROLL:  0-51 1 (Scroll  2-dots  to  the  left  by  adding  1 ) 

• RANGE  OF  V-SCROLL:  0-1023  (Scrolll-dot  up  by  adding  1) 

*ln  case  of  MODE-5,  MODE-6  & INTERLACE 

• BG  SIZE  (8x8)  • BG  SIZE  (16X16) 

i 512  DOT  ■ ,512  DOT 


16  DOT 


32  CHR 


32  CHR 


16  DOT 


RANGE 

adding 

RANGE 

adding 


OF  H-SCROLL:  0-51 1 (Scroll  2-dots  to  the  left  by 
1) 

OF  V-SCROLL:  0-51 1 (Scroll  1-dot  up  by 
1) 


16  DOT 


RANGE  OF  H-SCROLL:  0-51 1 (Scroll  2-dots  to  the  left  by  adding  1 ) 
RANGE  OF  V-SCROLL:  0-1023  (Scroll  1 dot  up  by  adding  1) 


(NCL  PC  86) 


A-22 


PPU  REGISTERS 


I 


A-23 


(TH>Z“  ODDOOO 


SNES  DEVELOPMENT  MANUAL 


Appendix  B.  CPU  Registers 

GENERAL  PURPOSE  DMA 


i)  Transfer  Method 


A-BUS 


ii)  Data  Format 
Typical  Data  Bank 


B-BUS 


iii)  Trigger  (Start) 

General  Purpose  DMA  Enable  Flag 


H-DMA 


i)  Transfer  Method 


A-BUS 


B-BUS 


RAM  • ROM 


ii)  Data  Format  (Refer  to  pp.  B-3  & B-4) 
i-  Type  0 : Absolute  addressing 

L Type  1 : Indirect  addressing 

- C “0” : If  the  data  is  the  same  as  the  data  of 

the  previous  line,  the  data  will  not  be 
transferred.  (Data  Compression) 

- C “1” : A pair  of  data  per  horizontal  line. 

iii)  Trigger  (Start) 

H-Blank 


PRIORITY 

• H-DMA>GENERAL  PURPOSE  DMA 

• chO  > chi  > • • • > ch7 

in  the  same  DMA  (General  purpose  DMA  or  H-DMA) 


H COORDINATE 


H-BLANK 


TABLE  PROCESS 


H-DMA  CHO  ~ CH7  TABLE 


GENERAL  PURPOSE  DMA 


ROM  — ► CPU  DRAM  etc. 


CPU  Memory ► ppu 


DISPLAY  AREA 


GENERAL  PURPOSE  DMA 


CPU  Memory  ◄ — ►VRAM  etc. 


(NCL  PG  10 V 


B-l 


CPU  REGISTERS 


H-DMA  ABSOLUTE  ADDRESSING  (TYPE-0) : This  is  a mode  used  to  transfer  the  data  of  the 


D7  CPU  RAM  DO 
A1  TABLE  ADDRESS  |C|#  OF  LINES  : 1 00 1 


A2 TABLE  ADDRESS 


DATA  - 1 (LOW) 
DATA  - 1 (HIGH) 
DATA  - 2 (LOW) 


address  designated  by  the  Table  Address. 


SETTING  MODE  (EXAMPLE  1) 

• C=”1” : A pair  of  new  data  per  H-line 

• NUMBER  OF  LINES  : 100 

• TRANSFER  WORD  SELECT  : 1 (2-BYTE  L,H) 

(200-Bytes  data  in  total) 


DATA -100  (HIGH) 
A1  TABLE  ADDRESS  C|#OF  LINES  : 100 
A2  TABLE  ADDRESS  Data 


# OF  LINES  : 0 


INDIRECT  ADDRESSING  (TYPE-1) 


CPU  RAM  (TABLE  MEMORY) 

D7  DO 

A1  TABLE  ADDRESS fc]  #OF  LINES 
A2  TABLE  ADDRESS  Data  Address  (LOW) 
Data  Address  (HIGH)  [ 
CT  # OF  LINES 
Data  Address  (LOW)  | 
Data  Address  (HIGH)  f 


C # OF  LINES  :0| 


SETTING  MODE  (EXAMPLE  2) 

• C=”0”  :Same  data  as  previous  line.  (Repeat  data 

for  all  lines.) 

• NUMBER  OF  LINES:  100 

• TRANSFER  WORD  SELECT  :4  (4-BYTE  L,H,L,H) 

(4-Bytes  data  in  total) 


# of  line  (0)  settings  : It  indicates  that  the  data  for 
| the  DMA  transfer  has  gone. 

This  is  a mode  used  to  transfer  the  data  of  the  address 
designated  by  the  Data  Address,  which  is  stored  to  the 
address  designated  by  the  Table  Address. 

CPU  RAM  (TABLE  MEMORY) 

n,  nn  SETTING  MODE 

Hr  (EXAMPLE  1) 

• C=”1” : A pair  of  data 

per  H-line 

l • NUMBER  OF  LINES 

TOP  ADDRESS  f : 100 

• TRANSFER  WORD 
SELECT : 

TOP  ADDRESS J 1 (2-BYTE  L,H) 

In  this  case,  data  area 
is  200  byte. 

100(Line)  x 2 (Trans- 
fer Byte) 

SETTING  MODE 
(EXAMPLE  2) 

► • C=”0”  :Same  data  as 

J-  previous  line 

• NUMBER  OF  LINES 

. . : 100 

• • • TRANSFER  WORD 

* * SELECT : 

4 (4-BYTE  L,H,L,H) 

In  this  case,  data  area 

~]  is  4 Byte. 

1 # of  line  (0)  settings  : It  indicates  that  the  data  for 

^ the  DMA  transfer  has  gone. 

(NCL  PC  W2) 


B-2 


SNES  DEVELOPMENT  MANUAL 


3 


DETECT  BEGINNING  OF  V - BLANK 


Display  Period 


x/ 

RESET 


V - BLANK 


(STARTf- 


ET 


BLANK  NMI 
FLAG 


READ  <421 0H> 

D7  of  <4200H> 

“NMI  Enable 

Jl 


0 : Disable  NMI  signal  (Always) 
Depend  on  “Blank  NMI”  Flag 


OUTPUT 


->  NMI  SIGNAL 


D7  of  <421 0H>  J 0:  NMI  has  not  occurred 
“NMI  Enable”  \ 1:  NMI  has  occurred 


The  “Blank  NMI”  flag  of  register  <421 0H>  will  be  set  at  the  beginning  of  V - Blank  and  will 
reset  at  the  end  of  V - Blank.  It  may  also  be  reset  by  reading  register  <421 0H>. 
<EXAMPLE> 

1 . In  case  of  detecting  the  beginning  of  V - Blank  by  NMI  : 


2.  In  case  of  detecting  the  beginning  of  V - Blank  by  the  flag  : 


Period 
the  flag 


(NCL  PC  703) 


CPU  REGISTERS 


SUMMARY  OF  REGISTERS 

REGISTERS  (WRITE  ) S - PPU 


ADDRESS 

D7 

D6  D5  D4 

D3 

D2  D1  DO 

2100H 

Blanking 

Fade  IN/OUT  (0  ~ 15) 

2101H 

OBJ  Size  Select  OBJ  Name  Select 

OBJ  Name  Base  Address 

2102H 

OAM  Address 

2103H 

OAM  Priority  OAM  Address 

Rotation  1 I MSB 

2104H 

OAM  Data  (Low,  High) 

2105H 

BG  Size 

BG4  1 BG3  1 BG2  1 BG1 

■:Tcfcf 

BG  Mode  (0  ~ 7) 

2106H 

Mosaic  Size 

1 1 1 

Mosaic 
BG4  | BG3  ] 

Enable 

BG2  1 BG1 

2107H 

BG1  SC  Base  Address 

BG1  SC  Size 

2108H 

BG2  SC  Base  Address 

BG2  SC  Size 

2109H 

BG3  SC  Base  Address 

BG3  SC  Size 

210  AH 

BG4  SC  Base  Address 

BG4  SC  Size 

210BH 

BG2  Name  Base  Address 

BG1  Name  E 

lase  Address 

210CH 

BG4  Name  Base  Address 

BG3  Name  Base  Address 

210DH 

BG1  H - Offset  (Low,  High) 

210EH 

BG1V  - Offset  (Low,  High) 

210FH 

BG2  H - Offset  (Low,  High) 

2110H 

BG2  V - Offset  (Low,  High) 

21 1 1 H 

BG3  H - Offset  (Low,  High) 

2112H 

BG3  V - Offset  (Low,  High) 

2113H 

BG4  H - Offset  (Low,  High) 

2114H 

BG4  V - Offset  (Low,  High) 

2115H 

H/L  Inc 

2116H 

V - RAM  Address  (Low) 

2117H 

V - RAM  Address  (High) 

2118H 

V - RAM  Data  (Low) 

2119H 

V - RAM  Data  (High) 

21 1 AH 

(NCI  PG  1 04) 


B-4 


SNES  DEVELOPMENT  MANUAL 


REGISTERS  (WRITE  ) S - PPU 


ADDRESS 

D7  D6  D5  D4  D3  D2  D1  DO 

211BH 

Matrix  Parameter  A (Low,  High) 

211CH 

Matrix  Parameter  B (Low,  High) 

Matrix  Parameter  C (Low,  High) 

211  EH 

Matrix  Parameter  D (Low,  High) 

211FH 

Matrix  Parameter  X (Low,  High) 

2120H 

Matrix  Parameter  Y (Low,  High) 

2121 H 

CG  - RAM  Address 

2122H 

CG  - RAM  Data  (Low,  High) 

2123H 

BG2  Window 

W2  EN  1 IN/OUT  I W1  EN  1 IN/OUT 

BG1  Window 

W2  EN  I IN/OUT  I W1  EN  1 IN/OUT 

2124H 

BG4  Window 

W2  EN  1 IN/OUT  1 W1  EN  1 IN/OUT 

BG3  Window 

W2  EN  1 IN/OUT  1 W1  EN  1 IN/OUT 

2125H 

Color  Window 

W2  EN  | IN/OUT  | W1  EN  1 IN/OUT 

OBJ  Window 

W2  EN  | IN/OUT  | W1  EN  | IN/OUT 

2126H 

Window  HO  Position  (0  ~ 255) 

2127H 

Window  HI  Position  (0  ~ 255) 

2128H 

Window  H2  Position  (0  ~ 255) 

2129H 

Window  H3  Position  (0  - 255) 

212AH 

Windov 

BG4  | BG3 

(V  Logic 

BG2  | BG1 

212BH 

Window  Logic 
Color  | OBJ 

212CH 

Through  Main 

OBJ  I BG4  I BG3  1 BG2  I BG1 

212DH 

Through  Su 

OBJ  | BG4  | BG3 

b 

BG2  | BG1 

212EH 

Through  Main  (W 
OBJ  | BG4  | BG3 

indow) 

BG2  I BG1 

212FH 

OBJ 

Through  Sub  (W 
BG4  F BG3 

indow) 

BG2 

BG1 

2130H 

Window 
Main  SW  (A) 

ON/OFF 

Sub  SW  (B) 

CG  ADD 
Enable 

ESI 

2131 H 

ADD, 

'SUB 

1/2 

Enable 

ADD  or  SUB  Enable 

BACK  | OBJ  I BG4  | BG3  I BG2  I BG1 

2132H 

Blue 

Green 

Color  Constant  Data 

Red  1 Color  Brilliance  Data 

2133H 

EXT. 

Input 

WEmmmStA 

OBJ-V 

Select 

(NCL  PG  104) 


B-5 


CPU  REGISTERS 


i 


S - PPU  READ  REGISTER 


ADDRESS 

D7  D6  D5  D4  D3  D2  D1  DO 

2134H 

M P Y (Low) 

2135H 

M P Y (Mid) 

2136H 

M P Y (High) 

2137H 

Soft  Latch  for  H/V  Counter 

2138H 

OAM  Data  (Low,  High) 

2139H 

V - RAM  Data  (Low) 

213AH 

V - RAM  Data  (High) 

213BH 

CG  Data  (Low,  High) 

213CH 

Output  Data  of  H - Counter  (Low,  High) 

213DH 

Output  Data  of  V - Counter  (Low,  High) 

213EH 

Time 

Over 

Range 

Over 

Master 

/Slave 

S - PPU1  Version  Number 

213FH 

Field 

"EXT 

Latch 

S - PPU2  Version  Number 

APU  READ/WRITE  REGISTER 


ADDRESS 

D7  D6  D5  D4  D3  D2  D1  DO 

2140H 

APU  I/O  Port 

2141 H 

APU  I/O  Port 

2142H 

APU  I/O  Port 

2143H 

APU  I/O  Port 

WORK  RAM  READA/VRITE  REGISTER 


ADDRESS 

D7  | D6 

D5 

D4  D3 

D2  D1 

DO  1 

2180H 

WORK  RAM  Data 

WORK  RAM  WRITE  REGISTER 


ADDRESS 

D7  D6  D5  D4  D3  D2  D1  DO 

2181H 

WORK  RAM  Address  (Low) 

2182H 

WORK  RAM  Address  (Mid) 

2183H 

(NCL  PG  7 05) 


B-6 


SNES  DEVELOPMENT  MANUAL 


3 


REGISTERS  (WRITE  ) S - CPU 


ADDRESS 

D7 

D6 

D5 

D4 

D3  D2  D1 

DO  | 

4200H 

Timer 
V-  EN 

Enable 
H-  EN 

4201 H 

I/O 

Port 

Multiplicand  - A 

4203H 

Multiplier  - B 

Dividend  - C (Low) 

4205H 

Dividend  - C (High) 

Divisor  - B 

4207H 

H - Counter  Timer 

4208H 

4209H 

V - Counter  Timer 

420AH 

V - MSB 

420BH 

General  Purpose  DMA  (Enable  Flag) 

CH7  EN  | CH6  EN  | CH5  EN  | CH4  EN  | CH3  EN  | CH2  EN  | CHI  EN  | CHO  EN 

420CH 

H-DMA  (Enable  Flag) 

CH7  EN  | CH6  EN  | CH5  EN  | CH4  EN  | CH3  ENT ( CH2  EN  | CHI  EN 

CHO  EN 

/3.58 

(NCL  PG  106) 


B-7 


CPU  REGISTERS 


REGISTERS  (READ)  S - CPU 


ADDRESS  D7  D6 


421 1H 


4212H  IV -Blankl  H -Blank 


REGISTERS  (WRITE  ) S - CPU 


43X4H 


43X5H 


43X6H 


43X7H 


43X8H 


43X9H 


43XAH  Continue 


Joy  - C 
Enable 


I/O  Port 


Quotient  - A (Low) 


Quotient  - A (High) 


Product  - C / Remainder  (Low) 


Product  - C / Remainder  (High) 


Joy  Controller  I (Low) 


Joy  Controller  I (High) 


Joy  Controller  II  (Low) 


Joy  Controller  II  (High) 


Joy  Controller  III  (Low) 


Joy  Controller  III  (High) 


Joy  Controller  IV  (Low) 


Joy  Controller  IV  (High) 


D5 

D4 

D3 

D2 

D1 

A - Bus  Address 
INC/DEC  I Fixed 


CHX  B - Address 


CHX  Transfer  Word  Select 


ress 


CHX  A1  Table  Address  (High) 


CHX  A Table  Bank 


CHX  Data  Address  (H-DMA)  (Low) 

/ Number  of  Bytes  to  be  Transferred  (General  Purpose  DMA) 


CHX  Data  Address  (H-DMA)  (High) 

/ Number  of  Bytes  to  be  Transferred  (General  Purpose  DMA) 


CHX  Data  Bank  (H  - DMA) 


CHX  A2  Table  Address  (Low) 


CHX  A2  Table  Address  (High) 


Number  of  Lines 


* T - Org  means  the  “Transfer  Orientation”. 

(NCL  PG  106) 


B-8 


SNES  DEVELOPMENT  MANUAL 


Appendix  C SPC700  Commands 

C.1  SUMMARY  OF  SPC700  COMMANDS 

An  SPC700  series  is  used  for  the  SNES  sound  source  CPU.  However,  standby 
and  sleep  modes  cannot  be  used.  The  command  set  operand  notation  and  expla- 
nation of  command  activity  are  indicated  in  the  table  below.  The  upper  portion  of 
the  table  contains  symbols  necessary  to  operand  description.  These  are  symbols 
necessary  for  assembler  description.  In  the  lower  portion  of  the  table,  the  values 
of  the  various  operands  are  expressed  as  symbols.  Assembler  descriptions  are 
given  as  numerical  values  or  labels. 

Table  C-1  Command  Operand  Symbols  and  Meaning 

Symbol  Meaning 

A A Register 

X X Register 

Y Y Register 

PSW  Program  Status  Word 

YA  Y,  A paired  16-bit  register 

PC  Program  Counter 

SP  Stack  Pointer 

( ) Indirect  Expression 

( )+  Indirect  Auto-increment  Expression 

# Immediate  Data 

I Absolute  Address 

/ Bit  Reversal 

Bit  Position  Indicator 
[ ] Indexed  Indirect  Expression 

H Hexadecimal  Notation 

imm  8-bit  Immediate  Data 

dp  Offset  Address  within  Direct  Page 

abs  1 6-bit  Absolute  Address 

rel  Relative  Offset  2‘s  Complement 

mem  Boolean  Bit  Operation  Address 

bit  Bit  Location 

MSB 


upage  Offset  Within  U Page 

n Vector  Call  Number 

(NCL  PG  35) 


C-1 


SPC  700  COMMANDS 


The  following  symbols  are  used,  in  addition  to  those  on  the  previous  page,  for  the 
purpose  of  explaining  operational  functions. 

Table  C-2  Symbols  and  Meaning  for  Operational  Description 


Symbol 

Meaning 

N 

Negative  Flag 

V 

Overflow  Flag 

P 

Direct  Page  Flag 

B 

Break  Flag 

H 

Half  Carry  Flag 

1 

Indirect  Master  Enable  Flag 

z 

Zero  Flag 

c 

Carry  Flag 

+ 

Addition 

- 

Subtraction 

Comparison 

AND 

Logic  Product 

OR 

Logic  Sum 

EOR 

Exclusive  Logic  Sum 

* 

Multiplication 

/ 

Division 

Q 

Division  Quotient 

R 

Division  Remainder 

<d> 

Destination 

<S> 

Source 

Direction  of  Data  Transmission 

Data  Decrement 

+ + 

Data  Increment 

< < 

1 Bit  Shift  Left 

> > 

1 Bit  Shift  Right 

Note:  The  number  of  cycles  of  conditional  branching  commands  are  appropriate 
to  cases  when  there  is  no  branching  to  the  left  side  and  there  is  branching  to  the 
right  side. 

Table  C-3  Explaination  of  Symbols  in  the  Status  Flag  Column 


Symbol 

Meaning 

No  Change 

0 

Cleared  to  “0" 

1 

Set  to  “1  ” 

Flag  Name 

Set  or  Cleared  Depending  on  Result 

(NCL  PG  36) 


C-2 


SNES  DEVELOPMENT  MANUAL 


Table  C-4  8-bit  Data  Transmission  Commands,  Group  1 


Mnemonic 

Operand 

Code 

Bytes 

Cycles  Operation 

NVPBH1ZC 

MOV 

A,  #imm 

E8 

2 

2 

A <-  imm 

N.. 

..z 

MOV 

A.  (X) 

E6 

1 

3 

A<-(X) 

N.. 

..z 

MOV 

A,  (X)+ 

BF 

1 

4 

A <-  (X)  with  auto  increment 

N.. 

..z 

MOV 

A,  dp 

E4 

2 

3 

A <-  (dp) 

N.. 

,.z 

MOV 

A,  dp+X 

F4 

2 

4 

A <-  (dp+X) 

N.. 

..z 

MOV 

A,  labs 

E5 

3 

4 

A <r  (abs) 

N.. 

..z 

MOV 

A,  !abs+X 

F5 

3 

5 

A (abs+X) 

N.. 

..z 

MOV 

A,  !abs+Y 

F6 

3 

5 

A <-  (abs+Y) 

N.. 

..z 

MOV 

A,  [dp+X] 

E7 

2 

6 

A <-  ((dp+X+1)(dp+X)) 

N.. 

..z 

MOV 

A,  [dp]+Y 

F7 

2 

6 

A <-  ((dp+1)(dp)+Y) 

N.. 

..z 

MOV 

X,  #imm 

CD 

2 

2 

X <-  imm 

N.. 

...z 

MOV 

X,  dp 

F8 

2 

3 

X <-  (dp) 

N.. 

...z 

MOV 

X, dp+Y 

F9 

2 

4 

X (dp+Y) 

N.. 

...z 

MOV 

X,  labs 

E9 

3 

4 

X <-  (abs) 

N.. 

...z 

MOV 

Y,  #imm 

8D 

2 

2 

Y <-  imm 

N.. 

...z 

MOV 

Y,  dp 

EB 

2 

3 

Y <-  (dp) 

N.. 

...z 

MOV 

Y,  dp+X 

FB 

2 

4 

Y <-  (dp+X) 

N.. 

...z 

MOV 

Y,  labs 

EC 

3 

4 

Y <-  (abs) 

N.. 

...z 

Table  C-5  8-bit  Data  Transmission  Commands,  Group  2 


Mnemonic 

Operand 

Code 

Bytes 

Cycles  Operation  NVPBHIZC| 

MOV 

(X),  A 

C6 

1 

4 

A ->  (X) 

MOV 

(X)+,  A 

AF 

1 

4 

A (X)  with  auto  increment  

MOV 

dp,  A 

C4 

2 

4 

A ->  (dp)  

MOV 

dp+X,  A 

D4 

2 

5 

A (dp+X) 

MOV 

labs,  A 

C5 

3 

5 

A (abs)  

MOV 

!abs+X,  A 

D5 

3 

6 

A ->  (abs+X)  

MOV 

1 abs+Y,  A 

D6 

3 

6 

A (abs+Y)  

MOV 

[dp+X],  A 

C7 

2 

7 

A ->  ((dp+X+1)(dp+X))  

MOV 

[dp]+Y,  A 

D7 

2 

7 

A ->  ((dp+1)(dp)+Y) 

MOV 

dp,  X 

D8 

2 

4 

X ->  (dp) 

MOV 

dp+Y,  X 

D9 

2 

5 

X (dp+Y)  

MOV 

labs,  X 

C9 

3 

5 

X (abs)  

MOV 

dp,  Y 

CB 

2 

4 

Y (dp) 

MOV 

dp+X,  Y 

DB 

2 

5 

Y (dp+X)  

MOV 

labs,  Y 

CC 

3 

5 

Y ->  (abs)  

(NCL  PG  37) 


C-3 


SPC  700  COMMANDS 


Table  C-6  8-bit  Data  Transmission  Commands,  Group  3 


Mnemonic 

Operand 

Code 

Bytes 

Cycles  Operation 

NVPBHIZC 

MOV 

A,  X 

7D 

1 

2 

A<-  X 

N.. 

..Z 

MOV 

A,  Y 

DD 

1 

2 

A<r  Y 

N.. 

z 

MOV 

X,  A 

5D 

1 

2 

X<-  A 

N.. 

z 

MOV 

Y,  A 

FD 

1 

2 

Y <r  A 

N.. 

z 

MOV 

X,  SP 

9D 

1 

2 

X<-  SP 

N.. 

..z 

MOV 

SP,  X 

BD 

1 

2 

SP<-  X 

MOV 

dp<d>, dp<s> 

FA 

3 

5 

(dp<d>)  (dp<s>) 

MOV 

dp,  #imm 

8F 

3 

5 

(dp)<-  imm 

(NCI  PG  38) 


SNES  DEVELOPMENT  MANUAL 


Table  C-7  8-bit  Arithmetic  Operation  Commands 


Mnemonic 

Operand 

Code 

Bytes 

Cycles 

Operation  NVPBHIZC 

ADC 

A,  #imm 

88 

2 

2 

A <•  A + imm  + C 

NV..H.ZC 

ADC 

A,  (X) 

86 

1 

3 

A <-  A + (X)  + C 

NV..H.ZC 

ADC 

A,  dp 

84 

2 

3 

A <-  A + (dp)  + C 

NV..H.ZC 

ADC 

A,  dp+X 

94 

2 

4 

A <-  A + (dp+X)  + C 

NV..H.ZC 

ADC 

A,  labs 

85 

3 

4 

A <-  A + (abs)  + C 

NV..H.ZC 

ADC 

A,  !abs+X 

95 

3 

5 

A <-  A + (abs  + X)  + C 

NV..H.ZC 

ADC 

A,  !abs+Y 

96 

3 

5 

A <-  A + (abs  + Y)  + C 

NV..H.ZC 

ADC 

A,  [dp+X] 

87 

2 

6 

A <r  A + (dp+X+1)(dp+X)  + C 

NV..H.ZC 

ADC 

A,  [dp]+Y 

97 

2 

6 

A <-  A + ((dp+1)(dp)+Y)  + C 

NV..H.ZC 

ADC 

(X),  (Y) 

99 

1 

5 

(X)<-  (X)  + (Y)  + C 

NV..H.ZC 

ADC 

dp<d>, dp<s>  89 

3 

6 

(dp<d>)<-  (dp<d>)  + (dp<s>)  + C NV..H.ZC 

ADC 

dp,  #imm 

98 

3 

5 

(dp)<-  (dp)  + imm  + C 

NV..H.ZC 

SBC 

A,  #imm 

A8 

2 

2 

A <-  A - imm-  C 

NV..H.ZC 

SBC 

A,  (X) 

A6 

1 

3 

A <-  A-  (X)-C 

NV..H.ZC 

SBC 

A,  dp 

A4 

2 

3 

A <-  A-  (dp)- C 

NV..H.ZC 

SBC 

A,  dp+X 

B4 

2 

4 

A «-  A-  (dp+X)-  C 

NV..H.ZC 

SBC 

A,  labs 

A5 

3 

4 

A <-  A - (abs)-  C 

NV..H.ZC 

SBC 

A,  !abs+X 

B5 

3 

5 

A <-  A-  (abs  + X)-  C 

NV..H.ZC 

SBC 

A,  !abs+Y 

B6 

3 

5 

A <-  A-  (abs  + Y)-  C 

NV..H.ZC 

SBC 

A,  [dp+X] 

A7 

2 

6 

A «-  A-  (dp+X+1)(dp+X)  - C 

NV..H.ZC 

SBC 

A,  [dp]+Y 

B7 

2 

6 

A <-  A-  ((dp+1)(dp)+Y)  - C 

NV..H.ZC 

SBC 

(X),  (Y) 

B9 

1 

5 

(X)<r  (X)-(Y)-C 

NV..H.ZC 

SBC 

dp<d>,  dp<s>  A9 

3 

6 

(dp<d>)<-  (dp<d>)  - (dp<s>)-  C 

NV..H.ZC 

SBC 

dp,  #imm 

B8 

3 

5 

(dp)<-  (dp)  - imm  - C 

NV..H.ZC 

CMP 

A,  #imm 

68 

2 

2 

A - imm 

N ZC 

CMP 

A,  (X) 

66 

1 

3 

A - (X) 

N ZC 

CMP 

A,  dp 

64 

2 

3 

A -(dp) 

N ZC 

CMP 

A,  dp+X 

74 

2 

4 

A - (dp+X) 

N ZC 

CMP 

A,  labs 

65 

3 

4 

A - (abs) 

N ZC 

CMP 

A,  !abs+X 

75 

3 

5 

A - (abs+X) 

N ZC 

CMP 

A,  !abs+Y 

76 

3 

5 

A - (abs+Y) 

N ZC 

CMP 

A,  [dp+X] 

67 

2 

6 

A - ((dp+X+1)(dp+X)) 

N ZC 

CMP 

A,  [dp]+Y 

77 

2 

6 

A - ((dp+1)(dp)+Y) 

N ZC 

CMP 

(X),  (Y) 

79 

1 

5 

(X)  - (Y) 

N ZC 

CMP 

dp<d>,  dp<s 

> 69 

3 

6 

(dp<d>) - (dp<s>) 

N ZC 

CMP 

dp,  #imm 

78 

3 

5 

(dp)  - imm 

N ZC 

CMP 

X,  #imm 

C8 

2 

2 

X - imm 

N ZC 

CMP 

X,  dp 

3E 

2 

3 

X - (dp) 

N ZC 

CMP 

X,  labs 

IE 

3 

4 

X - (abs) 

N ZC 

CMP 

Y,  #imm 

AD 

2 

2 

Y - imm 

N ZC 

CMP 

Y,  dp 

7E 

2 

3 

Y -(dp) 

N ZC 

CMP 

Y,  labs 

5E 

3 

4 

Y - (abs) 

N ZC 

(NCL  PG  39) 


C-5 


SPC  700  COMMANDS 


Table  C-8  8-bit  Logic  Operation  Commands 


Mnemonic 

Operand 

Code 

Bytes 

Cycles 

Operation  NVPBHIZC 

AND 

A,  #imm 

28 

2 

2 

A <-  A AND  imm 

N.. 

..z. 

AND 

A,  (X) 

26 

1 

3 

A <r  A AND  (X) 

N.. 

..z. 

AND 

A,  dp 

24 

2 

3 

A <- A AND  (dP) 

N.. 

..z. 

AND 

A, dp+X 

34 

2 

4 

A <r  A AND  (dp+X) 

N.. 

..z. 

AND 

A,  labs 

25 

3 

4 

A <-  A AND  (abs) 

N.. 

..z. 

AND 

A,  !abs+X 

35 

3 

5 

A A AND  (abs+X) 

N.. 

,.z. 

AND 

A,  !abs+Y 

36 

3 

5 

A <T  A AND  (abs+Y) 

N.. 

..z. 

AND 

A,  [dp+X] 

27 

2 

6 

A«-A  AND  ((dp+X+1)(dp+X)) 

N.. 

..z. 

AND 

A,  [dp]+Y 

37 

2 

6 

A <-  A AND  ((dp+1  )(dp)+Y) 

N.. 

..z. 

AND 

(X),  (Y) 

39 

1 

5 

(X)  <-  (X)  AND  (Y) 

N.. 

..z. 

AND 

dp<d>, dp<s>  29 

3 

6 

(dp<d>)  <r  (dp<d>)  AND(dp<s>)  N.. 

..z. 

AND 

dp,  #imm 

38 

3 

5 

(dp)<-  (dp)  AND  imm 

N.. 

..z. 

OR 

A,  #imm 

08 

2 

2 

A <-  A OR  imm 

N.. 

..z. 

OR 

A,  (X) 

06 

i 

3 

A <-  A OR  (X) 

N.. 

..z. 

OR 

A,  dp 

04 

2 

3 

A<-A  OR  (dp) 

N.. 

..z. 

OR 

A,  dp+X 

14 

2 

4 

A<-A  OR  (dp+X) 

N.. 

..z. 

OR 

A,  labs 

05 

3 

4 

A A OR  (abs) 

N.. 

,.z. 

OR 

A,  !abs+X 

15 

3 

5 

A<-A  OR  (abs+X) 

N.. 

..z. 

OR 

A,  labs+Y 

16 

3 

5 

A A OR  (abs+Y) 

N.. 

..z. 

OR 

A,  [dp+X] 

07 

2 

6 

A<-A  OR  ((dp+X+1)(dp+X)) 

N.. 

..z. 

OR 

A,  [dp]+Y 

17 

2 

6 

A<-A  OR  ((dp+1  )(dp)+Y) 

N.. 

..z. 

OR 

(X),  (Y) 

19 

1 

5 

(X)<-(X)OR  (Y) 

N.. 

..z. 

OR 

dp<d>,  dp<s: 

09 

3 

6 

(dp<d>)  <-  (dp<d>)  OR  (dp<s>) 

N.. 

..z. 

OR 

dp,  #imm 

18 

3 

5 

(dp)  (dp)  OR  imm 

N.. 

..z. 

EOR 

A,  #imm 

48 

2 

2 

A <-  A EOR  imm 

N.. 

..z. 

EOR 

A,  (X) 

46 

1 

3 

A <-  A EOR  (X) 

N.. 

..z. 

EOR 

A,  dp 

44 

2 

3 

A A EOR  (dp) 

N.. 

..z. 

EOR 

A,  dp+X 

54 

2 

4 

A <-  A EOR  (dp+X) 

N.. 

..z. 

EOR 

A,  labs 

45 

3 

4 

A <r  A EOR  (abs) 

N.. 

..z. 

EOR 

A,  !abs+X 

55 

3 

5 

A <r  A EOR  (abs+X) 

N.. 

..z. 

EOR 

A,  !abs+Y 

56 

3 

5 

A <r  A EOR  (abs+Y) 

N.. 

..z. 

EOR 

A,  [dp+X] 

47 

2 

6 

A<-A  EOR  ((dp+X+1)(dp+X)) 

N.. 

..z. 

EOR 

A,  [dp]+Y 

57 

2 

6 

A«-A  EOR  ((dp+1  )(dp)+Y) 

N.. 

..z. 

EOR 

(X),  (Y) 

59 

1 

5 

(X)«-(X)  EOR  (Y) 

N.. 

..z. 

EOR 

dp<d>,  dp<s: 

> 49 

3 

6 

(dp<d>)  <T  (dp<d>)  EOR(dp<s>)  N.. 

...z. 

EOR 

dp,  #imm 

58 

3 

5 

(dp)  <-  (dp)  EOR  imm 

N.. 

...z. 

(NCL  PG  40) 


C-6 


SNES  DEVELOPMENT  MANUAL 


Table  C-9  Addition  and  Subtraction  Commands 


Mnemonic  Operand 

Code 

Bytes 

Cycles 

Operation 

NVPBHIZC 

INC 

A 

BC 

1 

2 

++  A 

N Z. 

INC 

dp 

AB 

2 

4 

++  (dp) 

N Z. 

INC 

dp+X 

BB 

2 

5 

++  (dp+X) 

N Z. 

INC 

labs 

AC 

3 

5 

++  (abs) 

N Z. 

INC 

X 

3D 

1 

2 

++X 

N Z. 

INC 

Y 

FC 

1 

2 

++Y 

N Z. 

DEC 

A 

9C 

1 

2 

- A 

N Z. 

DEC 

dp 

8B 

2 

4 

- (dp) 

N Z. 

DEC 

dp+X 

9B 

2 

5 

- (dp+X) 

N Z. 

DEC 

labs 

8C 

3 

5 

- (abs) 

N Z. 

DEC 

X 

ID 

1 

2 

- X 

N Z. 

DEC 

Y 

DC 

1 

2 

- Y 

N Z. 

Table 

C-10  Shift  Rotation  Commands 

1 Mnemonic  Operand 

Code 

Bytes 

Cycles 

Operation 

NVPBHIZC 

ASL 

A 

1C 

1 

2 

C « A 

«0 

N ZC 

ASL 

dp 

OB 

2 

4 

C « (dp) 

«0 

N ZC 

ASL 

dp+X 

IB 

2 

5 

C « (dp+X) 

«0 

N ZC 

ASL 

labs 

oc 

3 

5 

C « (abs) 

«0 

N ZC 

LSR 

A 

5C 

1 

2 

C « A 

«c 

N ZC 

LSR 

dp 

4B 

2 

4 

C « (dp) 

«c 

N ZC 

LSR 

dp+X 

5B 

2 

5 

C « (dp+X) 

«c 

N ZC 

LSR 

labs 

4C 

3 

5 

C « (abs) 

«c 

N ZC 

ROL 

A 

3C 

1 

2 

C « a 

«c 

N ZC 

ROL 

dp 

2B 

2 

4 

C « (dp) 

«c 

N ZC 

ROL 

dp+X 

3B 

2 

5 

C « (dp+X) 

«c 

N ZC 

ROL 

labs 

2C 

3 

5 

C « (abs) 

«c 

N ZC 

ROR 

A 

1C 

1 

2 

C « A 

«c 

N ZC 

ROR 

dp 

6B 

2 

4 

C « (dp) 

«c 

N ZC 

ROR 

dp+X 

7B 

2 

5 

C « (dp+X) 

«c 

N ZC 

ROR 

labs 

6C 

3 

5 

C « (abs) 

«c 

N ZC 

XCN 

A 

9F 

i 

5 

A (7  ~ 4 )<-»  A (3  ~ 0) 

N Z. 

(NCLPC4V 


C-7 


SPC  700  COMMANDS 


Table  C-11  16-bit  Data  Transmission  Commands 


Code 

Bytes 

Operation  ' 

MOVW 

YA,dp 

BA 

2 

5 

YA  (dp+1)(dp) 

N Z. 

MOVW 

dp,  YA 

DA 

2 

4 

(dp+1)(dp)  <—  YA 

Table 

C-1 2 16-bit  Operation  Commands 

Mnemonic  Operand 

Code 

Bytes 

Cycles 

Operation 

NVPBHIZC 

INCW 

dp 

3A 

2 

6 

increment  dp  memory  pair 

N Z. 

DECW 

dp 

1 A 

2 

6 

decrement  dp  memory  pair 

N Z. 

ADDW 

YA,  dp 

7A 

2 

5 

YA  <—  YA+(dp+1)(dp) 

NV..H.ZC 

SUBW 

YA,  dp 

9A 

2 

5 

YA  <—  YA-  (dp+1)(dp) 

NV..H.ZC 

CMPW 

YA,  dp 

5A 

2 

4 

YA-  (dp+1  )(dp) 

N ZC 

Table 

C-1 3 Multiplication  and  Division  Commands 

Mnemonic  Operand 

Code 

Bytes 

Cycles 

Operation 

NVPBHIZC 

MUL 

YA 

CF 

1 

9 

YA(16bits)  < — Y*  A 

N Z. 

DIV 

YA,  X 

9E 

1 

12 

Q:A  R:Y  < — YA/  X 

NV..H.Z. 

Table 

C-1 4 Decimal  Compensation  Commands 

Mnemonic  Operand 

Code 

Bytes 

Cycles 

Operation 

NVPBHIZC 

DM 

A 

DF 

1 

3 

decimal  adjust  for  addition 

N ZC 

DAS 

A 

BE 

1 

3 

decimal  adjust  for  subtraction 

N ZC 

Table 

C-1 5 Branching  Commands 

Mnemonic  Operand 

Code 

Bytes 

Cycles 

Operation 

NVPBHIZC 

BRA 

rel 

2F 

2 

4 

branch  always 

BEQ 

rel 

FO 

2 

2/4 

branch  on  Z=1 

BNE 

rel 

DO 

2 

2/4 

branch  on  Z=0 

BCS 

rel 

BO 

2 

2/4 

branch  on  C=1 

BCC 

rel 

90 

2 

2/4 

branch  on  C=0 

BVS 

rel 

70 

2 

2/4 

branch  on  V=1 

BVC 

rel 

50 

2 

2/4 

branch  on  V=0 

BMI 

rel 

30 

2 

2/4 

branch  on  N=1 

BPL 

rel 

10 

2 

2/4 

branch  on  N=0 

BBS 

dp, bit,  rel 

x3 

3 

5/7 

branch  on  dp,  bit=1 

BBC 

dp, bit,  rel 

y3 

3 

5/7 

branch  on  dp,  bit=0 

CBNE 

dp, rel 

2E 

3 

5/7 

compare  A with  (dp)  then  BNE  

CBNE 

dp+X,  rel 

DE 

3 

6/8 

compare  A with  (dp+X)  then  BNE  

DBNZ 

dp, rel 

6E 

3 

5/7 

decrement  memory  (dp)  then  JNZ  

DBNZ 

Y,rel 

FE 

2 

4/6 

decrement  Y then  JNZ 

JMP 

labs 

5F 

3 

3 

jump  to  new  location 

JMP 

[!abs+X] 

IF 

3 

6 

PC  < — (abs+X+1)(abs+X) 

(NCL  PG  42) 


C-8 


SNES  DEVELOPMENT  MANUAL 


Table  C-1 6 Subroutine  Call,  Return  Commands 


Mnemonic  Operand 

Code 

Bytes 

Cycles 

Operation 

NVPBHIZC 

CALL 

labs 

3F 

3 

8 

subroutine  call 

PC  ALL 

upage 

4F 

2 

6 

upage  call 

TCALL 

n 

nl 

1 

8 

table  call 

BRK 

OF 

1 

8 

software  interrupt 

...1.0.. 

RET 

6F 

1 

5 

return  from  subroutine 

RETI 

7F 

1 

6 

return  from  interrupt 

(Restored) 

Table 

C-1 7 Stack  Operation  Commands 

Mnemonic  Operand 

Code 

Bytes 

Cycles 

Operation 

NVPBHIZC 

PUSH 

A 

2D 

1 

4 

push  A to  stack 

PUSH 

X 

4D 

1 

4 

push  X to  stack 

PUSH 

Y 

6D 

1 

4 

push  Y to  stack 

PUSH 

PSW 

OD 

1 

4 

push  PSW  to  stack 

POP 

A 

AE 

t 

4 

pop  A from  stack 

POP 

X 

CE 

1 

4 

pop  X from  stack 

POP 

Y 

EE 

1 

4 

pop  Y from  stack 

POP 

PSW 

8E 

1 

4 

pop  PSW  from  stack 

(Restored) 

Table 

C-1 8 Bit  Operation  Commands 

Mnemonic  Operand 

Code 

Bytes 

Cycles 

Operation 

NVPBHIZC 

SET1 

dip.  bit 

x2 

2 

4 

set  direct  page  bit 

CLR1 

dip.  bit 

y2 

2 

4 

clear  direct  page  bit 

TSET1 

labs 

OE 

3 

6 

N Z. 

TCLR1 

labs 

4E 

3 

6 

test  and  clear  bits  with  A 

N Z. 

AND1 

C,  mem.  bit 

4A 

3 

4 

c <—  c and  (mem,  , bit) 

C 

AND1 

C,  /mem.  bit 

6A 

3 

4 

C < — C AND  (mem.  bitt 

C 

OR1 

C,  mem.  bit 

OA 

3 

5 

C <—  C OR  (mem,  bit) 

C 

OR1 

C,  /mem.  bit 

2A 

3 

5 

§3 

C 

EOR1 

C,  mem.  bit 

8A 

3 

5 

C < — c EOR  (mem.  bit) 

C 

NOT1 

mem.  bit 

EA 

3 

5 

complement  (mem.  bit) 

MOV1 

C,  mem.  bit 

AA 

3 

4 

C <—  (mem.  bit) 

C 

MOV1 

mem.  bit,  C 

CA 

3 

6 

C — > (mem.  bit) 

(NCL  PG  43) 


SPC  700  COMMANDS 


Table  C-1 9 Program  Status  Flag  Operation  Commands 

Mnemonic  Operand  Code  Bytes  Cycles  Operation  NVPBHIZC 

CLRC  60  i 2 clear  carry  flag  0 

SETC  80  1 2 set  carry  flag  1 

NOTC  ED  1 3 complement  carry  flag  C 

CLRV  E0  1 2 clear  V and  II  .0..0... 

CLRP  20  1 2 clear  direct  page  flag  ..0 

SETP  40  1 2 set  direct  page  flag  ..1 

El  A0  1 3 set  interrupt  enable  flag  1. 

PI  CO  1 3 clear  interrupt  enable  flag  0. 


Table  C-20  Other  Commands 


Mnemonic  Operand 

Code 

Bytes 

Cycles 

Operation 

NVPBHIZC 

NOP 

00 

1 

2 

no  operation 

SLEEP 

EF 

1 

3 

standby  SLEEP  mode 

STOP 

FF 

1 

3 

standby  STOP  mode 

(NCLPG44) 


C-10 


SNES  DEVELOPMENT  MANUAL 


Appendix  D.  Data  Transfer  Procedure 


D.1  Data  Transfer  Procedure 


Sound  CPU  Side  Direction 


PORTO  = OAAh 


PORT1  = OBBh 


SNES  CPU  Side 


iaprasffiEi 


Confirm  AA,  BB 


M—  PORT1  = NOT  0 

PORTO  = PTO  PORT2  = ADDRESS  LOW  (Data  Transfer  Start  Address)L5x 
«-  PORT3  = ADDRESS  HIGH 
PORTO  = OCCh 


(PTO  is  data  written  at  PORTO  by  the  Main  CPU,  \{3) 
and  it  is  OCCh  in  this  case.)  I 


Data  Transfer  Start  

- PORT1  = DATA 

- PORTO  = 000h 

► 

- Repeat  

- PORT1  = DATA 

- PORTO  = (previous  PORTO  data)  + 1 


When  sending  the  next  data  block 


PORT1  = NOT  0 

PORT2  = ADDRESS  LOW  (Data  Transfer) 
PORT3  = ADDRESS  HIGH 
PORTO  = (previous  PORTO  data)  + 2 to  127 

* Total *  * 0 


Return  to  Data  Transfer  Start 


After  sending  the  last  block 


PORT  = PTO 


PORT1  = 000 

PORT2  = ADDRESS  LOW  (Program  Start  Address) 

PORT3  = ADDRESS  HIGH 

PORTO  = (previous  PORTO  data)  + 2 to  127 


Complete  Data  Transfer 


DATA  TRANSFER  PROCEDURE 


D.2  Data  Transfer  Instruction 

The  transfer  program  on  the  Sound  CPU  is  stored  in  the  internal  ROM  called  IPL 

ROM.  This  ROM  functions  after  reset.  The  program  ROM  functions  using  the 

Main  CPU  and  PORT  0 through  3. 

(5)  The  sound  CPU  writes  AAh  to  PORT  1 . The  Main  CPU  reads  and  confirms 
data  at  PORT  0 and  1 . 

(6)  The  Main  CPU  writes  Start  Address  to  PORT  2 and  3.  After  storing  Port  2 
and  3,  store  any  number  except  0 to  PORT  1 and  store  CCh  to  PORT  0. 

(7)  The  sound  CPU  checks  PORT  0 for  CCh  and  writes  CCh  to  PORT  0. 

(8)  Start  data  transfer.  The  Main  CPU  writes  first  data  to  PORT  1 and  writes 
OOh  to  PORT  0.  The  Sound  CPU  reads  data  from  PORT  1 and  writes  OOh 
to  PORT  0. 

(9)  The  Main  CPU  checks  PORT  0,  writes  next  data  to  PORT  1 , and  incre- 
ments of  PORT  0.  This  is  the  data  transfer  procedure.  The  data  block  con- 
tains the  quantity  of  data  to  be  transferred. 

(1 0)  When  PORT  0 stops  incrementing,  proceed  to  the  next  step.  The  value  that 
the  SNES  CPU  writes  to  PORT  0 must  not  be  OOh.  Write  any  value  but  OOh 
to  PORT  1 . The  Sound  CPU  writes  the  same  value  to  PORT  0 and  then  re- 
turns to  step  (4). 

(11)  After  sending  all  data  blocks  using  steps  (4)  through  (6),  the  data  transfer  is 
completed.  Program  Start  Address  is  stored  to  PORT  2 and  3,  Write  OOh  to 
PORT  1 . 


(NCL  PG  46) 


SNES  DEVELOPMENT  MANUAL 


D.3  Data  Block  Organization 

Data  is  divided  into  several  blocks  having  consecutive  addresses.  The  quantity  of 
data  (2  byte)  and  address  (2  byte)  are  stored  in  front  of  data. 

Data  Block  Example: 


db  030h,  031  h,  032h,  033h,  034h,  035h,  036h,  037h  : First  Data  Block 
db  038h,  039h,  03ah,  03bh,  03ch,  03dh,  03fh 

dw  0001 h,  020000h 

db  030h,  031  h,  032h,  033h,  034h,  035h,  036h,  037h  : Last  Data  Block 
db  038h,  039h,  03ah,  03bh,  03ch,  03dh,  03eh,  03fh 


dw  OOOOOh.  00800h 


(NCI  PG  47) 


D-3 


DATA  TRANSFER  PROCEDURE 


D.4  Sound  Boot  Loader  VI  .1 

gib  Boot_/ 


APU_port 

APUjport 

APU_port 

APU_port 

address 


Boot  APU 


code 

php 

rep 

idxl  6 

mem16 

on16i 

on16a 


Boot_APU 

021 40h 
02141h 
02142h 
021 43h 
OOOOOh 


#0011 0000b 


Input  Sound  ROM  Start  Address 
(3  byte)  in  0 page  and  call 
“Boot  APU"  from  main  routine. 


;sony  news 
;sony  news 
;SNES  Emulator 


bootjnitial 

Idy 

Ida 

cmp 

#0 

#0bbaah 
! APU  PORTO 

;m16 

boot_repeat 

bne 

sep 

mem8 

off  16a 

Ida 

bra 

Ida 

boot  initial 
#001D0000b 

#0cch 
boot  entryl 
[address], y 

;sony  news 
;SNES  Emulator 

boot_loop 

iny 

xba 

Ida 

bra 

xba 

#0 

boot_entry2 

boot_wait1 

Ida 

iny 

xba 

cmp 

[address], y 
! APU  PORTO 

boot_entry2 

bne 

inc 

rep 

boot_wait1 
#001 00000b 

sta 

! APU  PORTO 

;m16 

boot_wait2 

sep 

dex 

bne 

#001 00000b 
boot  loop 

cmp 

! APU  PORTO 

boot_zero 

bne 

adc 

boot  wait2 
#3 

boot_entry1 

beq 

pha 

boot_zero 

;> 

rep 

Ida 

#001 00000b 
[address], y 

;m16 

iny 

iny 

tax 

Ida 

[address], y 

;m16 

iny 

iny 

sta 

! APU  PORT2 

;m16 

boot_wait3 

sep 

cpx 

Ida 

rol 

sta 

adc 

pla 

sta 

cmp 

#001 00000b 

#1 

#0 

IAPU  PORT1 
#07fh 

IAPU  PORTO 
I APU_PORT0 

;> 

bne 

boot  wait3 

bvs 

pip 

rts 

boot_repeat 

end 

(NCL  PG  48) 

D-4 


